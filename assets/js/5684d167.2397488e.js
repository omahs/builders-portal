"use strict";(self.webpackChunkdev_portal=self.webpackChunkdev_portal||[]).push([[4780],{3905:function(e,t,a){a.d(t,{Zo:function(){return p},kt:function(){return k}});var n=a(7294);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function l(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function i(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?l(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):l(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function c(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},l=Object.keys(e);for(n=0;n<l.length;n++)a=l[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)a=l[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var o=n.createContext({}),d=function(e){var t=n.useContext(o),a=t;return e&&(a="function"==typeof e?e(t):i(i({},t),e)),a},p=function(e){var t=d(e.components);return n.createElement(o.Provider,{value:t},e.children)},s={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},u=n.forwardRef((function(e,t){var a=e.components,r=e.mdxType,l=e.originalType,o=e.parentName,p=c(e,["components","mdxType","originalType","parentName"]),u=d(a),k=r,m=u["".concat(o,".").concat(k)]||u[k]||s[k]||l;return a?n.createElement(m,i(i({ref:t},p),{},{components:a})):n.createElement(m,i({ref:t},p))}));function k(e,t){var a=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var l=a.length,i=new Array(l);i[0]=u;var c={};for(var o in t)hasOwnProperty.call(t,o)&&(c[o]=t[o]);c.originalType=e,c.mdxType="string"==typeof e?e:r,i[1]=c;for(var d=2;d<l;d++)i[d]=a[d];return n.createElement.apply(null,i)}return n.createElement.apply(null,a)}u.displayName="MDXCreateElement"},9820:function(e,t,a){a.r(t),a.d(t,{assets:function(){return p},contentTitle:function(){return o},default:function(){return k},frontMatter:function(){return c},metadata:function(){return d},toc:function(){return s}});var n=a(3117),r=a(102),l=(a(7294),a(3905)),i=["components"],c={},o=void 0,d={unversionedId:"smart-contracts/core/erc165/AdaptiveERC165",id:"smart-contracts/core/erc165/AdaptiveERC165",title:"AdaptiveERC165",description:"Aragon Core",source:"@site/docs/smart-contracts/core/erc165/AdaptiveERC165.md",sourceDirName:"smart-contracts/core/erc165",slug:"/smart-contracts/core/erc165/AdaptiveERC165",permalink:"/docs/smart-contracts/core/erc165/AdaptiveERC165",draft:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/smart-contracts/core/erc165/AdaptiveERC165.md",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"ERC165",permalink:"/docs/smart-contracts/core/erc165/"},next:{title:"BulkPermissionsLib",permalink:"/docs/smart-contracts/core/permission/BulkPermissionsLib"}},p={},s=[{value:"Aragon Core",id:"aragon-core",level:2},{value:"contract <code>AdaptiveERC165</code>",id:"contract-adaptiveerc165",level:3},{value:"internal variable <code>standardSupported</code>",id:"internal-variable-standardsupported",level:4},{value:"internal variable <code>callbackMagicNumbers</code>",id:"internal-variable-callbackmagicnumbers",level:4},{value:"internal variable <code>UNREGISTERED_CALLBACK</code>",id:"internal-variable-unregistered_callback",level:4},{value:"error <code>AdapERC165UnkownCallback</code>",id:"error-adaperc165unkowncallback",level:4},{value:"event <code>StandardRegistered</code>",id:"event-standardregistered",level:4},{value:"event <code>CallbackRegistered</code>",id:"event-callbackregistered",level:4},{value:"event <code>CallbackReceived</code>",id:"event-callbackreceived",level:4},{value:"public function <code>supportsInterface</code>",id:"public-function-supportsinterface",level:4},{value:"internal function <code>_handleCallback</code>",id:"internal-function-_handlecallback",level:4},{value:"internal function <code>_registerStandardAndCallback</code>",id:"internal-function-_registerstandardandcallback",level:4},{value:"internal function <code>_registerStandard</code>",id:"internal-function-_registerstandard",level:4},{value:"internal function <code>_registerCallback</code>",id:"internal-function-_registercallback",level:4}],u={toc:s};function k(e){var t=e.components,a=(0,r.Z)(e,i);return(0,l.kt)("wrapper",(0,n.Z)({},u,a,{components:t,mdxType:"MDXLayout"}),(0,l.kt)("h2",{id:"aragon-core"},"Aragon Core"),(0,l.kt)("h3",{id:"contract-adaptiveerc165"},"contract ",(0,l.kt)("inlineCode",{parentName:"h3"},"AdaptiveERC165")),(0,l.kt)("h4",{id:"internal-variable-standardsupported"},"internal variable ",(0,l.kt)("inlineCode",{parentName:"h4"},"standardSupported")),(0,l.kt)("p",null,"ERC165 interface ID -> whether it is supported"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-solidity"},"mapping(bytes4 => bool) standardSupported \n")),(0,l.kt)("h4",{id:"internal-variable-callbackmagicnumbers"},"internal variable ",(0,l.kt)("inlineCode",{parentName:"h4"},"callbackMagicNumbers")),(0,l.kt)("p",null,"Callback function signature -> magic number to return"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-solidity"},"mapping(bytes4 => bytes32) callbackMagicNumbers \n")),(0,l.kt)("h4",{id:"internal-variable-unregistered_callback"},"internal variable ",(0,l.kt)("inlineCode",{parentName:"h4"},"UNREGISTERED_CALLBACK")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-solidity"},"bytes32 UNREGISTERED_CALLBACK \n")),(0,l.kt)("h4",{id:"error-adaperc165unkowncallback"},"error ",(0,l.kt)("inlineCode",{parentName:"h4"},"AdapERC165UnkownCallback")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-solidity"},"error AdapERC165UnkownCallback(bytes32 magicNumber) \n")),(0,l.kt)("h4",{id:"event-standardregistered"},"event ",(0,l.kt)("inlineCode",{parentName:"h4"},"StandardRegistered")),(0,l.kt)("p",null,"Emmitted when a new standard is registred and assigned to ",(0,l.kt)("inlineCode",{parentName:"p"},"interfaceId")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-solidity"},"event StandardRegistered(bytes4 interfaceId) \n")),(0,l.kt)("h4",{id:"event-callbackregistered"},"event ",(0,l.kt)("inlineCode",{parentName:"h4"},"CallbackRegistered")),(0,l.kt)("p",null,"Emmitted when a callback is registered"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-solidity"},"event CallbackRegistered(bytes4 sig, bytes4 magicNumber) \n")),(0,l.kt)("h4",{id:"event-callbackreceived"},"event ",(0,l.kt)("inlineCode",{parentName:"h4"},"CallbackReceived")),(0,l.kt)("p",null,"Emmitted when a callback is received"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-solidity"},"event CallbackReceived(bytes4 sig, bytes data) \n")),(0,l.kt)("h4",{id:"public-function-supportsinterface"},"public function ",(0,l.kt)("inlineCode",{parentName:"h4"},"supportsInterface")),(0,l.kt)("p",null,"Checks if the contract supports a specific interface or not"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-solidity"},"function supportsInterface(bytes4 _interfaceId) public view virtual returns (bool) \n")),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:"left"},"Input"),(0,l.kt)("th",{parentName:"tr",align:null},"Type"),(0,l.kt)("th",{parentName:"tr",align:null},"Description"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},"_interfaceId"),(0,l.kt)("td",{parentName:"tr",align:null},"bytes4"),(0,l.kt)("td",{parentName:"tr",align:null},"The identifier of the interface to check for")))),(0,l.kt)("h4",{id:"internal-function-_handlecallback"},"internal function ",(0,l.kt)("inlineCode",{parentName:"h4"},"_handleCallback")),(0,l.kt)("p",null,"Handles callbacks to support future versions of the ERC165 or similar without upgrading the contracts."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-solidity"},"function _handleCallback(bytes4 _sig, bytes _data) internal \n")),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:"left"},"Input"),(0,l.kt)("th",{parentName:"tr",align:null},"Type"),(0,l.kt)("th",{parentName:"tr",align:null},"Description"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},"_sig"),(0,l.kt)("td",{parentName:"tr",align:null},"bytes4"),(0,l.kt)("td",{parentName:"tr",align:null},"The function signature of the called method (msg.sig)")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},"_data"),(0,l.kt)("td",{parentName:"tr",align:null},"bytes"),(0,l.kt)("td",{parentName:"tr",align:null},"The data resp. arguments passed to the method")))),(0,l.kt)("h4",{id:"internal-function-_registerstandardandcallback"},"internal function ",(0,l.kt)("inlineCode",{parentName:"h4"},"_registerStandardAndCallback")),(0,l.kt)("p",null,"Registers a standard and also callback"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-solidity"},"function _registerStandardAndCallback(bytes4 _interfaceId, bytes4 _callbackSig, bytes4 _magicNumber) internal \n")),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:"left"},"Input"),(0,l.kt)("th",{parentName:"tr",align:null},"Type"),(0,l.kt)("th",{parentName:"tr",align:null},"Description"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},"_interfaceId"),(0,l.kt)("td",{parentName:"tr",align:null},"bytes4"),(0,l.kt)("td",{parentName:"tr",align:null},"The identifier of the interface to check for")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},"_callbackSig"),(0,l.kt)("td",{parentName:"tr",align:null},"bytes4"),(0,l.kt)("td",{parentName:"tr",align:null},"The function signature of the called method (msg.sig)")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},"_magicNumber"),(0,l.kt)("td",{parentName:"tr",align:null},"bytes4"),(0,l.kt)("td",{parentName:"tr",align:null},"The magic number to be registered for the function signature")))),(0,l.kt)("h4",{id:"internal-function-_registerstandard"},"internal function ",(0,l.kt)("inlineCode",{parentName:"h4"},"_registerStandard")),(0,l.kt)("p",null,"Registers a standard resp. interface type"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-solidity"},"function _registerStandard(bytes4 _interfaceId) internal \n")),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:"left"},"Input"),(0,l.kt)("th",{parentName:"tr",align:null},"Type"),(0,l.kt)("th",{parentName:"tr",align:null},"Description"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},"_interfaceId"),(0,l.kt)("td",{parentName:"tr",align:null},"bytes4"),(0,l.kt)("td",{parentName:"tr",align:null},"The identifier of the interface to check for")))),(0,l.kt)("h4",{id:"internal-function-_registercallback"},"internal function ",(0,l.kt)("inlineCode",{parentName:"h4"},"_registerCallback")),(0,l.kt)("p",null,"Registers a callback"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-solidity"},"function _registerCallback(bytes4 _callbackSig, bytes4 _magicNumber) internal \n")),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:"left"},"Input"),(0,l.kt)("th",{parentName:"tr",align:null},"Type"),(0,l.kt)("th",{parentName:"tr",align:null},"Description"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},"_callbackSig"),(0,l.kt)("td",{parentName:"tr",align:null},"bytes4"),(0,l.kt)("td",{parentName:"tr",align:null},"The function signature of the called method (msg.sig)")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},"_magicNumber"),(0,l.kt)("td",{parentName:"tr",align:null},"bytes4"),(0,l.kt)("td",{parentName:"tr",align:null},"The magic number to be registered for the function signature")))))}k.isMDXComponent=!0}}]);