"use strict";(self.webpackChunkdev_portal=self.webpackChunkdev_portal||[]).push([[5916],{5388:function(e,t,n){n.d(t,{VG:function(){return Ch},aU:function(){return kh},rU:function(){return eg}});var r=n(7294),o=n.t(r,2),i=n(2125),s=n(710);let a=0;function l(){r.useEffect((()=>{var e,t;const n=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",null!==(e=n[0])&&void 0!==e?e:u()),document.body.insertAdjacentElement("beforeend",null!==(t=n[1])&&void 0!==t?t:u()),a++,()=>{1===a&&document.querySelectorAll("[data-radix-focus-guard]").forEach((e=>e.remove())),a--}}),[])}function u(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.cssText="outline: none; opacity: 0; position: fixed; pointer-events: none",e}function c(e){const t=r.useRef(e);return r.useEffect((()=>{t.current=e})),r.useMemo((()=>(...e)=>{var n;return null===(n=t.current)||void 0===n?void 0:n.call(t,...e)}),[])}function d(...e){return t=>e.forEach((e=>function(e,t){"function"==typeof e?e(t):null!=e&&(e.current=t)}(e,t)))}function p(...e){return r.useCallback(d(...e),e)}var h=n(3117);const f=r.forwardRef(((e,t)=>{const{children:n,...o}=e;return r.Children.toArray(n).some(y)?r.createElement(r.Fragment,null,r.Children.map(n,(e=>y(e)?r.createElement(m,(0,h.Z)({},o,{ref:t}),e.props.children):e))):r.createElement(m,(0,h.Z)({},o,{ref:t}),n)}));f.displayName="Slot";const m=r.forwardRef(((e,t)=>{const{children:n,...o}=e;return r.isValidElement(n)?r.cloneElement(n,{...v(o,n.props),ref:d(t,n.ref)}):r.Children.count(n)>1?r.Children.only(null):null}));m.displayName="SlotClone";const g=({children:e})=>r.createElement(r.Fragment,null,e);function y(e){return r.isValidElement(e)&&e.type===g}function v(e,t){const n={...t};for(const r in t){const o=e[r],i=t[r];/^on[A-Z]/.test(r)?n[r]=(...e)=>{null==i||i(...e),null==o||o(...e)}:"style"===r?n[r]={...o,...i}:"className"===r&&(n[r]=[o,i].filter(Boolean).join(" "))}return{...e,...n}}const b=["a","button","div","h2","h3","img","li","nav","ol","p","span","svg","ul"].reduce(((e,t)=>({...e,[t]:r.forwardRef(((e,n)=>{const{asChild:o,...i}=e,s=o?f:t;return r.useEffect((()=>{window[Symbol.for("radix-ui")]=!0}),[]),r.createElement(s,(0,h.Z)({},i,{ref:n}))}))})),{}),D=Boolean(null===globalThis||void 0===globalThis?void 0:globalThis.document)?r.useLayoutEffect:()=>{},C=o["useId".toString()]||(()=>{});let w=0;function E(e,t=[]){let n=[];const o=()=>{const t=n.map((e=>r.createContext(e)));return function(n){const o=(null==n?void 0:n[e])||t;return r.useMemo((()=>({[`__scope${e}`]:{...n,[e]:o}})),[n,o])}};return o.scopeName=e,[function(t,o){const i=r.createContext(o),s=n.length;function a(t){const{scope:n,children:o,...a}=t,l=(null==n?void 0:n[e][s])||i,u=r.useMemo((()=>a),Object.values(a));return r.createElement(l.Provider,{value:u},o)}return n=[...n,o],a.displayName=t+"Provider",[a,function(n,a){const l=(null==a?void 0:a[e][s])||i,u=r.useContext(l);if(u)return u;if(void 0!==o)return o;throw new Error(`\`${n}\` must be used within \`${t}\``)}]},x(o,...t)]}function x(...e){const t=e[0];if(1===e.length)return t;const n=()=>{const n=e.map((e=>({useScope:e(),scopeName:e.scopeName})));return function(e){const o=n.reduce(((t,{useScope:n,scopeName:r})=>({...t,...n(e)[`__scope${r}`]})),{});return r.useMemo((()=>({[`__scope${t.scopeName}`]:o})),[o])}};return n.scopeName=t.scopeName,n}function k(e){const t=e+"CollectionProvider",[n,o]=E(t),[i,s]=n(t,{collectionRef:{current:null},itemMap:new Map}),a=e+"CollectionSlot",l=r.forwardRef(((e,t)=>{const{scope:n,children:o}=e,i=p(t,s(a,n).collectionRef);return r.createElement(f,{ref:i},o)})),u=e+"CollectionItemSlot",c="data-radix-collection-item",d=r.forwardRef(((e,t)=>{const{scope:n,children:o,...i}=e,a=r.useRef(null),l=p(t,a),d=s(u,n);return r.useEffect((()=>(d.itemMap.set(a,{ref:a,...i}),()=>{d.itemMap.delete(a)}))),r.createElement(f,{[c]:"",ref:l},o)}));return[{Provider:e=>{const{scope:t,children:n}=e,o=r.useRef(null),s=r.useRef(new Map).current;return r.createElement(i,{scope:t,itemMap:s,collectionRef:o},n)},Slot:l,ItemSlot:d},function(t){const n=s(e+"CollectionConsumer",t);return r.useCallback((()=>{const e=n.collectionRef.current;if(!e)return[];const t=Array.from(e.querySelectorAll(`[${c}]`));return Array.from(n.itemMap.values()).sort(((e,n)=>t.indexOf(e.ref.current)-t.indexOf(n.ref.current)))}),[n.collectionRef,n.itemMap])},o]}function A(e,t,{checkForDefaultPrevented:n=!0}={}){return function(r){if(null==e||e(r),!1===n||!r.defaultPrevented)return null==t?void 0:t(r)}}const S={bubbles:!1,cancelable:!0},[M,F,O]=k("RovingFocusGroup"),[T,B]=E("RovingFocusGroup",[O]),[N,R]=T("RovingFocusGroup"),I=r.forwardRef(((e,t)=>r.createElement(M.Provider,{scope:e.__scopeRovingFocusGroup},r.createElement(M.Slot,{scope:e.__scopeRovingFocusGroup},r.createElement(P,(0,h.Z)({},e,{ref:t})))))),P=r.forwardRef(((e,t)=>{const{__scopeRovingFocusGroup:n,orientation:o,dir:i="ltr",loop:s=!1,currentTabStopId:a,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:u,onEntryFocus:d,...f}=e,m=r.useRef(null),g=p(t,m),[y=null,v]=function({prop:e,defaultProp:t,onChange:n=(()=>{})}){const[o,i]=function({defaultProp:e,onChange:t}){const n=r.useState(e),[o]=n,i=r.useRef(o),s=c(t);return r.useEffect((()=>{i.current!==o&&(s(o),i.current=o)}),[o,i,s]),n}({defaultProp:t,onChange:n}),s=void 0!==e,a=s?e:o,l=c(n);return[a,r.useCallback((t=>{if(s){const n=t,r="function"==typeof t?n(e):t;r!==e&&l(r)}else i(t)}),[s,e,i,l])]}({prop:a,defaultProp:l,onChange:u}),[D,C]=r.useState(!1),w=c(d),E=F(n),x=r.useRef(!1);return r.useEffect((()=>{const e=m.current;if(e)return e.addEventListener("rovingFocusGroup.onEntryFocus",w),()=>e.removeEventListener("rovingFocusGroup.onEntryFocus",w)}),[w]),r.createElement(N,{scope:n,orientation:o,dir:i,loop:s,currentTabStopId:y,onItemFocus:r.useCallback((e=>v(e)),[v]),onItemShiftTab:r.useCallback((()=>C(!0)),[])},r.createElement(b.div,(0,h.Z)({tabIndex:D?-1:0,"data-orientation":o},f,{ref:g,style:{outline:"none",...e.style},onMouseDown:A(e.onMouseDown,(()=>{x.current=!0})),onFocus:A(e.onFocus,(e=>{const t=!x.current;if(e.target===e.currentTarget&&t&&!D){const t=new Event("rovingFocusGroup.onEntryFocus",S);if(e.currentTarget.dispatchEvent(t),!t.defaultPrevented){const e=E().filter((e=>e.focusable));$([e.find((e=>e.active)),e.find((e=>e.id===y)),...e].filter(Boolean).map((e=>e.ref.current)))}}x.current=!1})),onBlur:A(e.onBlur,(()=>C(!1)))})))})),L=r.forwardRef(((e,t)=>{const{__scopeRovingFocusGroup:n,focusable:o=!0,active:i=!1,...s}=e,a=function(e){const[t,n]=r.useState(C());return D((()=>{e||n((e=>null!=e?e:String(w++)))}),[e]),e||(t?`radix-${t}`:"")}(),l=R("RovingFocusGroupItem",n),u=l.currentTabStopId===a,c=F(n);return r.createElement(M.ItemSlot,{scope:n,id:a,focusable:o,active:i},r.createElement(b.span,(0,h.Z)({tabIndex:u?0:-1,"data-orientation":l.orientation},s,{ref:t,onMouseDown:A(e.onMouseDown,(e=>{o?l.onItemFocus(a):e.preventDefault()})),onFocus:A(e.onFocus,(()=>l.onItemFocus(a))),onKeyDown:A(e.onKeyDown,(e=>{if("Tab"===e.key&&e.shiftKey)return void l.onItemShiftTab();if(e.target!==e.currentTarget)return;const t=function(e,t,n){const r=function(e,t){return"rtl"!==t?e:"ArrowLeft"===e?"ArrowRight":"ArrowRight"===e?"ArrowLeft":e}(e.key,n);return"vertical"===t&&["ArrowLeft","ArrowRight"].includes(r)||"horizontal"===t&&["ArrowUp","ArrowDown"].includes(r)?void 0:z[r]}(e,l.orientation,l.dir);if(void 0!==t){e.preventDefault();let o=c().filter((e=>e.focusable)).map((e=>e.ref.current));if("last"===t)o.reverse();else if("prev"===t||"next"===t){"prev"===t&&o.reverse();const i=o.indexOf(e.currentTarget);o=l.loop?(r=i+1,(n=o).map(((e,t)=>n[(r+t)%n.length]))):o.slice(i+1)}setTimeout((()=>$(o)))}var n,r}))})))})),z={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function $(e){const t=document.activeElement;for(const n of e){if(n===t)return;if(n.focus(),document.activeElement!==t)return}}const j=I,_=L;var H=n(3935);const K=r.forwardRef(((e,t)=>{var n,o;const{containerRef:i,style:s,...a}=e,l=null!==(n=null==i?void 0:i.current)&&void 0!==n?n:null===globalThis||void 0===globalThis||null===(o=globalThis.document)||void 0===o?void 0:o.body,[,u]=r.useState({});return D((()=>{u({})}),[]),l?H.createPortal(r.createElement(b.div,(0,h.Z)({"data-radix-portal":""},a,{ref:t,style:l===document.body?{position:"absolute",top:0,left:0,zIndex:2147483647,...s}:void 0})),l):null}));function V(e){const[t,n]=r.useState(void 0);return r.useEffect((()=>{if(e){const t=new ResizeObserver((t=>{if(!Array.isArray(t))return;if(!t.length)return;const r=t[0];let o,i;if("borderBoxSize"in r){const e=r.borderBoxSize,t=Array.isArray(e)?e[0]:e;o=t.inlineSize,i=t.blockSize}else{const t=e.getBoundingClientRect();o=t.width,i=t.height}n({width:o,height:i})}));return t.observe(e,{box:"border-box"}),()=>t.unobserve(e)}n(void 0)}),[e]),t}let q;const W=new Map;function U(){const e=[];W.forEach(((t,n)=>{const r=n.getBoundingClientRect();var o,i;i=r,((o=t.rect).width!==i.width||o.height!==i.height||o.top!==i.top||o.right!==i.right||o.bottom!==i.bottom||o.left!==i.left)&&(t.rect=r,e.push(t))})),e.forEach((e=>{e.callbacks.forEach((t=>t(e.rect)))})),q=requestAnimationFrame(U)}function Z(e){const[t,n]=r.useState();return r.useEffect((()=>{if(e){const t=function(e,t){const n=W.get(e);return void 0===n?(W.set(e,{rect:{},callbacks:[t]}),1===W.size&&(q=requestAnimationFrame(U))):(n.callbacks.push(t),t(e.getBoundingClientRect())),()=>{const n=W.get(e);if(void 0===n)return;const r=n.callbacks.indexOf(t);r>-1&&n.callbacks.splice(r,1),0===n.callbacks.length&&(W.delete(e),0===W.size&&cancelAnimationFrame(q))}}(e,n);return()=>{n(void 0),t()}}}),[e]),t}function J(e,t,n){const r=e["x"===n?"left":"top"],o="x"===n?"width":"height",i=e[o],s=t[o];return{before:r-s,start:r,center:r+(i-s)/2,end:r+i-s,after:r+i}}function G(e){return{position:"absolute",top:0,left:0,minWidth:"max-content",willChange:"transform",transform:`translate3d(${Math.round(e.x+window.scrollX)}px, ${Math.round(e.y+window.scrollY)}px, 0)`}}function Y(e,t,n,r,o){const i="top"===t||"bottom"===t,s=o?o.width:0,a=o?o.height:0,l=s/2+r;let u="",c="";return i?(u={start:`${l}px`,center:"center",end:e.width-l+"px"}[n],c="top"===t?`${e.height+a}px`:-a+"px"):(u="left"===t?`${e.width+a}px`:-a+"px",c={start:`${l}px`,center:"center",end:e.height-l+"px"}[n]),`${u} ${c}`}const X={position:"fixed",top:0,left:0,opacity:0,transform:"translate3d(0, -200%, 0)"},Q={position:"absolute",opacity:0};function ee({popperSize:e,arrowSize:t,arrowOffset:n,side:r,align:o}){const i=(e.width-t.width)/2,s=(e.height-t.width)/2,a={top:0,right:90,bottom:180,left:-90}[r],l=Math.max(t.width,t.height),u={width:`${l}px`,height:`${l}px`,transform:`rotate(${a}deg)`,willChange:"transform",position:"absolute",[r]:"100%",direction:te(r,o)};return"top"!==r&&"bottom"!==r||("start"===o&&(u.left=`${n}px`),"center"===o&&(u.left=`${i}px`),"end"===o&&(u.right=`${n}px`)),"left"!==r&&"right"!==r||("start"===o&&(u.top=`${n}px`),"center"===o&&(u.top=`${s}px`),"end"===o&&(u.bottom=`${n}px`)),u}function te(e,t){return("top"!==e&&"right"!==e||"end"!==t)&&("bottom"!==e&&"left"!==e||"end"===t)?"ltr":"rtl"}function ne(e){return{top:"bottom",right:"left",bottom:"top",left:"right"}[e]}function re(e,t){return{top:e.top<t.top,right:e.right>t.right,bottom:e.bottom>t.bottom,left:e.left<t.left}}const[oe,ie]=E("Popper"),[se,ae]=oe("Popper"),[le,ue]=oe("PopperContent"),ce=r.forwardRef(((e,t)=>{const{__scopePopper:n,side:o="bottom",sideOffset:i,align:s="center",alignOffset:a,collisionTolerance:l,avoidCollisions:u=!0,...c}=e,d=ae("PopperContent",n),[f,m]=r.useState(),g=Z(d.anchor),[y,v]=r.useState(null),D=V(y),[C,w]=r.useState(null),E=V(C),x=p(t,(e=>v(e))),k=function(){const[e,t]=r.useState(void 0);return r.useEffect((()=>{let e;function n(){t({width:window.innerWidth,height:window.innerHeight})}function r(){window.clearTimeout(e),e=window.setTimeout(n,100)}return n(),window.addEventListener("resize",r),()=>window.removeEventListener("resize",r)}),[]),e}(),A=k?DOMRect.fromRect({...k,x:0,y:0}):void 0,{popperStyles:S,arrowStyles:M,placedSide:F,placedAlign:O}=function({anchorRect:e,popperSize:t,arrowSize:n,arrowOffset:r=0,side:o,sideOffset:i=0,align:s,alignOffset:a=0,shouldAvoidCollisions:l=!0,collisionBoundariesRect:u,collisionTolerance:c=0}){if(!e||!t||!u)return{popperStyles:X,arrowStyles:Q};const d=function(e,t,n=0,r=0,o){const i=o?o.height:0,s=J(t,e,"x"),a=J(t,e,"y"),l=a.before-n-i,u=a.after+n+i,c=s.before-n-i,d=s.after+n+i;return{top:{start:{x:s.start+r,y:l},center:{x:s.center,y:l},end:{x:s.end-r,y:l}},right:{start:{x:d,y:a.start+r},center:{x:d,y:a.center},end:{x:d,y:a.end-r}},bottom:{start:{x:s.start+r,y:u},center:{x:s.center,y:u},end:{x:s.end-r,y:u}},left:{start:{x:c,y:a.start+r},center:{x:c,y:a.center},end:{x:c,y:a.end-r}}}}(t,e,i,a,n),p=d[o][s];if(!1===l){const e=G(p);let i=Q;return n&&(i=ee({popperSize:t,arrowSize:n,arrowOffset:r,side:o,align:s})),{popperStyles:{...e,"--radix-popper-transform-origin":Y(t,o,s,r,n)},arrowStyles:i,placedSide:o,placedAlign:s}}const h=DOMRect.fromRect({...t,...p}),f=(m=u,g=c,DOMRect.fromRect({width:m.width-2*g,height:m.height-2*g,x:m.left+g,y:m.top+g}));var m,g;const y=re(h,f),v=d[ne(o)][s],b=function(e,t,n){const r=ne(e);return t[e]&&!n[r]?r:e}(o,y,re(DOMRect.fromRect({...t,...v}),f)),D=function(e,t,n,r,o){const i="top"===n||"bottom"===n,s=i?"left":"top",a=i?"right":"bottom",l=i?"width":"height",u=t[l]>e[l];return"start"!==r&&"center"!==r||!(o[s]&&u||o[a]&&!u)?"end"!==r&&"center"!==r||!(o[a]&&u||o[s]&&!u)?r:"start":"end"}(t,e,o,s,y),C=G(d[b][D]);let w=Q;return n&&(w=ee({popperSize:t,arrowSize:n,arrowOffset:r,side:b,align:D})),{popperStyles:{...C,"--radix-popper-transform-origin":Y(t,b,D,r,n)},arrowStyles:w,placedSide:b,placedAlign:D}}({anchorRect:g,popperSize:D,arrowSize:E,arrowOffset:f,side:o,sideOffset:i,align:s,alignOffset:a,shouldAvoidCollisions:u,collisionBoundariesRect:A,collisionTolerance:l}),T=void 0!==F;return r.createElement("div",{style:S,"data-radix-popper-content-wrapper":""},r.createElement(le,{scope:n,arrowStyles:M,onArrowChange:w,onArrowOffsetChange:m},r.createElement(b.div,(0,h.Z)({"data-side":F,"data-align":O},c,{style:{...c.style,animation:T?void 0:"none"},ref:x}))))})),de=ce,pe=e=>{const{present:t,children:n}=e,o=function(e){const[t,n]=r.useState(),o=r.useRef({}),i=r.useRef(e),s=r.useRef("none"),a=e?"mounted":"unmounted",[l,u]=function(e,t){return r.useReducer(((e,n)=>{const r=t[e][n];return null!=r?r:e}),e)}(a,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return r.useEffect((()=>{const e=he(o.current);s.current="mounted"===l?e:"none"}),[l]),D((()=>{const t=o.current,n=i.current;if(n!==e){const r=s.current,o=he(t);if(e)u("MOUNT");else if("none"===o||"none"===(null==t?void 0:t.display))u("UNMOUNT");else{const e=r!==o;u(n&&e?"ANIMATION_OUT":"UNMOUNT")}i.current=e}}),[e,u]),D((()=>{if(t){const e=e=>{const n=he(o.current).includes(e.animationName);e.target===t&&n&&u("ANIMATION_END")},n=e=>{e.target===t&&(s.current=he(o.current))};return t.addEventListener("animationstart",n),t.addEventListener("animationcancel",e),t.addEventListener("animationend",e),()=>{t.removeEventListener("animationstart",n),t.removeEventListener("animationcancel",e),t.removeEventListener("animationend",e)}}u("ANIMATION_END")}),[t,u]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:r.useCallback((e=>{e&&(o.current=getComputedStyle(e)),n(e)}),[])}}(t),i="function"==typeof n?n({present:o.isPresent}):r.Children.only(n),s=p(o.ref,i.ref);return"function"==typeof n||o.isPresent?r.cloneElement(i,{ref:s}):null};function he(e){return(null==e?void 0:e.animationName)||"none"}pe.displayName="Presence";const fe={bubbles:!1,cancelable:!0},me=r.forwardRef(((e,t)=>{const{loop:n=!1,trapped:o=!1,onMountAutoFocus:i,onUnmountAutoFocus:s,...a}=e,[l,u]=r.useState(null),d=c(i),f=c(s),m=r.useRef(null),g=p(t,(e=>u(e))),y=r.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;r.useEffect((()=>{if(o){function e(e){if(y.paused||!l)return;const t=e.target;l.contains(t)?m.current=t:be(m.current,{select:!0})}function t(e){!y.paused&&l&&(l.contains(e.relatedTarget)||be(m.current,{select:!0}))}return document.addEventListener("focusin",e),document.addEventListener("focusout",t),()=>{document.removeEventListener("focusin",e),document.removeEventListener("focusout",t)}}}),[o,l,y.paused]),r.useEffect((()=>{if(l){De.add(y);const e=document.activeElement;if(!l.contains(e)){const t=new Event("focusScope.autoFocusOnMount",fe);l.addEventListener("focusScope.autoFocusOnMount",d),l.dispatchEvent(t),t.defaultPrevented||(function(e,{select:t=!1}={}){const n=document.activeElement;for(const r of e)if(be(r,{select:t}),document.activeElement!==n)return}(ge(l).filter((e=>"A"!==e.tagName)),{select:!0}),document.activeElement===e&&be(l))}return()=>{l.removeEventListener("focusScope.autoFocusOnMount",d),setTimeout((()=>{const t=new Event("focusScope.autoFocusOnUnmount",fe);l.addEventListener("focusScope.autoFocusOnUnmount",f),l.dispatchEvent(t),t.defaultPrevented||be(null!=e?e:document.body,{select:!0}),l.removeEventListener("focusScope.autoFocusOnUnmount",f),De.remove(y)}),0)}}}),[l,d,f,y]);const v=r.useCallback((e=>{if(!n&&!o)return;if(y.paused)return;const t="Tab"===e.key&&!e.altKey&&!e.ctrlKey&&!e.metaKey,r=document.activeElement;if(t&&r){const t=e.currentTarget,[o,i]=function(e){const t=ge(e);return[ye(t,e),ye(t.reverse(),e)]}(t);o&&i?e.shiftKey||r!==i?e.shiftKey&&r===o&&(e.preventDefault(),n&&be(i,{select:!0})):(e.preventDefault(),n&&be(o,{select:!0})):r===t&&e.preventDefault()}}),[n,o,y.paused]);return r.createElement(b.div,(0,h.Z)({tabIndex:-1},a,{ref:g,onKeyDown:v}))}));function ge(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:e=>{const t="INPUT"===e.tagName&&"hidden"===e.type;return e.disabled||e.hidden||t?NodeFilter.FILTER_SKIP:e.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function ye(e,t){for(const n of e)if(!ve(n,{upTo:t}))return n}function ve(e,{upTo:t}){if("hidden"===getComputedStyle(e).visibility)return!0;for(;e;){if(void 0!==t&&e===t)return!1;if("none"===getComputedStyle(e).display)return!0;e=e.parentElement}return!1}function be(e,{select:t=!1}={}){if(e&&e.focus){const n=document.activeElement;e.focus({preventScroll:!0}),e!==n&&function(e){return e instanceof HTMLInputElement&&"select"in e}(e)&&t&&e.select()}}const De=function(){let e=[];return{add(t){const n=e[0];t!==n&&(null==n||n.pause()),e=Ce(e,t),e.unshift(t)},remove(t){var n;e=Ce(e,t),null===(n=e[0])||void 0===n||n.resume()}}}();function Ce(e,t){const n=[...e],r=n.indexOf(t);return-1!==r&&n.splice(r,1),n}let we,Ee=0;const xe=r.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),ke=r.forwardRef(((e,t)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:o,onPointerDownOutside:i,onFocusOutside:s,onInteractOutside:a,onDismiss:l,...u}=e,d=r.useContext(xe),[f,m]=r.useState(null),[,g]=r.useState({}),y=p(t,(e=>m(e))),v=Array.from(d.layers),[C]=[...d.layersWithOutsidePointerEventsDisabled].slice(-1),w=v.indexOf(C),E=f?v.indexOf(f):-1,x=d.layersWithOutsidePointerEventsDisabled.size>0,k=E>=w,S=function(e){const t=c((e=>{const t=e.target,n=[...d.branches].some((e=>e.contains(t)));k&&!n&&(null==i||i(e),null==a||a(e),e.defaultPrevented||null==l||l())})),n=r.useRef(!1);return r.useEffect((()=>{const e=e=>{e.target&&!n.current&&Se("dismissableLayer.pointerDownOutside",t,{originalEvent:e}),n.current=!1},r=window.setTimeout((()=>{document.addEventListener("pointerdown",e)}),0);return()=>{window.clearTimeout(r),document.removeEventListener("pointerdown",e)}}),[t]),{onPointerDownCapture:()=>n.current=!0}}(),M=function(e){const t=c((e=>{const t=e.target;[...d.branches].some((e=>e.contains(t)))||(null==s||s(e),null==a||a(e),e.defaultPrevented||null==l||l())})),n=r.useRef(!1);return r.useEffect((()=>{const e=e=>{e.target&&!n.current&&Se("dismissableLayer.focusOutside",t,{originalEvent:e})};return document.addEventListener("focusin",e),()=>document.removeEventListener("focusin",e)}),[t]),{onFocusCapture:()=>n.current=!0,onBlurCapture:()=>n.current=!1}}();return function(e){const t=c(e);r.useEffect((()=>{const e=e=>{"Escape"===e.key&&t(e)};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)}),[t])}((e=>{E===d.layers.size-1&&(null==o||o(e),e.defaultPrevented||null==l||l())})),function({disabled:e}){const t=r.useRef(!1);D((()=>{if(e){function n(){Ee--,0===Ee&&(document.body.style.pointerEvents=we)}function r(e){t.current="mouse"!==e.pointerType}return 0===Ee&&(we=document.body.style.pointerEvents),document.body.style.pointerEvents="none",Ee++,document.addEventListener("pointerup",r),()=>{t.current?document.addEventListener("click",n,{once:!0}):n(),document.removeEventListener("pointerup",r)}}}),[e])}({disabled:n}),r.useEffect((()=>{f&&(n&&d.layersWithOutsidePointerEventsDisabled.add(f),d.layers.add(f),Ae())}),[f,n,d]),r.useEffect((()=>()=>{f&&(d.layers.delete(f),d.layersWithOutsidePointerEventsDisabled.delete(f),Ae())}),[f,d]),r.useEffect((()=>{const e=()=>g({});return document.addEventListener("dismissableLayer.update",e),()=>document.removeEventListener("dismissableLayer.update",e)}),[]),r.createElement(b.div,(0,h.Z)({},u,{ref:y,style:{pointerEvents:x?k?"auto":"none":void 0,...e.style},onFocusCapture:A(e.onFocusCapture,M.onFocusCapture),onBlurCapture:A(e.onBlurCapture,M.onBlurCapture),onPointerDownCapture:A(e.onPointerDownCapture,S.onPointerDownCapture)}))}));function Ae(){const e=new Event("dismissableLayer.update");document.dispatchEvent(e)}function Se(e,t,n){const r=n.originalEvent.target,o=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n});return t&&r.addEventListener(e,t,{once:!0}),!r.dispatchEvent(o)}var Me=new WeakMap,Fe=new WeakMap,Oe={},Te=0,Be=function(e,t,n){void 0===t&&(t=function(e){return"undefined"==typeof document?null:(Array.isArray(e)?e[0]:e).ownerDocument.body}(e)),void 0===n&&(n="data-aria-hidden");var r=Array.isArray(e)?e:[e];Oe[n]||(Oe[n]=new WeakMap);var o=Oe[n],i=[],s=new Set,a=function(e){e&&!s.has(e)&&(s.add(e),a(e.parentNode))};r.forEach(a);var l=function(e){!e||r.indexOf(e)>=0||Array.prototype.forEach.call(e.children,(function(e){if(s.has(e))l(e);else{var t=e.getAttribute("aria-hidden"),r=null!==t&&"false"!==t,a=(Me.get(e)||0)+1,u=(o.get(e)||0)+1;Me.set(e,a),o.set(e,u),i.push(e),1===a&&r&&Fe.set(e,!0),1===u&&e.setAttribute(n,"true"),r||e.setAttribute("aria-hidden","true")}}))};return l(t),s.clear(),Te++,function(){i.forEach((function(e){var t=Me.get(e)-1,r=o.get(e)-1;Me.set(e,t),o.set(e,r),t||(Fe.has(e)||e.removeAttribute("aria-hidden"),Fe.delete(e)),r||e.removeAttribute(n)})),--Te||(Me=new WeakMap,Me=new WeakMap,Fe=new WeakMap,Oe={})}};var Ne=function(){return Ne=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Ne.apply(this,arguments)};function Re(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}Object.create;Object.create;var Ie="right-scroll-bar-position",Pe="width-before-scroll-bar";function Le(e,t){return n=t||null,o=function(t){return e.forEach((function(e){return function(e,t){return"function"==typeof e?e(t):e&&(e.current=t),e}(e,t)}))},(i=(0,r.useState)((function(){return{value:n,callback:o,facade:{get current(){return i.value},set current(e){var t=i.value;t!==e&&(i.value=e,i.callback(e,t))}}}}))[0]).callback=o,i.facade;var n,o,i}function ze(e){return e}function $e(e,t){void 0===t&&(t=ze);var n=[],r=!1,o={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(e){var o=t(e,r);return n.push(o),function(){n=n.filter((function(e){return e!==o}))}},assignSyncMedium:function(e){for(r=!0;n.length;){var t=n;n=[],t.forEach(e)}n={push:function(t){return e(t)},filter:function(){return n}}},assignMedium:function(e){r=!0;var t=[];if(n.length){var o=n;n=[],o.forEach(e),t=n}var i=function(){var n=t;t=[],n.forEach(e)},s=function(){return Promise.resolve().then(i)};s(),n={push:function(e){t.push(e),s()},filter:function(e){return t=t.filter(e),n}}}};return o}var je=function(e){void 0===e&&(e={});var t=$e(null);return t.options=Ne({async:!0,ssr:!1},e),t}(),_e=function(){},He=r.forwardRef((function(e,t){var n=r.useRef(null),o=r.useState({onScrollCapture:_e,onWheelCapture:_e,onTouchMoveCapture:_e}),i=o[0],s=o[1],a=e.forwardProps,l=e.children,u=e.className,c=e.removeScrollBar,d=e.enabled,p=e.shards,h=e.sideCar,f=e.noIsolation,m=e.inert,g=e.allowPinchZoom,y=e.as,v=void 0===y?"div":y,b=Re(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as"]),D=h,C=Le([n,t]),w=Ne(Ne({},b),i);return r.createElement(r.Fragment,null,d&&r.createElement(D,{sideCar:je,removeScrollBar:c,shards:p,noIsolation:f,inert:m,setCallbacks:s,allowPinchZoom:!!g,lockRef:n}),a?r.cloneElement(r.Children.only(l),Ne(Ne({},w),{ref:C})):r.createElement(v,Ne({},w,{className:u,ref:C}),l))}));He.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1},He.classNames={fullWidth:Pe,zeroRight:Ie};var Ke,Ve=function(e){var t=e.sideCar,n=Re(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var o=t.read();if(!o)throw new Error("Sidecar medium not found");return r.createElement(o,Ne({},n))};Ve.isSideCarExport=!0;function qe(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=Ke||n.nc;return t&&e.setAttribute("nonce",t),e}var We=function(){var e=0,t=null;return{add:function(n){var r,o;0==e&&(t=qe())&&(o=n,(r=t).styleSheet?r.styleSheet.cssText=o:r.appendChild(document.createTextNode(o)),function(e){(document.head||document.getElementsByTagName("head")[0]).appendChild(e)}(t)),e++},remove:function(){!--e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},Ue=function(){var e,t=(e=We(),function(t,n){r.useEffect((function(){return e.add(t),function(){e.remove()}}),[t&&n])});return function(e){var n=e.styles,r=e.dynamic;return t(n,r),null}},Ze={left:0,top:0,right:0,gap:0},Je=function(e){return parseInt(e||"",10)||0},Ge=function(e){if(void 0===e&&(e="margin"),"undefined"==typeof window)return Ze;var t=function(e){var t=window.getComputedStyle(document.body),n=t["padding"===e?"paddingLeft":"marginLeft"],r=t["padding"===e?"paddingTop":"marginTop"],o=t["padding"===e?"paddingRight":"marginRight"];return[Je(n),Je(r),Je(o)]}(e),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,r-n+t[2]-t[0])}},Ye=Ue(),Xe=function(e,t,n,r){var o=e.left,i=e.top,s=e.right,a=e.gap;return void 0===n&&(n="margin"),"\n  .".concat("with-scroll-bars-hidden"," {\n   overflow: hidden ").concat(r,";\n   padding-right: ").concat(a,"px ").concat(r,";\n  }\n  body {\n    overflow: hidden ").concat(r,";\n    overscroll-behavior: contain;\n    ").concat([t&&"position: relative ".concat(r,";"),"margin"===n&&"\n    padding-left: ".concat(o,"px;\n    padding-top: ").concat(i,"px;\n    padding-right: ").concat(s,"px;\n    margin-left:0;\n    margin-top:0;\n    margin-right: ").concat(a,"px ").concat(r,";\n    "),"padding"===n&&"padding-right: ".concat(a,"px ").concat(r,";")].filter(Boolean).join(""),"\n  }\n  \n  .").concat(Ie," {\n    right: ").concat(a,"px ").concat(r,";\n  }\n  \n  .").concat(Pe," {\n    margin-right: ").concat(a,"px ").concat(r,";\n  }\n  \n  .").concat(Ie," .").concat(Ie," {\n    right: 0 ").concat(r,";\n  }\n  \n  .").concat(Pe," .").concat(Pe," {\n    margin-right: 0 ").concat(r,";\n  }\n  \n  body {\n    ").concat("--removed-body-scroll-bar-size",": ").concat(a,"px;\n  }\n")},Qe=function(e){var t=e.noRelative,n=e.noImportant,o=e.gapMode,i=void 0===o?"margin":o,s=r.useMemo((function(){return Ge(i)}),[i]);return r.createElement(Ye,{styles:Xe(s,!t,i,n?"":"!important")})},et=!1;if("undefined"!=typeof window)try{var tt=Object.defineProperty({},"passive",{get:function(){return et=!0,!0}});window.addEventListener("test",tt,tt),window.removeEventListener("test",tt,tt)}catch(Qy){et=!1}var nt=!!et&&{passive:!1},rt=function(e,t){var n=window.getComputedStyle(e);return"hidden"!==n[t]&&!(n.overflowY===n.overflowX&&!function(e){return"TEXTAREA"===e.tagName}(e)&&"visible"===n[t])},ot=function(e,t){var n=t;do{if("undefined"!=typeof ShadowRoot&&n instanceof ShadowRoot&&(n=n.host),it(e,n)){var r=st(e,n);if(r[1]>r[2])return!0}n=n.parentNode}while(n&&n!==document.body);return!1},it=function(e,t){return"v"===e?function(e){return rt(e,"overflowY")}(t):function(e){return rt(e,"overflowX")}(t)},st=function(e,t){return"v"===e?[(n=t).scrollTop,n.scrollHeight,n.clientHeight]:function(e){return[e.scrollLeft,e.scrollWidth,e.clientWidth]}(t);var n},at=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},lt=function(e){return[e.deltaX,e.deltaY]},ut=function(e){return e&&"current"in e?e.current:e},ct=function(e){return"\n  .block-interactivity-".concat(e," {pointer-events: none;}\n  .allow-interactivity-").concat(e," {pointer-events: all;}\n")},dt=0,pt=[];var ht,ft=(ht=function(e){var t=r.useRef([]),n=r.useRef([0,0]),o=r.useRef(),i=r.useState(dt++)[0],s=r.useState((function(){return Ue()}))[0],a=r.useRef(e);r.useEffect((function(){a.current=e}),[e]),r.useEffect((function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(i));var t=function(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))}([e.lockRef.current],(e.shards||[]).map(ut),!0).filter(Boolean);return t.forEach((function(e){return e.classList.add("allow-interactivity-".concat(i))})),function(){document.body.classList.remove("block-interactivity-".concat(i)),t.forEach((function(e){return e.classList.remove("allow-interactivity-".concat(i))}))}}}),[e.inert,e.lockRef.current,e.shards]);var l=r.useCallback((function(e,t){if("touches"in e&&2===e.touches.length)return!a.current.allowPinchZoom;var r,i=at(e),s=n.current,l="deltaX"in e?e.deltaX:s[0]-i[0],u="deltaY"in e?e.deltaY:s[1]-i[1],c=e.target,d=Math.abs(l)>Math.abs(u)?"h":"v";if("touches"in e&&"h"===d&&"range"===c.type)return!1;var p=ot(d,c);if(!p)return!0;if(p?r=d:(r="v"===d?"h":"v",p=ot(d,c)),!p)return!1;if(!o.current&&"changedTouches"in e&&(l||u)&&(o.current=r),!r)return!0;var h=o.current||r;return function(e,t,n,r,o){var i=function(e,t){return"h"===e&&"rtl"===t?-1:1}(e,window.getComputedStyle(t).direction),s=i*r,a=n.target,l=t.contains(a),u=!1,c=s>0,d=0,p=0;do{var h=st(e,a),f=h[0],m=h[1]-h[2]-i*f;(f||m)&&it(e,a)&&(d+=m,p+=f),a=a.parentNode}while(!l&&a!==document.body||l&&(t.contains(a)||t===a));return(c&&(o&&0===d||!o&&s>d)||!c&&(o&&0===p||!o&&-s>p))&&(u=!0),u}(h,t,e,"h"===h?l:u,!0)}),[]),u=r.useCallback((function(e){var n=e;if(pt.length&&pt[pt.length-1]===s){var r="deltaY"in n?lt(n):at(n),o=t.current.filter((function(e){return e.name===n.type&&e.target===n.target&&function(e,t){return e[0]===t[0]&&e[1]===t[1]}(e.delta,r)}))[0];if(o&&o.should)n.cancelable&&n.preventDefault();else if(!o){var i=(a.current.shards||[]).map(ut).filter(Boolean).filter((function(e){return e.contains(n.target)}));(i.length>0?l(n,i[0]):!a.current.noIsolation)&&n.cancelable&&n.preventDefault()}}}),[]),c=r.useCallback((function(e,n,r,o){var i={name:e,delta:n,target:r,should:o};t.current.push(i),setTimeout((function(){t.current=t.current.filter((function(e){return e!==i}))}),1)}),[]),d=r.useCallback((function(e){n.current=at(e),o.current=void 0}),[]),p=r.useCallback((function(t){c(t.type,lt(t),t.target,l(t,e.lockRef.current))}),[]),h=r.useCallback((function(t){c(t.type,at(t),t.target,l(t,e.lockRef.current))}),[]);r.useEffect((function(){return pt.push(s),e.setCallbacks({onScrollCapture:p,onWheelCapture:p,onTouchMoveCapture:h}),document.addEventListener("wheel",u,nt),document.addEventListener("touchmove",u,nt),document.addEventListener("touchstart",d,nt),function(){pt=pt.filter((function(e){return e!==s})),document.removeEventListener("wheel",u,nt),document.removeEventListener("touchmove",u,nt),document.removeEventListener("touchstart",d,nt)}}),[]);var f=e.removeScrollBar,m=e.inert;return r.createElement(r.Fragment,null,m?r.createElement(s,{styles:ct(i)}):null,f?r.createElement(Qe,{gapMode:"margin"}):null)},je.useMedium(ht),Ve),mt=r.forwardRef((function(e,t){return r.createElement(He,Ne({},e,{ref:t,sideCar:ft}))}));mt.classNames=He.classNames;var gt=mt;const yt=["Enter"," "],vt=["ArrowUp","PageDown","End"],bt=["ArrowDown","PageUp","Home",...vt],Dt={ltr:["ArrowLeft"],rtl:["ArrowRight"]},[Ct,wt,Et]=k("Menu"),[xt,kt]=E("Menu",[Et,ie,B]),At=ie(),St=B(),[Mt,Ft]=xt("Menu"),[Ot,Tt]=xt("MenuContent"),Bt=r.forwardRef(((e,t)=>{const{forceMount:n,...o}=e,i=Ft("MenuContent",e.__scopeMenu);return r.createElement(Ct.Provider,{scope:e.__scopeMenu},r.createElement(pe,{present:n||i.open},r.createElement(Ct.Slot,{scope:e.__scopeMenu},i.isSubmenu?r.createElement(Pt,(0,h.Z)({},o,{ref:t})):r.createElement(Nt,(0,h.Z)({},o,{ref:t})))))})),Nt=r.forwardRef(((e,t)=>Ft("MenuContent",e.__scopeMenu).modal?r.createElement(Rt,(0,h.Z)({},e,{ref:t})):r.createElement(It,(0,h.Z)({},e,{ref:t})))),Rt=r.forwardRef(((e,t)=>{const n=Ft("MenuContent",e.__scopeMenu),o=r.useRef(null),i=p(t,o);return r.useEffect((()=>{const e=o.current;if(e)return Be(e)}),[]),r.createElement(Lt,(0,h.Z)({},e,{ref:i,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:A(e.onFocusOutside,(e=>e.preventDefault()),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)}))})),It=r.forwardRef(((e,t)=>{const n=Ft("MenuContent",e.__scopeMenu);return r.createElement(Lt,(0,h.Z)({},e,{ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)}))})),Pt=r.forwardRef(((e,t)=>{const n=Ft("MenuContent",e.__scopeMenu),o=r.useRef(null),i=p(t,o);return n.isSubmenu?r.createElement(Lt,(0,h.Z)({id:n.contentId,"aria-labelledby":n.triggerId},e,{ref:i,align:"start",side:"rtl"===n.dir?"left":"right",portalled:!0,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:e=>{var t;n.isUsingKeyboardRef.current&&(null===(t=o.current)||void 0===t||t.focus()),e.preventDefault()},onCloseAutoFocus:e=>e.preventDefault(),onFocusOutside:A(e.onFocusOutside,(e=>{e.target!==n.trigger&&n.onOpenChange(!1)})),onEscapeKeyDown:A(e.onEscapeKeyDown,n.onRootClose),onKeyDown:A(e.onKeyDown,(e=>{const t=e.currentTarget.contains(e.target),r=Dt[n.dir].includes(e.key);var o;t&&r&&(n.onOpenChange(!1),null===(o=n.trigger)||void 0===o||o.focus(),e.preventDefault())}))})):null})),Lt=r.forwardRef(((e,t)=>{const{__scopeMenu:n,loop:o=!1,trapFocus:i,onOpenAutoFocus:s,onCloseAutoFocus:a,disableOutsidePointerEvents:u,onEscapeKeyDown:c,onPointerDownOutside:d,onFocusOutside:f,onInteractOutside:m,onDismiss:g,disableOutsideScroll:y,allowPinchZoom:v,portalled:b,...D}=e,C=Ft("MenuContent",n),w=At(n),E=St(n),x=wt(n),[k,S]=r.useState(null),M=r.useRef(null),F=p(t,M,C.onContentChange),O=r.useRef(0),T=r.useRef(""),B=r.useRef(0),N=r.useRef(null),R=r.useRef("right"),I=r.useRef(0),P=b?K:r.Fragment,L=y?gt:r.Fragment,z=y?{allowPinchZoom:v}:void 0;r.useEffect((()=>()=>window.clearTimeout(O.current)),[]),l();const $=r.useCallback((e=>{var t,n;return R.current===(null===(t=N.current)||void 0===t?void 0:t.side)&&function(e,t){return!!t&&function(e,t){const{x:n,y:r}=e;let o=!1;for(let i=0,s=t.length-1;i<t.length;s=i++){const e=t[i].x,a=t[i].y,l=t[s].x,u=t[s].y;a>r!=u>r&&n<(l-e)*(r-a)/(u-a)+e&&(o=!o)}return o}({x:e.clientX,y:e.clientY},t)}(e,null===(n=N.current)||void 0===n?void 0:n.area)}),[]);return r.createElement(P,null,r.createElement(L,z,r.createElement(Ot,{scope:n,searchRef:T,onItemEnter:r.useCallback((e=>{$(e)&&e.preventDefault()}),[$]),onItemLeave:r.useCallback((e=>{var t;$(e)||(null===(t=M.current)||void 0===t||t.focus(),S(null))}),[$]),onTriggerLeave:r.useCallback((e=>{$(e)&&e.preventDefault()}),[$]),pointerGraceTimerRef:B,onPointerGraceIntentChange:r.useCallback((e=>{N.current=e}),[])},r.createElement(me,{asChild:!0,trapped:i,onMountAutoFocus:A(s,(e=>{var t;e.preventDefault(),null===(t=M.current)||void 0===t||t.focus()})),onUnmountAutoFocus:a},r.createElement(ke,{asChild:!0,disableOutsidePointerEvents:u,onEscapeKeyDown:c,onPointerDownOutside:d,onFocusOutside:f,onInteractOutside:m,onDismiss:g},r.createElement(j,(0,h.Z)({asChild:!0},E,{dir:C.dir,orientation:"vertical",loop:o,currentTabStopId:k,onCurrentTabStopIdChange:S,onEntryFocus:e=>{C.isUsingKeyboardRef.current||e.preventDefault()}}),r.createElement(de,(0,h.Z)({role:"menu","aria-orientation":"vertical","data-state":Vt(C.open),dir:C.dir},w,D,{ref:F,style:{outline:"none",...D.style},onKeyDown:A(D.onKeyDown,(e=>{const t=e.target,n=e.currentTarget.contains(t),r=e.ctrlKey||e.altKey||e.metaKey,o=1===e.key.length;n&&("Tab"===e.key&&e.preventDefault(),!r&&o&&(e=>{var t,n;const r=T.current+e,o=x().filter((e=>!e.disabled)),i=document.activeElement,s=null===(t=o.find((e=>e.ref.current===i)))||void 0===t?void 0:t.textValue,a=function(e,t,n){const r=t.length>1&&Array.from(t).every((e=>e===t[0]))?t[0]:t,o=n?e.indexOf(n):-1;let i=(s=e,a=Math.max(o,0),s.map(((e,t)=>s[(a+t)%s.length])));var s,a;1===r.length&&(i=i.filter((e=>e!==n)));const l=i.find((e=>e.toLowerCase().startsWith(r.toLowerCase())));return l!==n?l:void 0}(o.map((e=>e.textValue)),r,s),l=null===(n=o.find((e=>e.textValue===a)))||void 0===n?void 0:n.ref.current;!function e(t){T.current=t,window.clearTimeout(O.current),""!==t&&(O.current=window.setTimeout((()=>e("")),1e3))}(r),l&&setTimeout((()=>l.focus()))})(e.key));const i=M.current;if(e.target!==i)return;if(!bt.includes(e.key))return;e.preventDefault();const s=x().filter((e=>!e.disabled)).map((e=>e.ref.current));vt.includes(e.key)&&s.reverse(),function(e){const t=document.activeElement;for(const n of e){if(n===t)return;if(n.focus(),document.activeElement!==t)return}}(s)})),onBlur:A(e.onBlur,(e=>{e.currentTarget.contains(e.target)||(window.clearTimeout(O.current),T.current="")})),onPointerMove:A(e.onPointerMove,qt((e=>{const t=e.target,n=I.current!==e.clientX;if(e.currentTarget.contains(t)&&n){const t=e.clientX>I.current?"right":"left";R.current=t,I.current=e.clientX}})))}))))))))})),zt=r.forwardRef(((e,t)=>{const{disabled:n=!1,onSelect:o,...i}=e,s=r.useRef(null),a=Ft("MenuItem",e.__scopeMenu),l=Tt("MenuItem",e.__scopeMenu),u=p(t,s),c=r.useRef(!1);return r.createElement($t,(0,h.Z)({},i,{ref:u,disabled:n,onClick:A(e.onClick,(()=>{const e=s.current;if(!n&&e){const t=new Event("menu.itemSelect",{bubbles:!0,cancelable:!0});e.addEventListener("menu.itemSelect",(e=>null==o?void 0:o(e)),{once:!0}),e.dispatchEvent(t),t.defaultPrevented?c.current=!1:a.onRootClose()}})),onPointerDown:t=>{var n;null===(n=e.onPointerDown)||void 0===n||n.call(e,t),c.current=!0},onPointerUp:A(e.onPointerUp,(e=>{var t;c.current||null===(t=e.currentTarget)||void 0===t||t.click()})),onKeyDown:A(e.onKeyDown,(e=>{const t=""!==l.searchRef.current;n||t&&" "===e.key||yt.includes(e.key)&&(e.currentTarget.click(),e.preventDefault())}))}))})),$t=r.forwardRef(((e,t)=>{const{__scopeMenu:n,disabled:o=!1,textValue:i,...s}=e,a=Tt("MenuItem",n),l=St(n),u=r.useRef(null),c=p(t,u),[d,f]=r.useState("");return r.useEffect((()=>{const e=u.current;var t;e&&f((null!==(t=e.textContent)&&void 0!==t?t:"").trim())}),[s.children]),r.createElement(Ct.ItemSlot,{scope:n,disabled:o,textValue:null!=i?i:d},r.createElement(_,(0,h.Z)({asChild:!0},l,{focusable:!o}),r.createElement(b.div,(0,h.Z)({role:"menuitem","aria-disabled":o||void 0,"data-disabled":o?"":void 0},s,{ref:c,onPointerMove:A(e.onPointerMove,qt((e=>{o?a.onItemLeave(e):(a.onItemEnter(e),e.defaultPrevented||e.currentTarget.focus())}))),onPointerLeave:A(e.onPointerLeave,qt((e=>a.onItemLeave(e))))}))))})),[jt,_t]=xt("MenuRadioGroup",{value:void 0,onValueChange:()=>{}}),[Ht,Kt]=xt("MenuItemIndicator",{checked:!1});function Vt(e){return e?"open":"closed"}function qt(e){return t=>"mouse"===t.pointerType?e(t):void 0}const Wt=Bt,Ut=zt,[Zt,Jt]=E("DropdownMenu",[kt]),Gt=kt(),[Yt,Xt]=Zt("DropdownMenu"),[Qt,en]=Zt("DropdownMenuContent",{isInsideContent:!1}),tn=r.forwardRef(((e,t)=>{const{__scopeDropdownMenu:n,...o}=e,i=Xt("DropdownMenuContent",n),s=Gt(n),a={...o,style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)"}};return r.createElement(Qt,{scope:n,isInsideContent:!0},i.isRootMenu?r.createElement(nn,(0,h.Z)({__scopeDropdownMenu:n},a,{ref:t})):r.createElement(Wt,(0,h.Z)({},s,a,{ref:t})))})),nn=r.forwardRef(((e,t)=>{const{__scopeDropdownMenu:n,portalled:o=!0,...i}=e,s=Xt("DropdownMenuContent",n),a=Gt(n),l=r.useRef(!1);return s.isRootMenu?r.createElement(Wt,(0,h.Z)({id:s.contentId,"aria-labelledby":s.triggerId},a,i,{ref:t,portalled:o,onCloseAutoFocus:A(e.onCloseAutoFocus,(e=>{var t;l.current||null===(t=s.triggerRef.current)||void 0===t||t.focus(),l.current=!1,e.preventDefault()})),onInteractOutside:A(e.onInteractOutside,(e=>{const t=e.detail.originalEvent,n=0===t.button&&!0===t.ctrlKey,r=2===t.button||n;s.modal&&!r||(l.current=!0)}))})):null})),rn=tn,on=r.forwardRef(((e,t)=>{const{__scopeDropdownMenu:n,...o}=e,i=Gt(n);return r.createElement(Ut,(0,h.Z)({},i,o,{ref:t}))})),[sn,an]=E("Dialog"),[ln,un]=sn("Dialog"),cn=r.forwardRef(((e,t)=>{const{forceMount:n,...o}=e,i=un("DialogContent",e.__scopeDialog);return r.createElement(pe,{present:n||i.open},i.modal?r.createElement(dn,(0,h.Z)({},o,{ref:t})):r.createElement(pn,(0,h.Z)({},o,{ref:t})))})),dn=r.forwardRef(((e,t)=>{const n=un("DialogContent",e.__scopeDialog),o=r.useRef(null),i=p(t,n.contentRef,o);return r.useEffect((()=>{const e=o.current;if(e)return Be(e)}),[]),r.createElement(hn,(0,h.Z)({},e,{ref:i,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:A(e.onCloseAutoFocus,(e=>{var t;e.preventDefault(),null===(t=n.triggerRef.current)||void 0===t||t.focus()})),onPointerDownOutside:A(e.onPointerDownOutside,(e=>{const t=e.detail.originalEvent,n=0===t.button&&!0===t.ctrlKey;(2===t.button||n)&&e.preventDefault()})),onFocusOutside:A(e.onFocusOutside,(e=>e.preventDefault()))}))})),pn=r.forwardRef(((e,t)=>{const n=un("DialogContent",e.__scopeDialog),o=r.useRef(!1);return r.createElement(hn,(0,h.Z)({},e,{ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:t=>{var r,i;null===(r=e.onCloseAutoFocus)||void 0===r||r.call(e,t),t.defaultPrevented||(o.current||null===(i=n.triggerRef.current)||void 0===i||i.focus(),t.preventDefault()),o.current=!1},onInteractOutside:t=>{var r,i;null===(r=e.onInteractOutside)||void 0===r||r.call(e,t),t.defaultPrevented||(o.current=!0);const s=t.target;(null===(i=n.triggerRef.current)||void 0===i?void 0:i.contains(s))&&t.preventDefault()}}))})),hn=r.forwardRef(((e,t)=>{const{__scopeDialog:n,trapFocus:o,onOpenAutoFocus:i,onCloseAutoFocus:s,...a}=e,u=un("DialogContent",n),c=p(t,r.useRef(null));return l(),r.createElement(r.Fragment,null,r.createElement(me,{asChild:!0,loop:!0,trapped:o,onMountAutoFocus:i,onUnmountAutoFocus:s},r.createElement(ke,(0,h.Z)({role:"dialog",id:u.contentId,"aria-describedby":u.descriptionId,"aria-labelledby":u.titleId,"data-state":gn(u.open)},a,{ref:c,onDismiss:()=>u.onOpenChange(!1)}))),!1)})),fn=r.forwardRef(((e,t)=>{const{__scopeDialog:n,...o}=e,i=un("DialogTitle",n);return r.createElement(b.h2,(0,h.Z)({id:i.titleId},o,{ref:t}))})),mn=r.forwardRef(((e,t)=>{const{__scopeDialog:n,...o}=e,i=un("DialogClose",n);return r.createElement(b.button,(0,h.Z)({type:"button"},o,{ref:t,onClick:A(e.onClick,(()=>i.onOpenChange(!1)))}))}));function gn(e){return e?"open":"closed"}const[yn,vn]=function(e,t){const n=r.createContext(t);function o(e){const{children:t,...o}=e,i=r.useMemo((()=>o),Object.values(o));return r.createElement(n.Provider,{value:i},t)}return o.displayName=e+"Provider",[o,function(o){const i=r.useContext(n);if(i)return i;if(void 0!==t)return t;throw new Error(`\`${o}\` must be used within \`${e}\``)}]}("DialogTitleWarning",{contentName:"DialogContent",titleName:"DialogTitle",docsSlug:"dialog"}),bn=cn,Dn=fn,Cn=mn,[wn,En]=E("Popover",[ie]),xn=ie(),[kn,An]=wn("Popover"),Sn=r.forwardRef(((e,t)=>{const{forceMount:n,...o}=e,i=An("PopoverContent",e.__scopePopover);return r.createElement(pe,{present:n||i.open},i.modal?r.createElement(Mn,(0,h.Z)({},o,{ref:t})):r.createElement(Fn,(0,h.Z)({},o,{ref:t})))})),Mn=r.forwardRef(((e,t)=>{const{allowPinchZoom:n,portalled:o=!0,...i}=e,s=An("PopoverContent",e.__scopePopover),a=r.useRef(null),l=p(t,a),u=r.useRef(!1);r.useEffect((()=>{const e=a.current;if(e)return Be(e)}),[]);const c=o?K:r.Fragment;return r.createElement(c,null,r.createElement(gt,{allowPinchZoom:n},r.createElement(On,(0,h.Z)({},i,{ref:l,trapFocus:s.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:A(e.onCloseAutoFocus,(e=>{var t;e.preventDefault(),u.current||null===(t=s.triggerRef.current)||void 0===t||t.focus()})),onPointerDownOutside:A(e.onPointerDownOutside,(e=>{const t=e.detail.originalEvent,n=0===t.button&&!0===t.ctrlKey,r=2===t.button||n;u.current=r}),{checkForDefaultPrevented:!1}),onFocusOutside:A(e.onFocusOutside,(e=>e.preventDefault()),{checkForDefaultPrevented:!1})}))))})),Fn=r.forwardRef(((e,t)=>{const{portalled:n=!0,...o}=e,i=An("PopoverContent",e.__scopePopover),s=r.useRef(!1),a=n?K:r.Fragment;return r.createElement(a,null,r.createElement(On,(0,h.Z)({},o,{ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:t=>{var n,r;null===(n=e.onCloseAutoFocus)||void 0===n||n.call(e,t),t.defaultPrevented||(s.current||null===(r=i.triggerRef.current)||void 0===r||r.focus(),t.preventDefault()),s.current=!1},onInteractOutside:t=>{var n,r;null===(n=e.onInteractOutside)||void 0===n||n.call(e,t),t.defaultPrevented||(s.current=!0);const o=t.target;(null===(r=i.triggerRef.current)||void 0===r?void 0:r.contains(o))&&t.preventDefault()}})))})),On=r.forwardRef(((e,t)=>{const{__scopePopover:n,trapFocus:o,onOpenAutoFocus:i,onCloseAutoFocus:s,disableOutsidePointerEvents:a,onEscapeKeyDown:u,onPointerDownOutside:c,onFocusOutside:d,onInteractOutside:p,...f}=e,m=An("PopoverContent",n),g=xn(n);return l(),r.createElement(me,{asChild:!0,loop:!0,trapped:o,onMountAutoFocus:i,onUnmountAutoFocus:s},r.createElement(ke,{asChild:!0,disableOutsidePointerEvents:a,onInteractOutside:p,onEscapeKeyDown:u,onPointerDownOutside:c,onFocusOutside:d,onDismiss:()=>m.onOpenChange(!1)},r.createElement(de,(0,h.Z)({"data-state":Tn(m.open),role:"dialog",id:m.contentId},g,f,{ref:t,style:{...f.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)"}}))))}));function Tn(e){return e?"open":"closed"}const Bn=Sn;const Nn=({renderers:e})=>r.createElement(r.Fragment,null,Array.from(e).map((([e,t])=>H.createPortal(t.reactElement,t.element,e))));class Rn extends r.Component{constructor(e){super(e),this.editorContentRef=r.createRef(),this.state={renderers:new Map}}componentDidMount(){this.init()}componentDidUpdate(){this.init()}init(){const{editor:e}=this.props;if(e&&e.options.element){if(e.contentComponent)return;const t=this.editorContentRef.current;t.append(...e.options.element.childNodes),e.setOptions({element:t}),e.contentComponent=this,e.createNodeViews()}}componentWillUnmount(){const{editor:e}=this.props;if(!e)return;if(e.isDestroyed||e.view.setProps({nodeViews:{}}),e.contentComponent=null,!e.options.element.firstChild)return;const t=document.createElement("div");t.append(...e.options.element.childNodes),e.setOptions({element:t})}render(){const{editor:e,...t}=this.props;return r.createElement(r.Fragment,null,r.createElement("div",{ref:this.editorContentRef,...t}),r.createElement(Nn,{renderers:this.state.renderers}))}}const In=r.memo(Rn),Pn=(0,r.createContext)({onDragStart:void 0}),Ln=()=>(0,r.useContext)(Pn);r.forwardRef(((e,t)=>{const{onDragStart:n}=Ln(),o=e.as||"div";return r.createElement(o,{...e,ref:t,"data-node-view-wrapper":"",onDragStart:n,style:{whiteSpace:"normal",...e.style}})}));function zn(e,t,n){for(let r=0;;r++){if(r==e.childCount||r==t.childCount)return e.childCount==t.childCount?null:n;let o=e.child(r),i=t.child(r);if(o!=i){if(!o.sameMarkup(i))return n;if(o.isText&&o.text!=i.text){for(let e=0;o.text[e]==i.text[e];e++)n++;return n}if(o.content.size||i.content.size){let e=zn(o.content,i.content,n+1);if(null!=e)return e}n+=o.nodeSize}else n+=o.nodeSize}}function $n(e,t,n,r){for(let o=e.childCount,i=t.childCount;;){if(0==o||0==i)return o==i?null:{a:n,b:r};let s=e.child(--o),a=t.child(--i),l=s.nodeSize;if(s!=a){if(!s.sameMarkup(a))return{a:n,b:r};if(s.isText&&s.text!=a.text){let e=0,t=Math.min(s.text.length,a.text.length);for(;e<t&&s.text[s.text.length-e-1]==a.text[a.text.length-e-1];)e++,n--,r--;return{a:n,b:r}}if(s.content.size||a.content.size){let e=$n(s.content,a.content,n-1,r-1);if(e)return e}n-=l,r-=l}else n-=l,r-=l}}class jn{constructor(e,t){if(this.content=e,this.size=t||0,null==t)for(let n=0;n<e.length;n++)this.size+=e[n].nodeSize}nodesBetween(e,t,n,r=0,o){for(let i=0,s=0;s<t;i++){let a=this.content[i],l=s+a.nodeSize;if(l>e&&!1!==n(a,r+s,o||null,i)&&a.content.size){let o=s+1;a.nodesBetween(Math.max(0,e-o),Math.min(a.content.size,t-o),n,r+o)}s=l}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,t,n,r){let o="",i=!0;return this.nodesBetween(e,t,((s,a)=>{s.isText?(o+=s.text.slice(Math.max(e,a)-a,t-a),i=!n):s.isLeaf?(r?o+="function"==typeof r?r(s):r:s.type.spec.leafText&&(o+=s.type.spec.leafText(s)),i=!n):!i&&s.isBlock&&(o+=n,i=!0)}),0),o}append(e){if(!e.size)return this;if(!this.size)return e;let t=this.lastChild,n=e.firstChild,r=this.content.slice(),o=0;for(t.isText&&t.sameMarkup(n)&&(r[r.length-1]=t.withText(t.text+n.text),o=1);o<e.content.length;o++)r.push(e.content[o]);return new jn(r,this.size+e.size)}cut(e,t=this.size){if(0==e&&t==this.size)return this;let n=[],r=0;if(t>e)for(let o=0,i=0;i<t;o++){let s=this.content[o],a=i+s.nodeSize;a>e&&((i<e||a>t)&&(s=s.isText?s.cut(Math.max(0,e-i),Math.min(s.text.length,t-i)):s.cut(Math.max(0,e-i-1),Math.min(s.content.size,t-i-1))),n.push(s),r+=s.nodeSize),i=a}return new jn(n,r)}cutByIndex(e,t){return e==t?jn.empty:0==e&&t==this.content.length?this:new jn(this.content.slice(e,t))}replaceChild(e,t){let n=this.content[e];if(n==t)return this;let r=this.content.slice(),o=this.size+t.nodeSize-n.nodeSize;return r[e]=t,new jn(r,o)}addToStart(e){return new jn([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new jn(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let t=0;t<this.content.length;t++)if(!this.content[t].eq(e.content[t]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let t=this.content[e];if(!t)throw new RangeError("Index "+e+" out of range for "+this);return t}maybeChild(e){return this.content[e]||null}forEach(e){for(let t=0,n=0;t<this.content.length;t++){let r=this.content[t];e(r,n,t),n+=r.nodeSize}}findDiffStart(e,t=0){return zn(this,e,t)}findDiffEnd(e,t=this.size,n=e.size){return $n(this,e,t,n)}findIndex(e,t=-1){if(0==e)return Hn(0,e);if(e==this.size)return Hn(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let n=0,r=0;;n++){let o=r+this.child(n).nodeSize;if(o>=e)return o==e||t>0?Hn(n+1,o):Hn(n,r);r=o}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map((e=>e.toJSON())):null}static fromJSON(e,t){if(!t)return jn.empty;if(!Array.isArray(t))throw new RangeError("Invalid input for Fragment.fromJSON");return new jn(t.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return jn.empty;let t,n=0;for(let r=0;r<e.length;r++){let o=e[r];n+=o.nodeSize,r&&o.isText&&e[r-1].sameMarkup(o)?(t||(t=e.slice(0,r)),t[t.length-1]=o.withText(t[t.length-1].text+o.text)):t&&t.push(o)}return new jn(t||e,n)}static from(e){if(!e)return jn.empty;if(e instanceof jn)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new jn([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}jn.empty=new jn([],0);const _n={index:0,offset:0};function Hn(e,t){return _n.index=e,_n.offset=t,_n}function Kn(e,t){if(e===t)return!0;if(!e||"object"!=typeof e||!t||"object"!=typeof t)return!1;let n=Array.isArray(e);if(Array.isArray(t)!=n)return!1;if(n){if(e.length!=t.length)return!1;for(let n=0;n<e.length;n++)if(!Kn(e[n],t[n]))return!1}else{for(let n in e)if(!(n in t)||!Kn(e[n],t[n]))return!1;for(let n in t)if(!(n in e))return!1}return!0}class Vn{constructor(e,t){this.type=e,this.attrs=t}addToSet(e){let t,n=!1;for(let r=0;r<e.length;r++){let o=e[r];if(this.eq(o))return e;if(this.type.excludes(o.type))t||(t=e.slice(0,r));else{if(o.type.excludes(this.type))return e;!n&&o.type.rank>this.type.rank&&(t||(t=e.slice(0,r)),t.push(this),n=!0),t&&t.push(o)}}return t||(t=e.slice()),n||t.push(this),t}removeFromSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return e.slice(0,t).concat(e.slice(t+1));return e}isInSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return!0;return!1}eq(e){return this==e||this.type==e.type&&Kn(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,t){if(!t)throw new RangeError("Invalid input for Mark.fromJSON");let n=e.marks[t.type];if(!n)throw new RangeError(`There is no mark type ${t.type} in this schema`);return n.create(t.attrs)}static sameSet(e,t){if(e==t)return!0;if(e.length!=t.length)return!1;for(let n=0;n<e.length;n++)if(!e[n].eq(t[n]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&0==e.length)return Vn.none;if(e instanceof Vn)return[e];let t=e.slice();return t.sort(((e,t)=>e.type.rank-t.type.rank)),t}}Vn.none=[];class qn extends Error{}class Wn{constructor(e,t,n){this.content=e,this.openStart=t,this.openEnd=n}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,t){let n=Zn(this.content,e+this.openStart,t);return n&&new Wn(n,this.openStart,this.openEnd)}removeBetween(e,t){return new Wn(Un(this.content,e+this.openStart,t+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,t){if(!t)return Wn.empty;let n=t.openStart||0,r=t.openEnd||0;if("number"!=typeof n||"number"!=typeof r)throw new RangeError("Invalid input for Slice.fromJSON");return new Wn(jn.fromJSON(e,t.content),n,r)}static maxOpen(e,t=!0){let n=0,r=0;for(let o=e.firstChild;o&&!o.isLeaf&&(t||!o.type.spec.isolating);o=o.firstChild)n++;for(let o=e.lastChild;o&&!o.isLeaf&&(t||!o.type.spec.isolating);o=o.lastChild)r++;return new Wn(e,n,r)}}function Un(e,t,n){let{index:r,offset:o}=e.findIndex(t),i=e.maybeChild(r),{index:s,offset:a}=e.findIndex(n);if(o==t||i.isText){if(a!=n&&!e.child(s).isText)throw new RangeError("Removing non-flat range");return e.cut(0,t).append(e.cut(n))}if(r!=s)throw new RangeError("Removing non-flat range");return e.replaceChild(r,i.copy(Un(i.content,t-o-1,n-o-1)))}function Zn(e,t,n,r){let{index:o,offset:i}=e.findIndex(t),s=e.maybeChild(o);if(i==t||s.isText)return r&&!r.canReplace(o,o,n)?null:e.cut(0,t).append(n).append(e.cut(t));let a=Zn(s.content,t-i-1,n);return a&&e.replaceChild(o,s.copy(a))}function Jn(e,t,n){if(n.openStart>e.depth)throw new qn("Inserted content deeper than insertion position");if(e.depth-n.openStart!=t.depth-n.openEnd)throw new qn("Inconsistent open depths");return Gn(e,t,n,0)}function Gn(e,t,n,r){let o=e.index(r),i=e.node(r);if(o==t.index(r)&&r<e.depth-n.openStart){let s=Gn(e,t,n,r+1);return i.copy(i.content.replaceChild(o,s))}if(n.content.size){if(n.openStart||n.openEnd||e.depth!=r||t.depth!=r){let{start:o,end:s}=function(e,t){let n=t.depth-e.openStart,r=t.node(n).copy(e.content);for(let o=n-1;o>=0;o--)r=t.node(o).copy(jn.from(r));return{start:r.resolveNoCache(e.openStart+n),end:r.resolveNoCache(r.content.size-e.openEnd-n)}}(n,e);return tr(i,nr(e,o,s,t,r))}{let r=e.parent,o=r.content;return tr(r,o.cut(0,e.parentOffset).append(n.content).append(o.cut(t.parentOffset)))}}return tr(i,rr(e,t,r))}function Yn(e,t){if(!t.type.compatibleContent(e.type))throw new qn("Cannot join "+t.type.name+" onto "+e.type.name)}function Xn(e,t,n){let r=e.node(n);return Yn(r,t.node(n)),r}function Qn(e,t){let n=t.length-1;n>=0&&e.isText&&e.sameMarkup(t[n])?t[n]=e.withText(t[n].text+e.text):t.push(e)}function er(e,t,n,r){let o=(t||e).node(n),i=0,s=t?t.index(n):o.childCount;e&&(i=e.index(n),e.depth>n?i++:e.textOffset&&(Qn(e.nodeAfter,r),i++));for(let a=i;a<s;a++)Qn(o.child(a),r);t&&t.depth==n&&t.textOffset&&Qn(t.nodeBefore,r)}function tr(e,t){if(!e.type.validContent(t))throw new qn("Invalid content for node "+e.type.name);return e.copy(t)}function nr(e,t,n,r,o){let i=e.depth>o&&Xn(e,t,o+1),s=r.depth>o&&Xn(n,r,o+1),a=[];return er(null,e,o,a),i&&s&&t.index(o)==n.index(o)?(Yn(i,s),Qn(tr(i,nr(e,t,n,r,o+1)),a)):(i&&Qn(tr(i,rr(e,t,o+1)),a),er(t,n,o,a),s&&Qn(tr(s,rr(n,r,o+1)),a)),er(r,null,o,a),new jn(a)}function rr(e,t,n){let r=[];if(er(null,e,n,r),e.depth>n){Qn(tr(Xn(e,t,n+1),rr(e,t,n+1)),r)}return er(t,null,n,r),new jn(r)}Wn.empty=new Wn(jn.empty,0,0);class or{constructor(e,t,n){this.pos=e,this.path=t,this.parentOffset=n,this.depth=t.length/3-1}resolveDepth(e){return null==e?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[3*this.resolveDepth(e)]}index(e){return this.path[3*this.resolveDepth(e)+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e!=this.depth||this.textOffset?1:0)}start(e){return 0==(e=this.resolveDepth(e))?0:this.path[3*e-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(!(e=this.resolveDepth(e)))throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[3*e-1]}after(e){if(!(e=this.resolveDepth(e)))throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[3*e-1]+this.path[3*e].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,t=this.index(this.depth);if(t==e.childCount)return null;let n=this.pos-this.path[this.path.length-1],r=e.child(t);return n?e.child(t).cut(n):r}get nodeBefore(){let e=this.index(this.depth),t=this.pos-this.path[this.path.length-1];return t?this.parent.child(e).cut(0,t):0==e?null:this.parent.child(e-1)}posAtIndex(e,t){t=this.resolveDepth(t);let n=this.path[3*t],r=0==t?0:this.path[3*t-1]+1;for(let o=0;o<e;o++)r+=n.child(o).nodeSize;return r}marks(){let e=this.parent,t=this.index();if(0==e.content.size)return Vn.none;if(this.textOffset)return e.child(t).marks;let n=e.maybeChild(t-1),r=e.maybeChild(t);if(!n){let e=n;n=r,r=e}let o=n.marks;for(var i=0;i<o.length;i++)!1!==o[i].type.spec.inclusive||r&&o[i].isInSet(r.marks)||(o=o[i--].removeFromSet(o));return o}marksAcross(e){let t=this.parent.maybeChild(this.index());if(!t||!t.isInline)return null;let n=t.marks,r=e.parent.maybeChild(e.index());for(var o=0;o<n.length;o++)!1!==n[o].type.spec.inclusive||r&&n[o].isInSet(r.marks)||(n=n[o--].removeFromSet(n));return n}sharedDepth(e){for(let t=this.depth;t>0;t--)if(this.start(t)<=e&&this.end(t)>=e)return t;return 0}blockRange(e=this,t){if(e.pos<this.pos)return e.blockRange(this);for(let n=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);n>=0;n--)if(e.pos<=this.end(n)&&(!t||t(this.node(n))))return new lr(this,e,n);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let t=1;t<=this.depth;t++)e+=(e?"/":"")+this.node(t).type.name+"_"+this.index(t-1);return e+":"+this.parentOffset}static resolve(e,t){if(!(t>=0&&t<=e.content.size))throw new RangeError("Position "+t+" out of range");let n=[],r=0,o=t;for(let i=e;;){let{index:e,offset:t}=i.content.findIndex(o),s=o-t;if(n.push(i,e,r+t),!s)break;if(i=i.child(e),i.isText)break;o=s-1,r+=t+1}return new or(t,n,o)}static resolveCached(e,t){for(let r=0;r<ir.length;r++){let n=ir[r];if(n.pos==t&&n.doc==e)return n}let n=ir[sr]=or.resolve(e,t);return sr=(sr+1)%ar,n}}let ir=[],sr=0,ar=12;class lr{constructor(e,t,n){this.$from=e,this.$to=t,this.depth=n}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const ur=Object.create(null);class cr{constructor(e,t,n,r=Vn.none){this.type=e,this.attrs=t,this.marks=r,this.content=n||jn.empty}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,t,n,r=0){this.content.nodesBetween(e,t,n,r,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,t,n,r){return this.content.textBetween(e,t,n,r)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,t,n){return this.type==e&&Kn(this.attrs,t||e.defaultAttrs||ur)&&Vn.sameSet(this.marks,n||Vn.none)}copy(e=null){return e==this.content?this:new cr(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new cr(this.type,this.attrs,this.content,e)}cut(e,t=this.content.size){return 0==e&&t==this.content.size?this:this.copy(this.content.cut(e,t))}slice(e,t=this.content.size,n=!1){if(e==t)return Wn.empty;let r=this.resolve(e),o=this.resolve(t),i=n?0:r.sharedDepth(t),s=r.start(i),a=r.node(i).content.cut(r.pos-s,o.pos-s);return new Wn(a,r.depth-i,o.depth-i)}replace(e,t,n){return Jn(this.resolve(e),this.resolve(t),n)}nodeAt(e){for(let t=this;;){let{index:n,offset:r}=t.content.findIndex(e);if(t=t.maybeChild(n),!t)return null;if(r==e||t.isText)return t;e-=r+1}}childAfter(e){let{index:t,offset:n}=this.content.findIndex(e);return{node:this.content.maybeChild(t),index:t,offset:n}}childBefore(e){if(0==e)return{node:null,index:0,offset:0};let{index:t,offset:n}=this.content.findIndex(e);if(n<e)return{node:this.content.child(t),index:t,offset:n};let r=this.content.child(t-1);return{node:r,index:t-1,offset:n-r.nodeSize}}resolve(e){return or.resolveCached(this,e)}resolveNoCache(e){return or.resolve(this,e)}rangeHasMark(e,t,n){let r=!1;return t>e&&this.nodesBetween(e,t,(e=>(n.isInSet(e.marks)&&(r=!0),!r))),r}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),dr(this.marks,e)}contentMatchAt(e){let t=this.type.contentMatch.matchFragment(this.content,0,e);if(!t)throw new Error("Called contentMatchAt on a node with invalid content");return t}canReplace(e,t,n=jn.empty,r=0,o=n.childCount){let i=this.contentMatchAt(e).matchFragment(n,r,o),s=i&&i.matchFragment(this.content,t);if(!s||!s.validEnd)return!1;for(let a=r;a<o;a++)if(!this.type.allowsMarks(n.child(a).marks))return!1;return!0}canReplaceWith(e,t,n,r){if(r&&!this.type.allowsMarks(r))return!1;let o=this.contentMatchAt(e).matchType(n),i=o&&o.matchFragment(this.content,t);return!!i&&i.validEnd}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){if(!this.type.validContent(this.content))throw new RangeError(`Invalid content for node ${this.type.name}: ${this.content.toString().slice(0,50)}`);let e=Vn.none;for(let t=0;t<this.marks.length;t++)e=this.marks[t].addToSet(e);if(!Vn.sameSet(e,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map((e=>e.type.name))}`);this.content.forEach((e=>e.check()))}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map((e=>e.toJSON()))),e}static fromJSON(e,t){if(!t)throw new RangeError("Invalid input for Node.fromJSON");let n=null;if(t.marks){if(!Array.isArray(t.marks))throw new RangeError("Invalid mark data for Node.fromJSON");n=t.marks.map(e.markFromJSON)}if("text"==t.type){if("string"!=typeof t.text)throw new RangeError("Invalid text node in JSON");return e.text(t.text,n)}let r=jn.fromJSON(e,t.content);return e.nodeType(t.type).create(t.attrs,r,n)}}cr.prototype.text=void 0;function dr(e,t){for(let n=e.length-1;n>=0;n--)t=e[n].type.name+"("+t+")";return t}class pr{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,t){let n=new hr(e,t);if(null==n.next)return pr.empty;let r=fr(n);n.next&&n.err("Unexpected trailing text");let o=function(e){let t=Object.create(null);return n(Dr(e,0));function n(r){let o=[];r.forEach((t=>{e[t].forEach((({term:t,to:n})=>{if(!t)return;let r;for(let e=0;e<o.length;e++)o[e][0]==t&&(r=o[e][1]);Dr(e,n).forEach((e=>{r||o.push([t,r=[]]),-1==r.indexOf(e)&&r.push(e)}))}))}));let i=t[r.join(",")]=new pr(r.indexOf(e.length-1)>-1);for(let e=0;e<o.length;e++){let r=o[e][1].sort(br);i.next.push({type:o[e][0],next:t[r.join(",")]||n(r)})}return i}}(function(e){let t=[[]];return o(i(e,0),n()),t;function n(){return t.push([])-1}function r(e,n,r){let o={term:r,to:n};return t[e].push(o),o}function o(e,t){e.forEach((e=>e.to=t))}function i(e,t){if("choice"==e.type)return e.exprs.reduce(((e,n)=>e.concat(i(n,t))),[]);if("seq"!=e.type){if("star"==e.type){let s=n();return r(t,s),o(i(e.expr,s),s),[r(s)]}if("plus"==e.type){let s=n();return o(i(e.expr,t),s),o(i(e.expr,s),s),[r(s)]}if("opt"==e.type)return[r(t)].concat(i(e.expr,t));if("range"==e.type){let s=t;for(let t=0;t<e.min;t++){let t=n();o(i(e.expr,s),t),s=t}if(-1==e.max)o(i(e.expr,s),s);else for(let t=e.min;t<e.max;t++){let t=n();r(s,t),o(i(e.expr,s),t),s=t}return[r(s)]}if("name"==e.type)return[r(t,void 0,e.value)];throw new Error("Unknown expr type")}for(let r=0;;r++){let s=i(e.exprs[r],t);if(r==e.exprs.length-1)return s;o(s,t=n())}}}(r));return function(e,t){for(let n=0,r=[e];n<r.length;n++){let e=r[n],o=!e.validEnd,i=[];for(let t=0;t<e.next.length;t++){let{type:n,next:s}=e.next[t];i.push(n.name),!o||n.isText||n.hasRequiredAttrs()||(o=!1),-1==r.indexOf(s)&&r.push(s)}o&&t.err("Only non-generatable nodes ("+i.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}(o,n),o}matchType(e){for(let t=0;t<this.next.length;t++)if(this.next[t].type==e)return this.next[t].next;return null}matchFragment(e,t=0,n=e.childCount){let r=this;for(let o=t;r&&o<n;o++)r=r.matchType(e.child(o).type);return r}get inlineContent(){return this.next.length&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:t}=this.next[e];if(!t.isText&&!t.hasRequiredAttrs())return t}return null}compatible(e){for(let t=0;t<this.next.length;t++)for(let n=0;n<e.next.length;n++)if(this.next[t].type==e.next[n].type)return!0;return!1}fillBefore(e,t=!1,n=0){let r=[this];return function o(i,s){let a=i.matchFragment(e,n);if(a&&(!t||a.validEnd))return jn.from(s.map((e=>e.createAndFill())));for(let e=0;e<i.next.length;e++){let{type:t,next:n}=i.next[e];if(!t.isText&&!t.hasRequiredAttrs()&&-1==r.indexOf(n)){r.push(n);let e=o(n,s.concat(t));if(e)return e}}return null}(this,[])}findWrapping(e){for(let n=0;n<this.wrapCache.length;n+=2)if(this.wrapCache[n]==e)return this.wrapCache[n+1];let t=this.computeWrapping(e);return this.wrapCache.push(e,t),t}computeWrapping(e){let t=Object.create(null),n=[{match:this,type:null,via:null}];for(;n.length;){let r=n.shift(),o=r.match;if(o.matchType(e)){let e=[];for(let t=r;t.type;t=t.via)e.push(t.type);return e.reverse()}for(let e=0;e<o.next.length;e++){let{type:i,next:s}=o.next[e];i.isLeaf||i.hasRequiredAttrs()||i.name in t||r.type&&!s.validEnd||(n.push({match:i.contentMatch,type:i,via:r}),t[i.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw new RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];return function t(n){e.push(n);for(let r=0;r<n.next.length;r++)-1==e.indexOf(n.next[r].next)&&t(n.next[r].next)}(this),e.map(((t,n)=>{let r=n+(t.validEnd?"*":" ")+" ";for(let o=0;o<t.next.length;o++)r+=(o?", ":"")+t.next[o].type.name+"->"+e.indexOf(t.next[o].next);return r})).join("\n")}}pr.empty=new pr(!0);class hr{constructor(e,t){this.string=e,this.nodeTypes=t,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),""==this.tokens[this.tokens.length-1]&&this.tokens.pop(),""==this.tokens[0]&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}}function fr(e){let t=[];do{t.push(mr(e))}while(e.eat("|"));return 1==t.length?t[0]:{type:"choice",exprs:t}}function mr(e){let t=[];do{t.push(gr(e))}while(e.next&&")"!=e.next&&"|"!=e.next);return 1==t.length?t[0]:{type:"seq",exprs:t}}function gr(e){let t=function(e){if(e.eat("(")){let t=fr(e);return e.eat(")")||e.err("Missing closing paren"),t}if(!/\W/.test(e.next)){let t=function(e,t){let n=e.nodeTypes,r=n[t];if(r)return[r];let o=[];for(let i in n){let e=n[i];e.groups.indexOf(t)>-1&&o.push(e)}0==o.length&&e.err("No node type or group '"+t+"' found");return o}(e,e.next).map((t=>(null==e.inline?e.inline=t.isInline:e.inline!=t.isInline&&e.err("Mixing inline and block content"),{type:"name",value:t})));return e.pos++,1==t.length?t[0]:{type:"choice",exprs:t}}e.err("Unexpected token '"+e.next+"'")}(e);for(;;)if(e.eat("+"))t={type:"plus",expr:t};else if(e.eat("*"))t={type:"star",expr:t};else if(e.eat("?"))t={type:"opt",expr:t};else{if(!e.eat("{"))break;t=vr(e,t)}return t}function yr(e){/\D/.test(e.next)&&e.err("Expected number, got '"+e.next+"'");let t=Number(e.next);return e.pos++,t}function vr(e,t){let n=yr(e),r=n;return e.eat(",")&&(r="}"!=e.next?yr(e):-1),e.eat("}")||e.err("Unclosed braced range"),{type:"range",min:n,max:r,expr:t}}function br(e,t){return t-e}function Dr(e,t){let n=[];return function t(r){let o=e[r];if(1==o.length&&!o[0].term)return t(o[0].to);n.push(r);for(let e=0;e<o.length;e++){let{term:r,to:i}=o[e];r||-1!=n.indexOf(i)||t(i)}}(t),n.sort(br)}function Cr(e){let t=Object.create(null);for(let n in e){let r=e[n];if(!r.hasDefault)return null;t[n]=r.default}return t}function wr(e,t){let n=Object.create(null);for(let r in e){let o=t&&t[r];if(void 0===o){let t=e[r];if(!t.hasDefault)throw new RangeError("No value supplied for attribute "+r);o=t.default}n[r]=o}return n}function Er(e){let t=Object.create(null);if(e)for(let n in e)t[n]=new xr(e[n]);return t}class xr{constructor(e){this.hasDefault=Object.prototype.hasOwnProperty.call(e,"default"),this.default=e.default}get isRequired(){return!this.hasDefault}}class kr{constructor(e,t,n,r){this.name=e,this.rank=t,this.schema=n,this.spec=r,this.attrs=Er(r.attrs),this.excluded=null;let o=Cr(this.attrs);this.instance=o?new Vn(this,o):null}create(e=null){return!e&&this.instance?this.instance:new Vn(this,wr(this.attrs,e))}static compile(e,t){let n=Object.create(null),r=0;return e.forEach(((e,o)=>n[e]=new kr(e,r++,t,o))),n}removeFromSet(e){for(var t=0;t<e.length;t++)e[t].type==this&&(e=e.slice(0,t).concat(e.slice(t+1)),t--);return e}isInSet(e){for(let t=0;t<e.length;t++)if(e[t].type==this)return e[t]}excludes(e){return this.excluded.indexOf(e)>-1}}class Ar{constructor(e,t){this.schema=e,this.rules=t,this.tags=[],this.styles=[],t.forEach((e=>{e.tag?this.tags.push(e):e.style&&this.styles.push(e)})),this.normalizeLists=!this.tags.some((t=>{if(!/^(ul|ol)\b/.test(t.tag)||!t.node)return!1;let n=e.nodes[t.node];return n.contentMatch.matchType(n)}))}parse(e,t={}){let n=new Br(this,t,!1);return n.addAll(e,t.from,t.to),n.finish()}parseSlice(e,t={}){let n=new Br(this,t,!0);return n.addAll(e,t.from,t.to),Wn.maxOpen(n.finish())}matchTag(e,t,n){for(let r=n?this.tags.indexOf(n)+1:0;r<this.tags.length;r++){let n=this.tags[r];if(Nr(e,n.tag)&&(void 0===n.namespace||e.namespaceURI==n.namespace)&&(!n.context||t.matchesContext(n.context))){if(n.getAttrs){let t=n.getAttrs(e);if(!1===t)continue;n.attrs=t||void 0}return n}}}matchStyle(e,t,n,r){for(let o=r?this.styles.indexOf(r)+1:0;o<this.styles.length;o++){let r=this.styles[o],i=r.style;if(!(0!=i.indexOf(e)||r.context&&!n.matchesContext(r.context)||i.length>e.length&&(61!=i.charCodeAt(e.length)||i.slice(e.length+1)!=t))){if(r.getAttrs){let e=r.getAttrs(t);if(!1===e)continue;r.attrs=e||void 0}return r}}}static schemaRules(e){let t=[];function n(e){let n=null==e.priority?50:e.priority,r=0;for(;r<t.length;r++){let e=t[r];if((null==e.priority?50:e.priority)<n)break}t.splice(r,0,e)}for(let r in e.marks){let t=e.marks[r].spec.parseDOM;t&&t.forEach((e=>{n(e=Rr(e)),e.mark=r}))}for(let r in e.nodes){let t=e.nodes[r].spec.parseDOM;t&&t.forEach((e=>{n(e=Rr(e)),e.node=r}))}return t}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new Ar(e,Ar.schemaRules(e)))}}const Sr={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},Mr={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},Fr={ol:!0,ul:!0};function Or(e,t,n){return null!=t?(t?1:0)|("full"===t?2:0):e&&"pre"==e.whitespace?3:-5&n}class Tr{constructor(e,t,n,r,o,i,s){this.type=e,this.attrs=t,this.marks=n,this.pendingMarks=r,this.solid=o,this.options=s,this.content=[],this.activeMarks=Vn.none,this.stashMarks=[],this.match=i||(4&s?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let t=this.type.contentMatch.fillBefore(jn.from(e));if(!t){let t,n=this.type.contentMatch;return(t=n.findWrapping(e.type))?(this.match=n,t):null}this.match=this.type.contentMatch.matchFragment(t)}return this.match.findWrapping(e.type)}finish(e){if(!(1&this.options)){let e,t=this.content[this.content.length-1];if(t&&t.isText&&(e=/[ \t\r\n\u000c]+$/.exec(t.text))){let n=t;t.text.length==e[0].length?this.content.pop():this.content[this.content.length-1]=n.withText(n.text.slice(0,n.text.length-e[0].length))}}let t=jn.from(this.content);return!e&&this.match&&(t=t.append(this.match.fillBefore(jn.empty,!0))),this.type?this.type.create(this.attrs,t,this.marks):t}popFromStashMark(e){for(let t=this.stashMarks.length-1;t>=0;t--)if(e.eq(this.stashMarks[t]))return this.stashMarks.splice(t,1)[0]}applyPending(e){for(let t=0,n=this.pendingMarks;t<n.length;t++){let r=n[t];(this.type?this.type.allowsMarkType(r.type):Ir(r.type,e))&&!r.isInSet(this.activeMarks)&&(this.activeMarks=r.addToSet(this.activeMarks),this.pendingMarks=r.removeFromSet(this.pendingMarks))}}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!Sr.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}}class Br{constructor(e,t,n){this.parser=e,this.options=t,this.isOpen=n,this.open=0;let r,o=t.topNode,i=Or(null,t.preserveWhitespace,0)|(n?4:0);r=o?new Tr(o.type,o.attrs,Vn.none,Vn.none,!0,t.topMatch||o.type.contentMatch,i):new Tr(n?null:e.schema.topNodeType,null,Vn.none,Vn.none,!0,null,i),this.nodes=[r],this.find=t.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e){if(3==e.nodeType)this.addTextNode(e);else if(1==e.nodeType){let t=e.getAttribute("style"),n=t?this.readStyles(function(e){let t,n=/\s*([\w-]+)\s*:\s*([^;]+)/g,r=[];for(;t=n.exec(e);)r.push(t[1],t[2].trim());return r}(t)):null,r=this.top;if(null!=n)for(let e=0;e<n.length;e++)this.addPendingMark(n[e]);if(this.addElement(e),null!=n)for(let e=0;e<n.length;e++)this.removePendingMark(n[e],r)}}addTextNode(e){let t=e.nodeValue,n=this.top;if(2&n.options||n.inlineContext(e)||/[^ \t\r\n\u000c]/.test(t)){if(1&n.options)t=2&n.options?t.replace(/\r\n?/g,"\n"):t.replace(/\r?\n|\r/g," ");else if(t=t.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(t)&&this.open==this.nodes.length-1){let r=n.content[n.content.length-1],o=e.previousSibling;(!r||o&&"BR"==o.nodeName||r.isText&&/[ \t\r\n\u000c]$/.test(r.text))&&(t=t.slice(1))}t&&this.insertNode(this.parser.schema.text(t)),this.findInText(e)}else this.findInside(e)}addElement(e,t){let n,r=e.nodeName.toLowerCase();Fr.hasOwnProperty(r)&&this.parser.normalizeLists&&function(e){for(let t=e.firstChild,n=null;t;t=t.nextSibling){let e=1==t.nodeType?t.nodeName.toLowerCase():null;e&&Fr.hasOwnProperty(e)&&n?(n.appendChild(t),t=n):"li"==e?n=t:e&&(n=null)}}(e);let o=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(n=this.parser.matchTag(e,this,t));if(o?o.ignore:Mr.hasOwnProperty(r))this.findInside(e),this.ignoreFallback(e);else if(!o||o.skip||o.closeParent){o&&o.closeParent?this.open=Math.max(0,this.open-1):o&&o.skip.nodeType&&(e=o.skip);let t,n=this.top,i=this.needsBlock;if(Sr.hasOwnProperty(r))t=!0,n.type||(this.needsBlock=!0);else if(!e.firstChild)return void this.leafFallback(e);this.addAll(e),t&&this.sync(n),this.needsBlock=i}else this.addElementByRule(e,o,!1===o.consuming?n:void 0)}leafFallback(e){"BR"==e.nodeName&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode("\n"))}ignoreFallback(e){"BR"!=e.nodeName||this.top.type&&this.top.type.inlineContent||this.findPlace(this.parser.schema.text("-"))}readStyles(e){let t=Vn.none;e:for(let n=0;n<e.length;n+=2)for(let r;;){let o=this.parser.matchStyle(e[n],e[n+1],this,r);if(!o)continue e;if(o.ignore)return null;if(t=this.parser.schema.marks[o.mark].create(o.attrs).addToSet(t),!1!==o.consuming)break;r=o}return t}addElementByRule(e,t,n){let r,o,i;if(t.node)o=this.parser.schema.nodes[t.node],o.isLeaf?this.insertNode(o.create(t.attrs))||this.leafFallback(e):r=this.enter(o,t.attrs||null,t.preserveWhitespace);else{i=this.parser.schema.marks[t.mark].create(t.attrs),this.addPendingMark(i)}let s=this.top;if(o&&o.isLeaf)this.findInside(e);else if(n)this.addElement(e,n);else if(t.getContent)this.findInside(e),t.getContent(e,this.parser.schema).forEach((e=>this.insertNode(e)));else{let n=e;"string"==typeof t.contentElement?n=e.querySelector(t.contentElement):"function"==typeof t.contentElement?n=t.contentElement(e):t.contentElement&&(n=t.contentElement),this.findAround(e,n,!0),this.addAll(n)}r&&this.sync(s)&&this.open--,i&&this.removePendingMark(i,s)}addAll(e,t,n){let r=t||0;for(let o=t?e.childNodes[t]:e.firstChild,i=null==n?null:e.childNodes[n];o!=i;o=o.nextSibling,++r)this.findAtPoint(e,r),this.addDOM(o);this.findAtPoint(e,r)}findPlace(e){let t,n;for(let r=this.open;r>=0;r--){let o=this.nodes[r],i=o.findWrapping(e);if(i&&(!t||t.length>i.length)&&(t=i,n=o,!i.length))break;if(o.solid)break}if(!t)return!1;this.sync(n);for(let r=0;r<t.length;r++)this.enterInner(t[r],null,!1);return!0}insertNode(e){if(e.isInline&&this.needsBlock&&!this.top.type){let e=this.textblockFromContext();e&&this.enterInner(e)}if(this.findPlace(e)){this.closeExtra();let t=this.top;t.applyPending(e.type),t.match&&(t.match=t.match.matchType(e.type));let n=t.activeMarks;for(let r=0;r<e.marks.length;r++)t.type&&!t.type.allowsMarkType(e.marks[r].type)||(n=e.marks[r].addToSet(n));return t.content.push(e.mark(n)),!0}return!1}enter(e,t,n){let r=this.findPlace(e.create(t));return r&&this.enterInner(e,t,!0,n),r}enterInner(e,t=null,n=!1,r){this.closeExtra();let o=this.top;o.applyPending(e),o.match=o.match&&o.match.matchType(e);let i=Or(e,r,o.options);4&o.options&&0==o.content.length&&(i|=4),this.nodes.push(new Tr(e,t,o.activeMarks,o.pendingMarks,n,null,i)),this.open++}closeExtra(e=!1){let t=this.nodes.length-1;if(t>this.open){for(;t>this.open;t--)this.nodes[t-1].content.push(this.nodes[t].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(this.isOpen||this.options.topOpen)}sync(e){for(let t=this.open;t>=0;t--)if(this.nodes[t]==e)return this.open=t,!0;return!1}get currentPos(){this.closeExtra();let e=0;for(let t=this.open;t>=0;t--){let n=this.nodes[t].content;for(let t=n.length-1;t>=0;t--)e+=n[t].nodeSize;t&&e++}return e}findAtPoint(e,t){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].node==e&&this.find[n].offset==t&&(this.find[n].pos=this.currentPos)}findInside(e){if(this.find)for(let t=0;t<this.find.length;t++)null==this.find[t].pos&&1==e.nodeType&&e.contains(this.find[t].node)&&(this.find[t].pos=this.currentPos)}findAround(e,t,n){if(e!=t&&this.find)for(let r=0;r<this.find.length;r++)if(null==this.find[r].pos&&1==e.nodeType&&e.contains(this.find[r].node)){t.compareDocumentPosition(this.find[r].node)&(n?2:4)&&(this.find[r].pos=this.currentPos)}}findInText(e){if(this.find)for(let t=0;t<this.find.length;t++)this.find[t].node==e&&(this.find[t].pos=this.currentPos-(e.nodeValue.length-this.find[t].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let t=e.split("/"),n=this.options.context,r=!(this.isOpen||n&&n.parent.type!=this.nodes[0].type),o=-(n?n.depth+1:0)+(r?0:1),i=(e,s)=>{for(;e>=0;e--){let a=t[e];if(""==a){if(e==t.length-1||0==e)continue;for(;s>=o;s--)if(i(e-1,s))return!0;return!1}{let e=s>0||0==s&&r?this.nodes[s].type:n&&s>=o?n.node(s-o).type:null;if(!e||e.name!=a&&-1==e.groups.indexOf(a))return!1;s--}}return!0};return i(t.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let t=e.depth;t>=0;t--){let n=e.node(t).contentMatchAt(e.indexAfter(t)).defaultType;if(n&&n.isTextblock&&n.defaultAttrs)return n}for(let t in this.parser.schema.nodes){let e=this.parser.schema.nodes[t];if(e.isTextblock&&e.defaultAttrs)return e}}addPendingMark(e){let t=function(e,t){for(let n=0;n<t.length;n++)if(e.eq(t[n]))return t[n]}(e,this.top.pendingMarks);t&&this.top.stashMarks.push(t),this.top.pendingMarks=e.addToSet(this.top.pendingMarks)}removePendingMark(e,t){for(let n=this.open;n>=0;n--){let r=this.nodes[n];if(r.pendingMarks.lastIndexOf(e)>-1)r.pendingMarks=e.removeFromSet(r.pendingMarks);else{r.activeMarks=e.removeFromSet(r.activeMarks);let t=r.popFromStashMark(e);t&&r.type&&r.type.allowsMarkType(t.type)&&(r.activeMarks=t.addToSet(r.activeMarks))}if(r==t)break}}}function Nr(e,t){return(e.matches||e.msMatchesSelector||e.webkitMatchesSelector||e.mozMatchesSelector).call(e,t)}function Rr(e){let t={};for(let n in e)t[n]=e[n];return t}function Ir(e,t){let n=t.schema.nodes;for(let r in n){let o=n[r];if(!o.allowsMarkType(e))continue;let i=[],s=e=>{i.push(e);for(let n=0;n<e.edgeCount;n++){let{type:r,next:o}=e.edge(n);if(r==t)return!0;if(i.indexOf(o)<0&&s(o))return!0}};if(s(o.contentMatch))return!0}}class Pr{constructor(e,t){this.nodes=e,this.marks=t}serializeFragment(e,t={},n){n||(n=zr(t).createDocumentFragment());let r=n,o=[];return e.forEach((e=>{if(o.length||e.marks.length){let n=0,i=0;for(;n<o.length&&i<e.marks.length;){let t=e.marks[i];if(this.marks[t.type.name]){if(!t.eq(o[n][0])||!1===t.type.spec.spanning)break;n++,i++}else i++}for(;n<o.length;)r=o.pop()[1];for(;i<e.marks.length;){let n=e.marks[i++],s=this.serializeMark(n,e.isInline,t);s&&(o.push([n,r]),r.appendChild(s.dom),r=s.contentDOM||s.dom)}}r.appendChild(this.serializeNodeInner(e,t))})),n}serializeNodeInner(e,t){let{dom:n,contentDOM:r}=Pr.renderSpec(zr(t),this.nodes[e.type.name](e));if(r){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,t,r)}return n}serializeNode(e,t={}){let n=this.serializeNodeInner(e,t);for(let r=e.marks.length-1;r>=0;r--){let o=this.serializeMark(e.marks[r],e.isInline,t);o&&((o.contentDOM||o.dom).appendChild(n),n=o.dom)}return n}serializeMark(e,t,n={}){let r=this.marks[e.type.name];return r&&Pr.renderSpec(zr(n),r(e,t))}static renderSpec(e,t,n=null){if("string"==typeof t)return{dom:e.createTextNode(t)};if(null!=t.nodeType)return{dom:t};if(t.dom&&null!=t.dom.nodeType)return t;let r,o=t[0],i=o.indexOf(" ");i>0&&(n=o.slice(0,i),o=o.slice(i+1));let s=n?e.createElementNS(n,o):e.createElement(o),a=t[1],l=1;if(a&&"object"==typeof a&&null==a.nodeType&&!Array.isArray(a)){l=2;for(let e in a)if(null!=a[e]){let t=e.indexOf(" ");t>0?s.setAttributeNS(e.slice(0,t),e.slice(t+1),a[e]):s.setAttribute(e,a[e])}}for(let u=l;u<t.length;u++){let o=t[u];if(0===o){if(u<t.length-1||u>l)throw new RangeError("Content hole must be the only child of its parent node");return{dom:s,contentDOM:s}}{let{dom:t,contentDOM:i}=Pr.renderSpec(e,o,n);if(s.appendChild(t),i){if(r)throw new RangeError("Multiple content holes");r=i}}}return{dom:s,contentDOM:r}}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new Pr(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let t=Lr(e.nodes);return t.text||(t.text=e=>e.text),t}static marksFromSchema(e){return Lr(e.marks)}}function Lr(e){let t={};for(let n in e){let r=e[n].spec.toDOM;r&&(t[n]=r)}return t}function zr(e){return e.document||window.document}const $r=Math.pow(2,16);function jr(e){return 65535&e}class _r{constructor(e,t,n){this.pos=e,this.delInfo=t,this.recover=n}get deleted(){return(8&this.delInfo)>0}get deletedBefore(){return(5&this.delInfo)>0}get deletedAfter(){return(6&this.delInfo)>0}get deletedAcross(){return(4&this.delInfo)>0}}class Hr{constructor(e,t=!1){if(this.ranges=e,this.inverted=t,!e.length&&Hr.empty)return Hr.empty}recover(e){let t=0,n=jr(e);if(!this.inverted)for(let r=0;r<n;r++)t+=this.ranges[3*r+2]-this.ranges[3*r+1];return this.ranges[3*n]+t+function(e){return(e-(65535&e))/$r}(e)}mapResult(e,t=1){return this._map(e,t,!1)}map(e,t=1){return this._map(e,t,!0)}_map(e,t,n){let r=0,o=this.inverted?2:1,i=this.inverted?1:2;for(let s=0;s<this.ranges.length;s+=3){let a=this.ranges[s]-(this.inverted?r:0);if(a>e)break;let l=this.ranges[s+o],u=this.ranges[s+i],c=a+l;if(e<=c){let o=a+r+((l?e==a?-1:e==c?1:t:t)<0?0:u);if(n)return o;let i=e==(t<0?a:c)?null:s/3+(e-a)*$r,d=e==a?2:e==c?1:4;return(t<0?e!=a:e!=c)&&(d|=8),new _r(o,d,i)}r+=u-l}return n?e+r:new _r(e+r,0,null)}touches(e,t){let n=0,r=jr(t),o=this.inverted?2:1,i=this.inverted?1:2;for(let s=0;s<this.ranges.length;s+=3){let t=this.ranges[s]-(this.inverted?n:0);if(t>e)break;let a=this.ranges[s+o];if(e<=t+a&&s==3*r)return!0;n+=this.ranges[s+i]-a}return!1}forEach(e){let t=this.inverted?2:1,n=this.inverted?1:2;for(let r=0,o=0;r<this.ranges.length;r+=3){let i=this.ranges[r],s=i-(this.inverted?o:0),a=i+(this.inverted?0:o),l=this.ranges[r+t],u=this.ranges[r+n];e(s,s+l,a,a+u),o+=u-l}}invert(){return new Hr(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return 0==e?Hr.empty:new Hr(e<0?[0,-e,0]:[0,0,e])}}Hr.empty=new Hr([]);class Kr{constructor(e=[],t,n=0,r=e.length){this.maps=e,this.mirror=t,this.from=n,this.to=r}slice(e=0,t=this.maps.length){return new Kr(this.maps,this.mirror,e,t)}copy(){return new Kr(this.maps.slice(),this.mirror&&this.mirror.slice(),this.from,this.to)}appendMap(e,t){this.to=this.maps.push(e),null!=t&&this.setMirror(this.maps.length-1,t)}appendMapping(e){for(let t=0,n=this.maps.length;t<e.maps.length;t++){let r=e.getMirror(t);this.appendMap(e.maps[t],null!=r&&r<t?n+r:void 0)}}getMirror(e){if(this.mirror)for(let t=0;t<this.mirror.length;t++)if(this.mirror[t]==e)return this.mirror[t+(t%2?-1:1)]}setMirror(e,t){this.mirror||(this.mirror=[]),this.mirror.push(e,t)}appendMappingInverted(e){for(let t=e.maps.length-1,n=this.maps.length+e.maps.length;t>=0;t--){let r=e.getMirror(t);this.appendMap(e.maps[t].invert(),null!=r&&r>t?n-r-1:void 0)}}invert(){let e=new Kr;return e.appendMappingInverted(this),e}map(e,t=1){if(this.mirror)return this._map(e,t,!0);for(let n=this.from;n<this.to;n++)e=this.maps[n].map(e,t);return e}mapResult(e,t=1){return this._map(e,t,!1)}_map(e,t,n){let r=0;for(let o=this.from;o<this.to;o++){let n=this.maps[o].mapResult(e,t);if(null!=n.recover){let t=this.getMirror(o);if(null!=t&&t>o&&t<this.to){o=t,e=this.maps[t].recover(n.recover);continue}}r|=n.delInfo,e=n.pos}return n?e:new _r(e,r,null)}}const Vr=Object.create(null);class qr{getMap(){return Hr.empty}merge(e){return null}static fromJSON(e,t){if(!t||!t.stepType)throw new RangeError("Invalid input for Step.fromJSON");let n=Vr[t.stepType];if(!n)throw new RangeError(`No step type ${t.stepType} defined`);return n.fromJSON(e,t)}static jsonID(e,t){if(e in Vr)throw new RangeError("Duplicate use of step JSON ID "+e);return Vr[e]=t,t.prototype.jsonID=e,t}}class Wr{constructor(e,t){this.doc=e,this.failed=t}static ok(e){return new Wr(e,null)}static fail(e){return new Wr(null,e)}static fromReplace(e,t,n,r){try{return Wr.ok(e.replace(t,n,r))}catch(o){if(o instanceof qn)return Wr.fail(o.message);throw o}}}function Ur(e,t,n){let r=[];for(let o=0;o<e.childCount;o++){let i=e.child(o);i.content.size&&(i=i.copy(Ur(i.content,t,i))),i.isInline&&(i=t(i,n,o)),r.push(i)}return jn.fromArray(r)}class Zr extends qr{constructor(e,t,n){super(),this.from=e,this.to=t,this.mark=n}apply(e){let t=e.slice(this.from,this.to),n=e.resolve(this.from),r=n.node(n.sharedDepth(this.to)),o=new Wn(Ur(t.content,((e,t)=>e.isAtom&&t.type.allowsMarkType(this.mark.type)?e.mark(this.mark.addToSet(e.marks)):e),r),t.openStart,t.openEnd);return Wr.fromReplace(e,this.from,this.to,o)}invert(){return new Jr(this.from,this.to,this.mark)}map(e){let t=e.mapResult(this.from,1),n=e.mapResult(this.to,-1);return t.deleted&&n.deleted||t.pos>=n.pos?null:new Zr(t.pos,n.pos,this.mark)}merge(e){return e instanceof Zr&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new Zr(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,t){if("number"!=typeof t.from||"number"!=typeof t.to)throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new Zr(t.from,t.to,e.markFromJSON(t.mark))}}qr.jsonID("addMark",Zr);class Jr extends qr{constructor(e,t,n){super(),this.from=e,this.to=t,this.mark=n}apply(e){let t=e.slice(this.from,this.to),n=new Wn(Ur(t.content,(e=>e.mark(this.mark.removeFromSet(e.marks))),e),t.openStart,t.openEnd);return Wr.fromReplace(e,this.from,this.to,n)}invert(){return new Zr(this.from,this.to,this.mark)}map(e){let t=e.mapResult(this.from,1),n=e.mapResult(this.to,-1);return t.deleted&&n.deleted||t.pos>=n.pos?null:new Jr(t.pos,n.pos,this.mark)}merge(e){return e instanceof Jr&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new Jr(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,t){if("number"!=typeof t.from||"number"!=typeof t.to)throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new Jr(t.from,t.to,e.markFromJSON(t.mark))}}qr.jsonID("removeMark",Jr);class Gr extends qr{constructor(e,t,n,r=!1){super(),this.from=e,this.to=t,this.slice=n,this.structure=r}apply(e){return this.structure&&Xr(e,this.from,this.to)?Wr.fail("Structure replace would overwrite content"):Wr.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new Hr([this.from,this.to-this.from,this.slice.size])}invert(e){return new Gr(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let t=e.mapResult(this.from,1),n=e.mapResult(this.to,-1);return t.deletedAcross&&n.deletedAcross?null:new Gr(t.pos,Math.max(t.pos,n.pos),this.slice)}merge(e){if(!(e instanceof Gr)||e.structure||this.structure)return null;if(this.from+this.slice.size!=e.from||this.slice.openEnd||e.slice.openStart){if(e.to!=this.from||this.slice.openStart||e.slice.openEnd)return null;{let t=this.slice.size+e.slice.size==0?Wn.empty:new Wn(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new Gr(e.from,this.to,t,this.structure)}}{let t=this.slice.size+e.slice.size==0?Wn.empty:new Wn(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new Gr(this.from,this.to+(e.to-e.from),t,this.structure)}}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,t){if("number"!=typeof t.from||"number"!=typeof t.to)throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new Gr(t.from,t.to,Wn.fromJSON(e,t.slice),!!t.structure)}}qr.jsonID("replace",Gr);class Yr extends qr{constructor(e,t,n,r,o,i,s=!1){super(),this.from=e,this.to=t,this.gapFrom=n,this.gapTo=r,this.slice=o,this.insert=i,this.structure=s}apply(e){if(this.structure&&(Xr(e,this.from,this.gapFrom)||Xr(e,this.gapTo,this.to)))return Wr.fail("Structure gap-replace would overwrite content");let t=e.slice(this.gapFrom,this.gapTo);if(t.openStart||t.openEnd)return Wr.fail("Gap is not a flat range");let n=this.slice.insertAt(this.insert,t.content);return n?Wr.fromReplace(e,this.from,this.to,n):Wr.fail("Content does not fit in gap")}getMap(){return new Hr([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let t=this.gapTo-this.gapFrom;return new Yr(this.from,this.from+this.slice.size+t,this.from+this.insert,this.from+this.insert+t,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let t=e.mapResult(this.from,1),n=e.mapResult(this.to,-1),r=e.map(this.gapFrom,-1),o=e.map(this.gapTo,1);return t.deletedAcross&&n.deletedAcross||r<t.pos||o>n.pos?null:new Yr(t.pos,n.pos,r,o,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,t){if("number"!=typeof t.from||"number"!=typeof t.to||"number"!=typeof t.gapFrom||"number"!=typeof t.gapTo||"number"!=typeof t.insert)throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new Yr(t.from,t.to,t.gapFrom,t.gapTo,Wn.fromJSON(e,t.slice),t.insert,!!t.structure)}}function Xr(e,t,n){let r=e.resolve(t),o=n-t,i=r.depth;for(;o>0&&i>0&&r.indexAfter(i)==r.node(i).childCount;)i--,o--;if(o>0){let e=r.node(i).maybeChild(r.indexAfter(i));for(;o>0;){if(!e||e.isLeaf)return!0;e=e.firstChild,o--}}return!1}function Qr(e,t,n){return(0==t||e.canReplace(t,e.childCount))&&(n==e.childCount||e.canReplace(0,n))}function eo(e){let t=e.parent.content.cutByIndex(e.startIndex,e.endIndex);for(let n=e.depth;;--n){let r=e.$from.node(n),o=e.$from.index(n),i=e.$to.indexAfter(n);if(n<e.depth&&r.canReplace(o,i,t))return n;if(0==n||r.type.spec.isolating||!Qr(r,o,i))break}return null}function to(e,t,n=null,r=e){let o=function(e,t){let{parent:n,startIndex:r,endIndex:o}=e,i=n.contentMatchAt(r).findWrapping(t);if(!i)return null;let s=i.length?i[0]:t;return n.canReplaceWith(r,o,s)?i:null}(e,t),i=o&&function(e,t){let{parent:n,startIndex:r,endIndex:o}=e,i=n.child(r),s=t.contentMatch.findWrapping(i.type);if(!s)return null;let a=(s.length?s[s.length-1]:t).contentMatch;for(let l=r;a&&l<o;l++)a=a.matchType(n.child(l).type);return a&&a.validEnd?s:null}(r,t);return i?o.map(no).concat({type:t,attrs:n}).concat(i.map(no)):null}function no(e){return{type:e,attrs:null}}function ro(e,t,n=1,r){let o=e.resolve(t),i=o.depth-n,s=r&&r[r.length-1]||o.parent;if(i<0||o.parent.type.spec.isolating||!o.parent.canReplace(o.index(),o.parent.childCount)||!s.type.validContent(o.parent.content.cutByIndex(o.index(),o.parent.childCount)))return!1;for(let u=o.depth-1,c=n-2;u>i;u--,c--){let e=o.node(u),t=o.index(u);if(e.type.spec.isolating)return!1;let n=e.content.cutByIndex(t,e.childCount),i=r&&r[c]||e;if(i!=e&&(n=n.replaceChild(0,i.type.create(i.attrs))),!e.canReplace(t+1,e.childCount)||!i.type.validContent(n))return!1}let a=o.indexAfter(i),l=r&&r[0];return o.node(i).canReplaceWith(a,a,l?l.type:o.node(i+1).type)}function oo(e,t){let n=e.resolve(t),r=n.index();return io(n.nodeBefore,n.nodeAfter)&&n.parent.canReplace(r,r+1)}function io(e,t){return!(!e||!t||e.isLeaf||!e.canAppend(t))}function so(e,t,n){let r=e.resolve(t);if(!n.content.size)return t;let o=n.content;for(let i=0;i<n.openStart;i++)o=o.firstChild.content;for(let i=1;i<=(0==n.openStart&&n.size?2:1);i++)for(let e=r.depth;e>=0;e--){let t=e==r.depth?0:r.pos<=(r.start(e+1)+r.end(e+1))/2?-1:1,n=r.index(e)+(t>0?1:0),s=r.node(e),a=!1;if(1==i)a=s.canReplace(n,n,o);else{let e=s.contentMatchAt(n).findWrapping(o.firstChild.type);a=e&&s.canReplaceWith(n,n,e[0])}if(a)return 0==t?r.pos:t<0?r.before(e+1):r.after(e+1)}return null}function ao(e,t,n=t,r=Wn.empty){if(t==n&&!r.size)return null;let o=e.resolve(t),i=e.resolve(n);return lo(o,i,r)?new Gr(t,n,r):new uo(o,i,r).fit()}function lo(e,t,n){return!n.openStart&&!n.openEnd&&e.start()==t.start()&&e.parent.canReplace(e.index(),t.index(),n.content)}qr.jsonID("replaceAround",Yr);class uo{constructor(e,t,n){this.$from=e,this.$to=t,this.unplaced=n,this.frontier=[],this.placed=jn.empty;for(let r=0;r<=e.depth;r++){let t=e.node(r);this.frontier.push({type:t.type,match:t.contentMatchAt(e.indexAfter(r))})}for(let r=e.depth;r>0;r--)this.placed=jn.from(e.node(r).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let e=this.findFittable();e?this.placeNodes(e):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),t=this.placed.size-this.depth-this.$from.depth,n=this.$from,r=this.close(e<0?this.$to:n.doc.resolve(e));if(!r)return null;let o=this.placed,i=n.depth,s=r.depth;for(;i&&s&&1==o.childCount;)o=o.firstChild.content,i--,s--;let a=new Wn(o,i,s);return e>-1?new Yr(n.pos,e,this.$to.pos,this.$to.end(),a,t):a.size||n.pos!=this.$to.pos?new Gr(n.pos,r.pos,a):null}findFittable(){for(let e=1;e<=2;e++)for(let t=this.unplaced.openStart;t>=0;t--){let n,r=null;t?(r=ho(this.unplaced.content,t-1).firstChild,n=r.content):n=this.unplaced.content;let o=n.firstChild;for(let i=this.depth;i>=0;i--){let n,{type:s,match:a}=this.frontier[i],l=null;if(1==e&&(o?a.matchType(o.type)||(l=a.fillBefore(jn.from(o),!1)):r&&s.compatibleContent(r.type)))return{sliceDepth:t,frontierDepth:i,parent:r,inject:l};if(2==e&&o&&(n=a.findWrapping(o.type)))return{sliceDepth:t,frontierDepth:i,parent:r,wrap:n};if(r&&a.matchType(r.type))break}}}openMore(){let{content:e,openStart:t,openEnd:n}=this.unplaced,r=ho(e,t);return!(!r.childCount||r.firstChild.isLeaf)&&(this.unplaced=new Wn(e,t+1,Math.max(n,r.size+t>=e.size-n?t+1:0)),!0)}dropNode(){let{content:e,openStart:t,openEnd:n}=this.unplaced,r=ho(e,t);if(r.childCount<=1&&t>0){let o=e.size-t<=t+r.size;this.unplaced=new Wn(co(e,t-1,1),t-1,o?t-1:n)}else this.unplaced=new Wn(co(e,t,1),t,n)}placeNodes({sliceDepth:e,frontierDepth:t,parent:n,inject:r,wrap:o}){for(;this.depth>t;)this.closeFrontierNode();if(o)for(let f=0;f<o.length;f++)this.openFrontierNode(o[f]);let i=this.unplaced,s=n?n.content:i.content,a=i.openStart-e,l=0,u=[],{match:c,type:d}=this.frontier[t];if(r){for(let e=0;e<r.childCount;e++)u.push(r.child(e));c=c.matchFragment(r)}let p=s.size+e-(i.content.size-i.openEnd);for(;l<s.childCount;){let e=s.child(l),t=c.matchType(e.type);if(!t)break;l++,(l>1||0==a||e.content.size)&&(c=t,u.push(fo(e.mark(d.allowedMarks(e.marks)),1==l?a:0,l==s.childCount?p:-1)))}let h=l==s.childCount;h||(p=-1),this.placed=po(this.placed,t,jn.from(u)),this.frontier[t].match=c,h&&p<0&&n&&n.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let f=0,m=s;f<p;f++){let e=m.lastChild;this.frontier.push({type:e.type,match:e.contentMatchAt(e.childCount)}),m=e.content}this.unplaced=h?0==e?Wn.empty:new Wn(co(i.content,e-1,1),e-1,p<0?i.openEnd:e-1):new Wn(co(i.content,e,l),i.openStart,i.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e,t=this.frontier[this.depth];if(!t.type.isTextblock||!mo(this.$to,this.$to.depth,t.type,t.match,!1)||this.$to.depth==this.depth&&(e=this.findCloseLevel(this.$to))&&e.depth==this.depth)return-1;let{depth:n}=this.$to,r=this.$to.after(n);for(;n>1&&r==this.$to.end(--n);)++r;return r}findCloseLevel(e){e:for(let t=Math.min(this.depth,e.depth);t>=0;t--){let{match:n,type:r}=this.frontier[t],o=t<e.depth&&e.end(t+1)==e.pos+(e.depth-(t+1)),i=mo(e,t,r,n,o);if(i){for(let n=t-1;n>=0;n--){let{match:t,type:r}=this.frontier[n],o=mo(e,n,r,t,!0);if(!o||o.childCount)continue e}return{depth:t,fit:i,move:o?e.doc.resolve(e.after(t+1)):e}}}}close(e){let t=this.findCloseLevel(e);if(!t)return null;for(;this.depth>t.depth;)this.closeFrontierNode();t.fit.childCount&&(this.placed=po(this.placed,t.depth,t.fit)),e=t.move;for(let n=t.depth+1;n<=e.depth;n++){let t=e.node(n),r=t.type.contentMatch.fillBefore(t.content,!0,e.index(n));this.openFrontierNode(t.type,t.attrs,r)}return e}openFrontierNode(e,t=null,n){let r=this.frontier[this.depth];r.match=r.match.matchType(e),this.placed=po(this.placed,this.depth,jn.from(e.create(t,n))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let e=this.frontier.pop().match.fillBefore(jn.empty,!0);e.childCount&&(this.placed=po(this.placed,this.frontier.length,e))}}function co(e,t,n){return 0==t?e.cutByIndex(n,e.childCount):e.replaceChild(0,e.firstChild.copy(co(e.firstChild.content,t-1,n)))}function po(e,t,n){return 0==t?e.append(n):e.replaceChild(e.childCount-1,e.lastChild.copy(po(e.lastChild.content,t-1,n)))}function ho(e,t){for(let n=0;n<t;n++)e=e.firstChild.content;return e}function fo(e,t,n){if(t<=0)return e;let r=e.content;return t>1&&(r=r.replaceChild(0,fo(r.firstChild,t-1,1==r.childCount?n-1:0))),t>0&&(r=e.type.contentMatch.fillBefore(r).append(r),n<=0&&(r=r.append(e.type.contentMatch.matchFragment(r).fillBefore(jn.empty,!0)))),e.copy(r)}function mo(e,t,n,r,o){let i=e.node(t),s=o?e.indexAfter(t):e.index(t);if(s==i.childCount&&!n.compatibleContent(i.type))return null;let a=r.fillBefore(i.content,!0,s);return a&&!function(e,t,n){for(let r=n;r<t.childCount;r++)if(!e.allowsMarks(t.child(r).marks))return!0;return!1}(n,i.content,s)?a:null}function go(e){return e.spec.defining||e.spec.definingForContent}function yo(e,t,n,r,o){if(t<n){let o=e.firstChild;e=e.replaceChild(0,o.copy(yo(o.content,t+1,n,r,o)))}if(t>r){let t=o.contentMatchAt(0),n=t.fillBefore(e).append(e);e=n.append(t.matchFragment(n).fillBefore(jn.empty,!0))}return e}function vo(e,t){let n=[];for(let r=Math.min(e.depth,t.depth);r>=0;r--){let o=e.start(r);if(o<e.pos-(e.depth-r)||t.end(r)>t.pos+(t.depth-r)||e.node(r).type.spec.isolating||t.node(r).type.spec.isolating)break;(o==t.start(r)||r==e.depth&&r==t.depth&&e.parent.inlineContent&&t.parent.inlineContent&&r&&t.start(r-1)==o-1)&&n.push(r)}return n}let bo=class extends Error{};bo=function e(t){let n=Error.call(this,t);return n.__proto__=e.prototype,n},(bo.prototype=Object.create(Error.prototype)).constructor=bo,bo.prototype.name="TransformError";class Do{constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new Kr}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let t=this.maybeStep(e);if(t.failed)throw new bo(t.failed);return this}maybeStep(e){let t=e.apply(this.doc);return t.failed||this.addStep(e,t.doc),t}get docChanged(){return this.steps.length>0}addStep(e,t){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=t}replace(e,t=e,n=Wn.empty){let r=ao(this.doc,e,t,n);return r&&this.step(r),this}replaceWith(e,t,n){return this.replace(e,t,new Wn(jn.from(n),0,0))}delete(e,t){return this.replace(e,t,Wn.empty)}insert(e,t){return this.replaceWith(e,e,t)}replaceRange(e,t,n){return function(e,t,n,r){if(!r.size)return e.deleteRange(t,n);let o=e.doc.resolve(t),i=e.doc.resolve(n);if(lo(o,i,r))return e.step(new Gr(t,n,r));let s=vo(o,e.doc.resolve(n));0==s[s.length-1]&&s.pop();let a=-(o.depth+1);s.unshift(a);for(let p=o.depth,h=o.pos-1;p>0;p--,h--){let e=o.node(p).type.spec;if(e.defining||e.definingAsContext||e.isolating)break;s.indexOf(p)>-1?a=p:o.before(p)==h&&s.splice(1,0,-p)}let l=s.indexOf(a),u=[],c=r.openStart;for(let p=r.content,h=0;;h++){let e=p.firstChild;if(u.push(e),h==r.openStart)break;p=e.content}for(let p=c-1;p>=0;p--){let e=u[p].type,t=go(e);if(t&&o.node(l).type!=e)c=p;else if(t||!e.isTextblock)break}for(let p=r.openStart;p>=0;p--){let t=(p+c+1)%(r.openStart+1),a=u[t];if(a)for(let u=0;u<s.length;u++){let c=s[(u+l)%s.length],d=!0;c<0&&(d=!1,c=-c);let p=o.node(c-1),h=o.index(c-1);if(p.canReplaceWith(h,h,a.type,a.marks))return e.replace(o.before(c),d?i.after(c):n,new Wn(yo(r.content,0,r.openStart,t),t,r.openEnd))}}let d=e.steps.length;for(let p=s.length-1;p>=0&&(e.replace(t,n,r),!(e.steps.length>d));p--){let e=s[p];e<0||(t=o.before(e),n=i.after(e))}}(this,e,t,n),this}replaceRangeWith(e,t,n){return function(e,t,n,r){if(!r.isInline&&t==n&&e.doc.resolve(t).parent.content.size){let o=function(e,t,n){let r=e.resolve(t);if(r.parent.canReplaceWith(r.index(),r.index(),n))return t;if(0==r.parentOffset)for(let o=r.depth-1;o>=0;o--){let e=r.index(o);if(r.node(o).canReplaceWith(e,e,n))return r.before(o+1);if(e>0)return null}if(r.parentOffset==r.parent.content.size)for(let o=r.depth-1;o>=0;o--){let e=r.indexAfter(o);if(r.node(o).canReplaceWith(e,e,n))return r.after(o+1);if(e<r.node(o).childCount)return null}return null}(e.doc,t,r.type);null!=o&&(t=n=o)}e.replaceRange(t,n,new Wn(jn.from(r),0,0))}(this,e,t,n),this}deleteRange(e,t){return function(e,t,n){let r=e.doc.resolve(t),o=e.doc.resolve(n),i=vo(r,o);for(let s=0;s<i.length;s++){let t=i[s],n=s==i.length-1;if(n&&0==t||r.node(t).type.contentMatch.validEnd)return e.delete(r.start(t),o.end(t));if(t>0&&(n||r.node(t-1).canReplace(r.index(t-1),o.indexAfter(t-1))))return e.delete(r.before(t),o.after(t))}for(let s=1;s<=r.depth&&s<=o.depth;s++)if(t-r.start(s)==r.depth-s&&n>r.end(s)&&o.end(s)-n!=o.depth-s)return e.delete(r.before(s),n);e.delete(t,n)}(this,e,t),this}lift(e,t){return function(e,t,n){let{$from:r,$to:o,depth:i}=t,s=r.before(i+1),a=o.after(i+1),l=s,u=a,c=jn.empty,d=0;for(let f=i,m=!1;f>n;f--)m||r.index(f)>0?(m=!0,c=jn.from(r.node(f).copy(c)),d++):l--;let p=jn.empty,h=0;for(let f=i,m=!1;f>n;f--)m||o.after(f+1)<o.end(f)?(m=!0,p=jn.from(o.node(f).copy(p)),h++):u++;e.step(new Yr(l,u,s,a,new Wn(c.append(p),d,h),c.size-d,!0))}(this,e,t),this}join(e,t=1){return function(e,t,n){let r=new Gr(t-n,t+n,Wn.empty,!0);e.step(r)}(this,e,t),this}wrap(e,t){return function(e,t,n){let r=jn.empty;for(let s=n.length-1;s>=0;s--){if(r.size){let e=n[s].type.contentMatch.matchFragment(r);if(!e||!e.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}r=jn.from(n[s].type.create(n[s].attrs,r))}let o=t.start,i=t.end;e.step(new Yr(o,i,o,i,new Wn(r,0,0),n.length,!0))}(this,e,t),this}setBlockType(e,t=e,n,r=null){return function(e,t,n,r,o){if(!r.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let i=e.steps.length;e.doc.nodesBetween(t,n,((t,n)=>{if(t.isTextblock&&!t.hasMarkup(r,o)&&function(e,t,n){let r=e.resolve(t),o=r.index();return r.parent.canReplaceWith(o,o+1,n)}(e.doc,e.mapping.slice(i).map(n),r)){e.clearIncompatible(e.mapping.slice(i).map(n,1),r);let s=e.mapping.slice(i),a=s.map(n,1),l=s.map(n+t.nodeSize,1);return e.step(new Yr(a,l,a+1,l-1,new Wn(jn.from(r.create(o,null,t.marks)),0,0),1,!0)),!1}}))}(this,e,t,n,r),this}setNodeMarkup(e,t,n=null,r=[]){return function(e,t,n,r,o){let i=e.doc.nodeAt(t);if(!i)throw new RangeError("No node at given position");n||(n=i.type);let s=n.create(r,null,o||i.marks);if(i.isLeaf)return e.replaceWith(t,t+i.nodeSize,s);if(!n.validContent(i.content))throw new RangeError("Invalid content for node type "+n.name);e.step(new Yr(t,t+i.nodeSize,t+1,t+i.nodeSize-1,new Wn(jn.from(s),0,0),1,!0))}(this,e,t,n,r),this}split(e,t=1,n){return function(e,t,n=1,r){let o=e.doc.resolve(t),i=jn.empty,s=jn.empty;for(let a=o.depth,l=o.depth-n,u=n-1;a>l;a--,u--){i=jn.from(o.node(a).copy(i));let e=r&&r[u];s=jn.from(e?e.type.create(e.attrs,s):o.node(a).copy(s))}e.step(new Gr(t,t,new Wn(i.append(s),n,n),!0))}(this,e,t,n),this}addMark(e,t,n){return function(e,t,n,r){let o,i,s=[],a=[];e.doc.nodesBetween(t,n,((e,l,u)=>{if(!e.isInline)return;let c=e.marks;if(!r.isInSet(c)&&u.type.allowsMarkType(r.type)){let u=Math.max(l,t),d=Math.min(l+e.nodeSize,n),p=r.addToSet(c);for(let e=0;e<c.length;e++)c[e].isInSet(p)||(o&&o.to==u&&o.mark.eq(c[e])?o.to=d:s.push(o=new Jr(u,d,c[e])));i&&i.to==u?i.to=d:a.push(i=new Zr(u,d,r))}})),s.forEach((t=>e.step(t))),a.forEach((t=>e.step(t)))}(this,e,t,n),this}removeMark(e,t,n){return function(e,t,n,r){let o=[],i=0;e.doc.nodesBetween(t,n,((e,s)=>{if(!e.isInline)return;i++;let a=null;if(r instanceof kr){let t,n=e.marks;for(;t=r.isInSet(n);)(a||(a=[])).push(t),n=t.removeFromSet(n)}else r?r.isInSet(e.marks)&&(a=[r]):a=e.marks;if(a&&a.length){let r=Math.min(s+e.nodeSize,n);for(let e=0;e<a.length;e++){let n,l=a[e];for(let e=0;e<o.length;e++){let t=o[e];t.step==i-1&&l.eq(o[e].style)&&(n=t)}n?(n.to=r,n.step=i):o.push({style:l,from:Math.max(s,t),to:r,step:i})}}})),o.forEach((t=>e.step(new Jr(t.from,t.to,t.style))))}(this,e,t,n),this}clearIncompatible(e,t,n){return function(e,t,n,r=n.contentMatch){let o=e.doc.nodeAt(t),i=[],s=t+1;for(let a=0;a<o.childCount;a++){let t=o.child(a),l=s+t.nodeSize,u=r.matchType(t.type);if(u){r=u;for(let r=0;r<t.marks.length;r++)n.allowsMarkType(t.marks[r].type)||e.step(new Jr(s,l,t.marks[r]))}else i.push(new Gr(s,l,Wn.empty));s=l}if(!r.validEnd){let t=r.fillBefore(jn.empty,!0);e.replace(s,s,new Wn(t,0,0))}for(let a=i.length-1;a>=0;a--)e.step(i[a])}(this,e,t,n),this}}const Co=Object.create(null);class wo{constructor(e,t,n){this.$anchor=e,this.$head=t,this.ranges=n||[new Eo(e.min(t),e.max(t))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let t=0;t<e.length;t++)if(e[t].$from.pos!=e[t].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e,t=Wn.empty){let n=t.content.lastChild,r=null;for(let s=0;s<t.openEnd;s++)r=n,n=n.lastChild;let o=e.steps.length,i=this.ranges;for(let s=0;s<i.length;s++){let{$from:a,$to:l}=i[s],u=e.mapping.slice(o);e.replaceRange(u.map(a.pos),u.map(l.pos),s?Wn.empty:t),0==s&&No(e,o,(n?n.isInline:r&&r.isTextblock)?-1:1)}}replaceWith(e,t){let n=e.steps.length,r=this.ranges;for(let o=0;o<r.length;o++){let{$from:i,$to:s}=r[o],a=e.mapping.slice(n),l=a.map(i.pos),u=a.map(s.pos);o?e.deleteRange(l,u):(e.replaceRangeWith(l,u,t),No(e,n,t.isInline?-1:1))}}static findFrom(e,t,n=!1){let r=e.parent.inlineContent?new Ao(e):Bo(e.node(0),e.parent,e.pos,e.index(),t,n);if(r)return r;for(let o=e.depth-1;o>=0;o--){let r=t<0?Bo(e.node(0),e.node(o),e.before(o+1),e.index(o),t,n):Bo(e.node(0),e.node(o),e.after(o+1),e.index(o)+1,t,n);if(r)return r}return null}static near(e,t=1){return this.findFrom(e,t)||this.findFrom(e,-t)||new Oo(e.node(0))}static atStart(e){return Bo(e,e,0,0,1)||new Oo(e)}static atEnd(e){return Bo(e,e,e.content.size,e.childCount,-1)||new Oo(e)}static fromJSON(e,t){if(!t||!t.type)throw new RangeError("Invalid input for Selection.fromJSON");let n=Co[t.type];if(!n)throw new RangeError(`No selection type ${t.type} defined`);return n.fromJSON(e,t)}static jsonID(e,t){if(e in Co)throw new RangeError("Duplicate use of selection JSON ID "+e);return Co[e]=t,t.prototype.jsonID=e,t}getBookmark(){return Ao.between(this.$anchor,this.$head).getBookmark()}}wo.prototype.visible=!0;class Eo{constructor(e,t){this.$from=e,this.$to=t}}let xo=!1;function ko(e){xo||e.parent.inlineContent||(xo=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+e.parent.type.name+")"))}class Ao extends wo{constructor(e,t=e){ko(e),ko(t),super(e,t)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,t){let n=e.resolve(t.map(this.head));if(!n.parent.inlineContent)return wo.near(n);let r=e.resolve(t.map(this.anchor));return new Ao(r.parent.inlineContent?r:n,n)}replace(e,t=Wn.empty){if(super.replace(e,t),t==Wn.empty){let t=this.$from.marksAcross(this.$to);t&&e.ensureMarks(t)}}eq(e){return e instanceof Ao&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new So(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,t){if("number"!=typeof t.anchor||"number"!=typeof t.head)throw new RangeError("Invalid input for TextSelection.fromJSON");return new Ao(e.resolve(t.anchor),e.resolve(t.head))}static create(e,t,n=t){let r=e.resolve(t);return new this(r,n==t?r:e.resolve(n))}static between(e,t,n){let r=e.pos-t.pos;if(n&&!r||(n=r>=0?1:-1),!t.parent.inlineContent){let e=wo.findFrom(t,n,!0)||wo.findFrom(t,-n,!0);if(!e)return wo.near(t,n);t=e.$head}return e.parent.inlineContent||(0==r||(e=(wo.findFrom(e,-n,!0)||wo.findFrom(e,n,!0)).$anchor).pos<t.pos!=r<0)&&(e=t),new Ao(e,t)}}wo.jsonID("text",Ao);class So{constructor(e,t){this.anchor=e,this.head=t}map(e){return new So(e.map(this.anchor),e.map(this.head))}resolve(e){return Ao.between(e.resolve(this.anchor),e.resolve(this.head))}}class Mo extends wo{constructor(e){let t=e.nodeAfter,n=e.node(0).resolve(e.pos+t.nodeSize);super(e,n),this.node=t}map(e,t){let{deleted:n,pos:r}=t.mapResult(this.anchor),o=e.resolve(r);return n?wo.near(o):new Mo(o)}content(){return new Wn(jn.from(this.node),0,0)}eq(e){return e instanceof Mo&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new Fo(this.anchor)}static fromJSON(e,t){if("number"!=typeof t.anchor)throw new RangeError("Invalid input for NodeSelection.fromJSON");return new Mo(e.resolve(t.anchor))}static create(e,t){return new Mo(e.resolve(t))}static isSelectable(e){return!e.isText&&!1!==e.type.spec.selectable}}Mo.prototype.visible=!1,wo.jsonID("node",Mo);class Fo{constructor(e){this.anchor=e}map(e){let{deleted:t,pos:n}=e.mapResult(this.anchor);return t?new So(n,n):new Fo(n)}resolve(e){let t=e.resolve(this.anchor),n=t.nodeAfter;return n&&Mo.isSelectable(n)?new Mo(t):wo.near(t)}}class Oo extends wo{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e,t=Wn.empty){if(t==Wn.empty){e.delete(0,e.doc.content.size);let t=wo.atStart(e.doc);t.eq(e.selection)||e.setSelection(t)}else super.replace(e,t)}toJSON(){return{type:"all"}}static fromJSON(e){return new Oo(e)}map(e){return new Oo(e)}eq(e){return e instanceof Oo}getBookmark(){return To}}wo.jsonID("all",Oo);const To={map(){return this},resolve:e=>new Oo(e)};function Bo(e,t,n,r,o,i=!1){if(t.inlineContent)return Ao.create(e,n);for(let s=r-(o>0?0:1);o>0?s<t.childCount:s>=0;s+=o){let r=t.child(s);if(r.isAtom){if(!i&&Mo.isSelectable(r))return Mo.create(e,n-(o<0?r.nodeSize:0))}else{let t=Bo(e,r,n+o,o<0?r.childCount:0,o,i);if(t)return t}n+=r.nodeSize*o}return null}function No(e,t,n){let r=e.steps.length-1;if(r<t)return;let o,i=e.steps[r];(i instanceof Gr||i instanceof Yr)&&(e.mapping.maps[r].forEach(((e,t,n,r)=>{null==o&&(o=r)})),e.setSelection(wo.near(e.doc.resolve(o),n)))}function Ro(e,t){return t&&e?e.bind(t):e}class Io{constructor(e,t,n){this.name=e,this.init=Ro(t.init,n),this.apply=Ro(t.apply,n)}}new Io("doc",{init:e=>e.doc||e.schema.topNodeType.createAndFill(),apply:e=>e.doc}),new Io("selection",{init:(e,t)=>e.selection||wo.atStart(t.doc),apply:e=>e.selection}),new Io("storedMarks",{init:e=>e.storedMarks||null,apply:(e,t,n,r)=>r.selection.$cursor?e.storedMarks:null}),new Io("scrollToSelection",{init:()=>0,apply:(e,t)=>e.scrolledIntoView?t+1:t});function Po(e,t,n){for(let r in e){let o=e[r];o instanceof Function?o=o.bind(t):"handleDOMEvents"==r&&(o=Po(o,t,{})),n[r]=o}return n}class Lo{constructor(e){this.spec=e,this.props={},e.props&&Po(e.props,this,this.props),this.key=e.key?e.key.key:$o("plugin")}getState(e){return e[this.key]}}const zo=Object.create(null);function $o(e){return e in zo?e+"$"+ ++zo[e]:(zo[e]=0,e+"$")}class jo{constructor(e="key"){this.key=$o(e)}get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}}const _o=(e,t)=>!e.selection.empty&&(t&&t(e.tr.deleteSelection().scrollIntoView()),!0),Ho=(e,t,n)=>{let{$cursor:r}=e.selection;if(!r||(n?!n.endOfTextblock("backward",e):r.parentOffset>0))return!1;let o=qo(r);if(!o){let n=r.blockRange(),o=n&&eo(n);return null!=o&&(t&&t(e.tr.lift(n,o).scrollIntoView()),!0)}let i=o.nodeBefore;if(!i.type.spec.isolating&&ti(e,o,t))return!0;if(0==r.parent.content.size&&(Ko(i,"end")||Mo.isSelectable(i))){let n=ao(e.doc,r.before(),r.after(),Wn.empty);if(n&&n.slice.size<n.to-n.from){if(t){let r=e.tr.step(n);r.setSelection(Ko(i,"end")?wo.findFrom(r.doc.resolve(r.mapping.map(o.pos,-1)),-1):Mo.create(r.doc,o.pos-i.nodeSize)),t(r.scrollIntoView())}return!0}}return!(!i.isAtom||o.depth!=r.depth-1)&&(t&&t(e.tr.delete(o.pos-i.nodeSize,o.pos).scrollIntoView()),!0)};function Ko(e,t,n=!1){for(let r=e;r;r="start"==t?r.firstChild:r.lastChild){if(r.isTextblock)return!0;if(n&&1!=r.childCount)return!1}return!1}const Vo=(e,t,n)=>{let{$head:r,empty:o}=e.selection,i=r;if(!o)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("backward",e):r.parentOffset>0)return!1;i=qo(r)}let s=i&&i.nodeBefore;return!(!s||!Mo.isSelectable(s))&&(t&&t(e.tr.setSelection(Mo.create(e.doc,i.pos-s.nodeSize)).scrollIntoView()),!0)};function qo(e){if(!e.parent.type.spec.isolating)for(let t=e.depth-1;t>=0;t--){if(e.index(t)>0)return e.doc.resolve(e.before(t+1));if(e.node(t).type.spec.isolating)break}return null}const Wo=(e,t,n)=>{let{$cursor:r}=e.selection;if(!r||(n?!n.endOfTextblock("forward",e):r.parentOffset<r.parent.content.size))return!1;let o=Zo(r);if(!o)return!1;let i=o.nodeAfter;if(ti(e,o,t))return!0;if(0==r.parent.content.size&&(Ko(i,"start")||Mo.isSelectable(i))){let n=ao(e.doc,r.before(),r.after(),Wn.empty);if(n&&n.slice.size<n.to-n.from){if(t){let r=e.tr.step(n);r.setSelection(Ko(i,"start")?wo.findFrom(r.doc.resolve(r.mapping.map(o.pos)),1):Mo.create(r.doc,r.mapping.map(o.pos))),t(r.scrollIntoView())}return!0}}return!(!i.isAtom||o.depth!=r.depth-1)&&(t&&t(e.tr.delete(o.pos,o.pos+i.nodeSize).scrollIntoView()),!0)},Uo=(e,t,n)=>{let{$head:r,empty:o}=e.selection,i=r;if(!o)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("forward",e):r.parentOffset<r.parent.content.size)return!1;i=Zo(r)}let s=i&&i.nodeAfter;return!(!s||!Mo.isSelectable(s))&&(t&&t(e.tr.setSelection(Mo.create(e.doc,i.pos)).scrollIntoView()),!0)};function Zo(e){if(!e.parent.type.spec.isolating)for(let t=e.depth-1;t>=0;t--){let n=e.node(t);if(e.index(t)+1<n.childCount)return e.doc.resolve(e.after(t+1));if(n.type.spec.isolating)break}return null}const Jo=(e,t)=>{let{$head:n,$anchor:r}=e.selection;return!(!n.parent.type.spec.code||!n.sameParent(r))&&(t&&t(e.tr.insertText("\n").scrollIntoView()),!0)};function Go(e){for(let t=0;t<e.edgeCount;t++){let{type:n}=e.edge(t);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}const Yo=(e,t)=>{let{$head:n,$anchor:r}=e.selection;if(!n.parent.type.spec.code||!n.sameParent(r))return!1;let o=n.node(-1),i=n.indexAfter(-1),s=Go(o.contentMatchAt(i));if(!s||!o.canReplaceWith(i,i,s))return!1;if(t){let r=n.after(),o=e.tr.replaceWith(r,r,s.createAndFill());o.setSelection(wo.near(o.doc.resolve(r),1)),t(o.scrollIntoView())}return!0},Xo=(e,t)=>{let n=e.selection,{$from:r,$to:o}=n;if(n instanceof Oo||r.parent.inlineContent||o.parent.inlineContent)return!1;let i=Go(o.parent.contentMatchAt(o.indexAfter()));if(!i||!i.isTextblock)return!1;if(t){let n=(!r.parentOffset&&o.index()<o.parent.childCount?r:o).pos,s=e.tr.insert(n,i.createAndFill());s.setSelection(Ao.create(s.doc,n+1)),t(s.scrollIntoView())}return!0},Qo=(e,t)=>{let{$cursor:n}=e.selection;if(!n||n.parent.content.size)return!1;if(n.depth>1&&n.after()!=n.end(-1)){let r=n.before();if(ro(e.doc,r))return t&&t(e.tr.split(r).scrollIntoView()),!0}let r=n.blockRange(),o=r&&eo(r);return null!=o&&(t&&t(e.tr.lift(r,o).scrollIntoView()),!0)},ei=(e,t)=>{let{$from:n,$to:r}=e.selection;if(e.selection instanceof Mo&&e.selection.node.isBlock)return!(!n.parentOffset||!ro(e.doc,n.pos))&&(t&&t(e.tr.split(n.pos).scrollIntoView()),!0);if(!n.parent.isBlock)return!1;if(t){let o=r.parentOffset==r.parent.content.size,i=e.tr;(e.selection instanceof Ao||e.selection instanceof Oo)&&i.deleteSelection();let s=0==n.depth?null:Go(n.node(-1).contentMatchAt(n.indexAfter(-1))),a=o&&s?[{type:s}]:void 0,l=ro(i.doc,i.mapping.map(n.pos),1,a);if(a||l||!ro(i.doc,i.mapping.map(n.pos),1,s?[{type:s}]:void 0)||(s&&(a=[{type:s}]),l=!0),l&&(i.split(i.mapping.map(n.pos),1,a),!o&&!n.parentOffset&&n.parent.type!=s)){let e=i.mapping.map(n.before()),t=i.doc.resolve(e);s&&n.node(-1).canReplaceWith(t.index(),t.index()+1,s)&&i.setNodeMarkup(i.mapping.map(n.before()),s)}t(i.scrollIntoView())}return!0};function ti(e,t,n){let r,o,i=t.nodeBefore,s=t.nodeAfter;if(i.type.spec.isolating||s.type.spec.isolating)return!1;if(function(e,t,n){let r=t.nodeBefore,o=t.nodeAfter,i=t.index();return!(!(r&&o&&r.type.compatibleContent(o.type))||(!r.content.size&&t.parent.canReplace(i-1,i)?(n&&n(e.tr.delete(t.pos-r.nodeSize,t.pos).scrollIntoView()),0):!t.parent.canReplace(i,i+1)||!o.isTextblock&&!oo(e.doc,t.pos)||(n&&n(e.tr.clearIncompatible(t.pos,r.type,r.contentMatchAt(r.childCount)).join(t.pos).scrollIntoView()),0)))}(e,t,n))return!0;let a=t.parent.canReplace(t.index(),t.index()+1);if(a&&(r=(o=i.contentMatchAt(i.childCount)).findWrapping(s.type))&&o.matchType(r[0]||s.type).validEnd){if(n){let o=t.pos+s.nodeSize,a=jn.empty;for(let e=r.length-1;e>=0;e--)a=jn.from(r[e].create(null,a));a=jn.from(i.copy(a));let l=e.tr.step(new Yr(t.pos-1,o,t.pos,o,new Wn(a,1,0),r.length,!0)),u=o+2*r.length;oo(l.doc,u)&&l.join(u),n(l.scrollIntoView())}return!0}let l=wo.findFrom(t,1),u=l&&l.$from.blockRange(l.$to),c=u&&eo(u);if(null!=c&&c>=t.depth)return n&&n(e.tr.lift(u,c).scrollIntoView()),!0;if(a&&Ko(s,"start",!0)&&Ko(i,"end")){let r=i,o=[];for(;o.push(r),!r.isTextblock;)r=r.lastChild;let a=s,l=1;for(;!a.isTextblock;a=a.firstChild)l++;if(r.canReplace(r.childCount,r.childCount,a.content)){if(n){let r=jn.empty;for(let e=o.length-1;e>=0;e--)r=jn.from(o[e].copy(r));n(e.tr.step(new Yr(t.pos-o.length,t.pos+s.nodeSize,t.pos+l,t.pos+s.nodeSize-l,new Wn(r,o.length,0),0,!0)).scrollIntoView())}return!0}}return!1}function ni(e){return function(t,n){let r=t.selection,o=e<0?r.$from:r.$to,i=o.depth;for(;o.node(i).isInline;){if(!i)return!1;i--}return!!o.node(i).isTextblock&&(n&&n(t.tr.setSelection(Ao.create(t.doc,e<0?o.start(i):o.end(i)))),!0)}}const ri=ni(-1),oi=ni(1);function ii(e,t=null){return function(n,r){let{from:o,to:i}=n.selection,s=!1;return n.doc.nodesBetween(o,i,((r,o)=>{if(s)return!1;if(r.isTextblock&&!r.hasMarkup(e,t))if(r.type==e)s=!0;else{let t=n.doc.resolve(o),r=t.index();s=t.parent.canReplaceWith(r,r+1,e)}})),!!s&&(r&&r(n.tr.setBlockType(o,i,e,t).scrollIntoView()),!0)}}function si(...e){return function(t,n,r){for(let o=0;o<e.length;o++)if(e[o](t,n,r))return!0;return!1}}let ai=si(_o,Ho,Vo),li=si(_o,Wo,Uo);const ui={Enter:si(Jo,Xo,Qo,ei),"Mod-Enter":Yo,Backspace:ai,"Mod-Backspace":ai,"Shift-Backspace":ai,Delete:li,"Mod-Delete":li,"Mod-a":(e,t)=>(t&&t(e.tr.setSelection(new Oo(e.doc))),!0)},ci={"Ctrl-h":ui.Backspace,"Alt-Backspace":ui["Mod-Backspace"],"Ctrl-d":ui.Delete,"Ctrl-Alt-Backspace":ui["Mod-Delete"],"Alt-Delete":ui["Mod-Delete"],"Alt-d":ui["Mod-Delete"],"Ctrl-a":ri,"Ctrl-e":oi};for(let os in ui)ci[os]=ui[os];"undefined"!=typeof navigator?/Mac|iP(hone|[oa]d)/.test(navigator.platform):!("undefined"==typeof os||!os.platform)&&os.platform();function di(e,t=null){return function(n,r){let{$from:o,$to:i}=n.selection,s=o.blockRange(i),a=!1,l=s;if(!s)return!1;if(s.depth>=2&&o.node(s.depth-1).type.compatibleContent(e)&&0==s.startIndex){if(0==o.index(s.depth-1))return!1;let e=n.doc.resolve(s.start-2);l=new lr(e,e,s.depth),s.endIndex<s.parent.childCount&&(s=new lr(o,n.doc.resolve(i.end(s.depth)),s.depth)),a=!0}let u=to(l,e,t,s);return!!u&&(r&&r(function(e,t,n,r,o){let i=jn.empty;for(let c=n.length-1;c>=0;c--)i=jn.from(n[c].type.create(n[c].attrs,i));e.step(new Yr(t.start-(r?2:0),t.end,t.start,t.end,new Wn(i,0,0),n.length,!0));let s=0;for(let c=0;c<n.length;c++)n[c].type==o&&(s=c+1);let a=n.length-s,l=t.start+n.length-(r?2:0),u=t.parent;for(let c=t.startIndex,d=t.endIndex,p=!0;c<d;c++,p=!1)!p&&ro(e.doc,l,a)&&(e.split(l,a),l+=2*a),l+=u.child(c).nodeSize;return e}(n.tr,s,u,a,e).scrollIntoView()),!0)}}function pi(e){return function(t,n){let{$from:r,$to:o}=t.selection,i=r.blockRange(o,(t=>t.childCount>0&&t.firstChild.type==e));return!!i&&(!n||(r.node(i.depth-1).type==e?function(e,t,n,r){let o=e.tr,i=r.end,s=r.$to.end(r.depth);i<s&&(o.step(new Yr(i-1,s,i,s,new Wn(jn.from(n.create(null,r.parent.copy())),1,0),1,!0)),r=new lr(o.doc.resolve(r.$from.pos),o.doc.resolve(s),r.depth));return t(o.lift(r,eo(r)).scrollIntoView()),!0}(t,n,e,i):function(e,t,n){let r=e.tr,o=n.parent;for(let h=n.end,f=n.endIndex-1,m=n.startIndex;f>m;f--)h-=o.child(f).nodeSize,r.delete(h-1,h+1);let i=r.doc.resolve(n.start),s=i.nodeAfter;if(r.mapping.map(n.end)!=n.start+i.nodeAfter.nodeSize)return!1;let a=0==n.startIndex,l=n.endIndex==o.childCount,u=i.node(-1),c=i.index(-1);if(!u.canReplace(c+(a?0:1),c+1,s.content.append(l?jn.empty:jn.from(o))))return!1;let d=i.pos,p=d+s.nodeSize;return r.step(new Yr(d-(a?1:0),p+(l?1:0),d+1,p-1,new Wn((a?jn.empty:jn.from(o.copy(jn.empty))).append(l?jn.empty:jn.from(o.copy(jn.empty))),a?0:1,l?0:1),a?0:1)),t(r.scrollIntoView()),!0}(t,n,i)))}}function hi(e){const{state:t,transaction:n}=e;let{selection:r}=n,{doc:o}=n,{storedMarks:i}=n;return{...t,apply:t.apply.bind(t),applyTransaction:t.applyTransaction.bind(t),filterTransaction:t.filterTransaction,plugins:t.plugins,schema:t.schema,reconfigure:t.reconfigure.bind(t),toJSON:t.toJSON.bind(t),get storedMarks(){return i},get selection(){return r},get doc(){return o},get tr(){return r=n.selection,o=n.doc,i=n.storedMarks,n}}}class fi{constructor(e){this.editor=e.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=e.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:e,editor:t,state:n}=this,{view:r}=t,{tr:o}=n,i=this.buildProps(o);return Object.fromEntries(Object.entries(e).map((([e,t])=>[e,(...e)=>{const n=t(...e)(i);return o.getMeta("preventDispatch")||this.hasCustomState||r.dispatch(o),n}])))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(e,t=!0){const{rawCommands:n,editor:r,state:o}=this,{view:i}=r,s=[],a=!!e,l=e||o.tr,u={...Object.fromEntries(Object.entries(n).map((([e,n])=>[e,(...e)=>{const r=this.buildProps(l,t),o=n(...e)(r);return s.push(o),u}]))),run:()=>(a||!t||l.getMeta("preventDispatch")||this.hasCustomState||i.dispatch(l),s.every((e=>!0===e)))};return u}createCan(e){const{rawCommands:t,state:n}=this,r=void 0,o=e||n.tr,i=this.buildProps(o,r),s=Object.fromEntries(Object.entries(t).map((([e,t])=>[e,(...e)=>t(...e)({...i,dispatch:r})])));return{...s,chain:()=>this.createChain(o,r)}}buildProps(e,t=!0){const{rawCommands:n,editor:r,state:o}=this,{view:i}=r;o.storedMarks&&e.setStoredMarks(o.storedMarks);const s={tr:e,editor:r,view:i,state:hi({state:o,transaction:e}),dispatch:t?()=>{}:void 0,chain:()=>this.createChain(e),can:()=>this.createCan(e),get commands(){return Object.fromEntries(Object.entries(n).map((([e,t])=>[e,(...e)=>t(...e)(s)])))}};return s}}function mi(e,t,n){if(void 0===e.config[t]&&e.parent)return mi(e.parent,t,n);if("function"==typeof e.config[t]){return e.config[t].bind({...n,parent:e.parent?mi(e.parent,t,n):null})}return e.config[t]}function gi(e){return{baseExtensions:e.filter((e=>"extension"===e.type)),nodeExtensions:e.filter((e=>"node"===e.type)),markExtensions:e.filter((e=>"mark"===e.type))}}function yi(e,t){if("string"==typeof e){if(!t.nodes[e])throw Error(`There is no node type named '${e}'. Maybe you forgot to add the extension?`);return t.nodes[e]}return e}function vi(...e){return e.filter((e=>!!e)).reduce(((e,t)=>{const n={...e};return Object.entries(t).forEach((([e,t])=>{n[e]?n[e]="class"===e?[n[e],t].join(" "):"style"===e?[n[e],t].join("; "):t:n[e]=t})),n}),{})}function bi(e){return"function"==typeof e}function Di(e,t,...n){return bi(e)?t?e.bind(t)(...n):e(...n):e}function Ci(e){return"[object RegExp]"===Object.prototype.toString.call(e)}class wi{constructor(e){this.find=e.find,this.handler=e.handler}}class Ei{constructor(e){this.find=e.find,this.handler=e.handler}}function xi(e){return"Object"===function(e){return Object.prototype.toString.call(e).slice(8,-1)}(e)&&(e.constructor===Object&&Object.getPrototypeOf(e)===Object.prototype)}function ki(e,t){const n={...e};return xi(e)&&xi(t)&&Object.keys(t).forEach((r=>{xi(t[r])?r in e?n[r]=ki(e[r],t[r]):Object.assign(n,{[r]:t[r]}):Object.assign(n,{[r]:t[r]})})),n}class Ai{constructor(e={}){this.type="extension",this.name="extension",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=Di(mi(this,"addOptions",{name:this.name}))),this.storage=Di(mi(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new Ai(e)}configure(e={}){const t=this.extend();return t.options=ki(this.options,e),t.storage=Di(mi(t,"addStorage",{name:t.name,options:t.options})),t}extend(e={}){const t=new Ai(e);return t.parent=this,this.child=t,t.name=e.name?e.name:t.parent.name,e.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${t.name}".`),t.options=Di(mi(t,"addOptions",{name:t.name})),t.storage=Di(mi(t,"addStorage",{name:t.name,options:t.options})),t}}function Si(e,t,n){const{from:r,to:o}=t,{blockSeparator:i="\n\n",textSerializers:s={}}=n||{};let a="",l=!0;return e.nodesBetween(r,o,((e,n,u,c)=>{var d;const p=null==s?void 0:s[e.type.name];p?(e.isBlock&&!l&&(a+=i,l=!0),u&&(a+=p({node:e,pos:n,parent:u,index:c,range:t}))):e.isText?(a+=null===(d=null==e?void 0:e.text)||void 0===d?void 0:d.slice(Math.max(r,n)-n,o-n),l=!1):e.isBlock&&!l&&(a+=i,l=!0)})),a}function Mi(e){return Object.fromEntries(Object.entries(e.nodes).filter((([,e])=>e.spec.toText)).map((([e,t])=>[e,t.spec.toText])))}Ai.create({name:"clipboardTextSerializer",addProseMirrorPlugins(){return[new Lo({key:new jo("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:e}=this,{state:t,schema:n}=e,{doc:r,selection:o}=t,{ranges:i}=o,s=Math.min(...i.map((e=>e.$from.pos))),a=Math.max(...i.map((e=>e.$to.pos)));return Si(r,{from:s,to:a},{textSerializers:Mi(n)})}}})]}});function Fi(e,t,n={strict:!0}){const r=Object.keys(t);return!r.length||r.every((r=>n.strict?t[r]===e[r]:Ci(t[r])?t[r].test(e[r]):t[r]===e[r]))}function Oi(e,t,n={}){return e.find((e=>e.type===t&&Fi(e.attrs,n)))}function Ti(e,t,n={}){return!!Oi(e,t,n)}function Bi(e,t,n={}){if(!e||!t)return;let r=e.parent.childAfter(e.parentOffset);if(e.parentOffset===r.offset&&0!==r.offset&&(r=e.parent.childBefore(e.parentOffset)),!r.node)return;const o=Oi([...r.node.marks],t,n);if(!o)return;let i=r.index,s=e.start()+r.offset,a=i+1,l=s+r.node.nodeSize;for(Oi([...r.node.marks],t,n);i>0&&o.isInSet(e.parent.child(i-1).marks);)i-=1,s-=e.parent.child(i).nodeSize;for(;a<e.parent.childCount&&Ti([...e.parent.child(a).marks],t,n);)l+=e.parent.child(a).nodeSize,a+=1;return{from:s,to:l}}function Ni(e,t){if("string"==typeof e){if(!t.marks[e])throw Error(`There is no mark type named '${e}'. Maybe you forgot to add the extension?`);return t.marks[e]}return e}function Ri(e){return e&&"object"==typeof e&&!Array.isArray(e)&&!function(e){var t;return"class"===(null===(t=e.constructor)||void 0===t?void 0:t.toString().substring(0,5))}(e)}function Ii(e=0,t=0,n=0){return Math.min(Math.max(e,t),n)}function Pi(e,t=null){if(!t)return null;const n=wo.atStart(e),r=wo.atEnd(e);if("start"===t||!0===t)return n;if("end"===t)return r;const o=n.from,i=r.to;return"all"===t?Ao.create(e,Ii(0,o,i),Ii(e.content.size,o,i)):Ao.create(e,Ii(t,o,i),Ii(t,o,i))}function Li(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}function zi(e){const t=`<body>${e}</body>`;return(new window.DOMParser).parseFromString(t,"text/html").body}function $i(e,t,n){if(n={slice:!0,parseOptions:{},...n},"object"==typeof e&&null!==e)try{return Array.isArray(e)?jn.fromArray(e.map((e=>t.nodeFromJSON(e)))):t.nodeFromJSON(e)}catch(r){return console.warn("[tiptap warn]: Invalid content.","Passed value:",e,"Error:",r),$i("",t,n)}if("string"==typeof e){const r=Ar.fromSchema(t);return n.slice?r.parseSlice(zi(e),n.parseOptions).content:r.parse(zi(e),n.parseOptions)}return $i("",t,n)}function ji(){return"undefined"!=typeof navigator&&/Mac/.test(navigator.platform)}function _i(e,t,n={}){const{from:r,to:o,empty:i}=e.selection,s=t?yi(t,e.schema):null,a=[];e.doc.nodesBetween(r,o,((e,t)=>{if(e.isText)return;const n=Math.max(r,t),i=Math.min(o,t+e.nodeSize);a.push({node:e,from:n,to:i})}));const l=o-r,u=a.filter((e=>!s||s.name===e.node.type.name)).filter((e=>Fi(e.node.attrs,n,{strict:!1})));if(i)return!!u.length;return u.reduce(((e,t)=>e+t.to-t.from),0)>=l}function Hi(e,t){return t.nodes[e]?"node":t.marks[e]?"mark":null}function Ki(e,t){const n="string"==typeof t?[t]:t;return Object.keys(e).reduce(((t,r)=>(n.includes(r)||(t[r]=e[r]),t)),{})}function Vi(e,t,n={}){return $i(e,t,{slice:!1,parseOptions:n})}function qi(e,t){const n=Ni(t,e.schema),{from:r,to:o,empty:i}=e.selection,s=[];i?(e.storedMarks&&s.push(...e.storedMarks),s.push(...e.selection.$head.marks())):e.doc.nodesBetween(r,o,(e=>{s.push(...e.marks)}));const a=s.find((e=>e.type.name===n.name));return a?{...a.attrs}:{}}function Wi(e,t,n){return Object.fromEntries(Object.entries(n).filter((([n])=>{const r=e.find((e=>e.type===t&&e.name===n));return!!r&&r.attribute.keepOnSplit})))}function Ui(e,t){const n=e.storedMarks||e.selection.$to.parentOffset&&e.selection.$from.marks();if(n){const r=n.filter((e=>null==t?void 0:t.includes(e.type.name)));e.tr.ensureMarks(r)}}function Zi(e){return t=>function(e,t){for(let n=e.depth;n>0;n-=1){const r=e.node(n);if(t(r))return{pos:n>0?e.before(n):0,start:e.start(n),depth:n,node:r}}}(t.$from,e)}function Ji(e,t){const{nodeExtensions:n}=gi(t),r=n.find((t=>t.name===e));if(!r)return!1;const o=Di(mi(r,"group",{name:r.name,options:r.options,storage:r.storage}));return"string"==typeof o&&o.split(" ").includes("list")}const Gi=(e,t)=>{const n=Zi((e=>e.type===t))(e.selection);if(!n)return!0;const r=e.doc.resolve(Math.max(0,n.pos-1)).before(n.depth);if(void 0===r)return!0;const o=e.doc.nodeAt(r);return n.node.type!==(null==o?void 0:o.type)||!oo(e.doc,n.pos)||(e.join(n.pos),!0)},Yi=(e,t)=>{const n=Zi((e=>e.type===t))(e.selection);if(!n)return!0;const r=e.doc.resolve(n.start).after(n.depth);if(void 0===r)return!0;const o=e.doc.nodeAt(r);return n.node.type!==(null==o?void 0:o.type)||!oo(e.doc,r)||(e.join(r),!0)};function Xi(e,t,n={}){const{empty:r,ranges:o}=e.selection,i=t?Ni(t,e.schema):null;if(r)return!!(e.storedMarks||e.selection.$from.marks()).filter((e=>!i||i.name===e.type.name)).find((e=>Fi(e.attrs,n,{strict:!1})));let s=0;const a=[];if(o.forEach((({$from:t,$to:n})=>{const r=t.pos,o=n.pos;e.doc.nodesBetween(r,o,((e,t)=>{if(!e.isText&&!e.marks.length)return;const n=Math.max(r,t),i=Math.min(o,t+e.nodeSize);s+=i-n,a.push(...e.marks.map((e=>({mark:e,from:n,to:i}))))}))})),0===s)return!1;const l=a.filter((e=>!i||i.name===e.mark.type.name)).filter((e=>Fi(e.mark.attrs,n,{strict:!1}))).reduce(((e,t)=>e+t.to-t.from),0),u=a.filter((e=>!i||e.mark.type!==i&&e.mark.type.excludes(i))).reduce(((e,t)=>e+t.to-t.from),0);return(l>0?l+u:l)>=s}var Qi=Object.freeze({__proto__:null,blur:()=>({editor:e,view:t})=>(requestAnimationFrame((()=>{var n;e.isDestroyed||(t.dom.blur(),null===(n=null===window||void 0===window?void 0:window.getSelection())||void 0===n||n.removeAllRanges())})),!0),clearContent:(e=!1)=>({commands:t})=>t.setContent("",e),clearNodes:()=>({state:e,tr:t,dispatch:n})=>{const{selection:r}=t,{ranges:o}=r;return!n||(o.forEach((({$from:n,$to:r})=>{e.doc.nodesBetween(n.pos,r.pos,((e,n)=>{if(e.type.isText)return;const{doc:r,mapping:o}=t,i=r.resolve(o.map(n)),s=r.resolve(o.map(n+e.nodeSize)),a=i.blockRange(s);if(!a)return;const l=eo(a);if(e.type.isTextblock){const{defaultType:e}=i.parent.contentMatchAt(i.index());t.setNodeMarkup(a.start,e)}(l||0===l)&&t.lift(a,l)}))})),!0)},command:e=>t=>e(t),createParagraphNear:()=>({state:e,dispatch:t})=>Xo(e,t),deleteNode:e=>({tr:t,state:n,dispatch:r})=>{const o=yi(e,n.schema),i=t.selection.$anchor;for(let e=i.depth;e>0;e-=1){if(i.node(e).type===o){if(r){const n=i.before(e),r=i.after(e);t.delete(n,r).scrollIntoView()}return!0}}return!1},deleteRange:e=>({tr:t,dispatch:n})=>{const{from:r,to:o}=e;return n&&t.delete(r,o),!0},deleteSelection:()=>({state:e,dispatch:t})=>_o(e,t),enter:()=>({commands:e})=>e.keyboardShortcut("Enter"),exitCode:()=>({state:e,dispatch:t})=>Yo(e,t),extendMarkRange:(e,t={})=>({tr:n,state:r,dispatch:o})=>{const i=Ni(e,r.schema),{doc:s,selection:a}=n,{$from:l,from:u,to:c}=a;if(o){const e=Bi(l,i,t);if(e&&e.from<=u&&e.to>=c){const t=Ao.create(s,e.from,e.to);n.setSelection(t)}}return!0},first:e=>t=>{const n="function"==typeof e?e(t):e;for(let e=0;e<n.length;e+=1)if(n[e](t))return!0;return!1},focus:(e=null,t={})=>({editor:n,view:r,tr:o,dispatch:i})=>{t={scrollIntoView:!0,...t};const s=()=>{Li()&&r.dom.focus(),requestAnimationFrame((()=>{n.isDestroyed||(r.focus(),(null==t?void 0:t.scrollIntoView)&&n.commands.scrollIntoView())}))};if(r.hasFocus()&&null===e||!1===e)return!0;if(i&&null===e&&!(Ri(a=n.state.selection)&&a instanceof Ao))return s(),!0;var a;const l=Pi(o.doc,e)||n.state.selection,u=n.state.selection.eq(l);return i&&(u||o.setSelection(l),u&&o.storedMarks&&o.setStoredMarks(o.storedMarks),s()),!0},forEach:(e,t)=>n=>e.every(((e,r)=>t(e,{...n,index:r}))),insertContent:(e,t)=>({tr:n,commands:r})=>r.insertContentAt({from:n.selection.from,to:n.selection.to},e,t),insertContentAt:(e,t,n)=>({tr:r,dispatch:o,editor:i})=>{if(o){n={parseOptions:{},updateSelection:!0,...n};const o=$i(t,i.schema,{parseOptions:{preserveWhitespace:"full",...n.parseOptions}});if("<>"===o.toString())return!0;let{from:s,to:a}="number"==typeof e?{from:e,to:e}:e,l=!0,u=!0;if((o.toString().startsWith("<")?o:[o]).forEach((e=>{e.check(),l=!!l&&(e.isText&&0===e.marks.length),u=!!u&&e.isBlock})),s===a&&u){const{parent:e}=r.doc.resolve(s);e.isTextblock&&!e.type.spec.code&&!e.childCount&&(s-=1,a+=1)}l?r.insertText(t,s,a):r.replaceWith(s,a,o),n.updateSelection&&function(e,t,n){const r=e.steps.length-1;if(r<t)return;const o=e.steps[r];if(!(o instanceof Gr||o instanceof Yr))return;const i=e.mapping.maps[r];let s=0;i.forEach(((e,t,n,r)=>{0===s&&(s=r)})),e.setSelection(wo.near(e.doc.resolve(s),n))}(r,r.steps.length-1,-1)}return!0},joinBackward:()=>({state:e,dispatch:t})=>Ho(e,t),joinForward:()=>({state:e,dispatch:t})=>Wo(e,t),keyboardShortcut:e=>({editor:t,view:n,tr:r,dispatch:o})=>{const i=function(e){const t=e.split(/-(?!$)/);let n,r,o,i,s=t[t.length-1];"Space"===s&&(s=" ");for(let a=0;a<t.length-1;a+=1){const e=t[a];if(/^(cmd|meta|m)$/i.test(e))i=!0;else if(/^a(lt)?$/i.test(e))n=!0;else if(/^(c|ctrl|control)$/i.test(e))r=!0;else if(/^s(hift)?$/i.test(e))o=!0;else{if(!/^mod$/i.test(e))throw new Error(`Unrecognized modifier name: ${e}`);Li()||ji()?i=!0:r=!0}}return n&&(s=`Alt-${s}`),r&&(s=`Ctrl-${s}`),i&&(s=`Meta-${s}`),o&&(s=`Shift-${s}`),s}(e).split(/-(?!$)/),s=i.find((e=>!["Alt","Ctrl","Meta","Shift"].includes(e))),a=new KeyboardEvent("keydown",{key:"Space"===s?" ":s,altKey:i.includes("Alt"),ctrlKey:i.includes("Ctrl"),metaKey:i.includes("Meta"),shiftKey:i.includes("Shift"),bubbles:!0,cancelable:!0}),l=t.captureTransaction((()=>{n.someProp("handleKeyDown",(e=>e(n,a)))}));return null==l||l.steps.forEach((e=>{const t=e.map(r.mapping);t&&o&&r.maybeStep(t)})),!0},lift:(e,t={})=>({state:n,dispatch:r})=>!!_i(n,yi(e,n.schema),t)&&((e,t)=>{let{$from:n,$to:r}=e.selection,o=n.blockRange(r),i=o&&eo(o);return null!=i&&(t&&t(e.tr.lift(o,i).scrollIntoView()),!0)})(n,r),liftEmptyBlock:()=>({state:e,dispatch:t})=>Qo(e,t),liftListItem:e=>({state:t,dispatch:n})=>pi(yi(e,t.schema))(t,n),newlineInCode:()=>({state:e,dispatch:t})=>Jo(e,t),resetAttributes:(e,t)=>({tr:n,state:r,dispatch:o})=>{let i=null,s=null;const a=Hi("string"==typeof e?e:e.name,r.schema);return!!a&&("node"===a&&(i=yi(e,r.schema)),"mark"===a&&(s=Ni(e,r.schema)),o&&n.selection.ranges.forEach((e=>{r.doc.nodesBetween(e.$from.pos,e.$to.pos,((e,r)=>{i&&i===e.type&&n.setNodeMarkup(r,void 0,Ki(e.attrs,t)),s&&e.marks.length&&e.marks.forEach((o=>{s===o.type&&n.addMark(r,r+e.nodeSize,s.create(Ki(o.attrs,t)))}))}))})),!0)},scrollIntoView:()=>({tr:e,dispatch:t})=>(t&&e.scrollIntoView(),!0),selectAll:()=>({tr:e,commands:t})=>t.setTextSelection({from:0,to:e.doc.content.size}),selectNodeBackward:()=>({state:e,dispatch:t})=>Vo(e,t),selectNodeForward:()=>({state:e,dispatch:t})=>Uo(e,t),selectParentNode:()=>({state:e,dispatch:t})=>((e,t)=>{let n,{$from:r,to:o}=e.selection,i=r.sharedDepth(o);return 0!=i&&(n=r.before(i),t&&t(e.tr.setSelection(Mo.create(e.doc,n))),!0)})(e,t),selectTextblockEnd:()=>({state:e,dispatch:t})=>oi(e,t),selectTextblockStart:()=>({state:e,dispatch:t})=>ri(e,t),setContent:(e,t=!1,n={})=>({tr:r,editor:o,dispatch:i})=>{const{doc:s}=r,a=Vi(e,o.schema,n);return i&&r.replaceWith(0,s.content.size,a).setMeta("preventUpdate",!t),!0},setMark:(e,t={})=>({tr:n,state:r,dispatch:o})=>{const{selection:i}=n,{empty:s,ranges:a}=i,l=Ni(e,r.schema);if(o)if(s){const e=qi(r,l);n.addStoredMark(l.create({...e,...t}))}else a.forEach((e=>{const o=e.$from.pos,i=e.$to.pos;r.doc.nodesBetween(o,i,((e,r)=>{const s=Math.max(r,o),a=Math.min(r+e.nodeSize,i);e.marks.find((e=>e.type===l))?e.marks.forEach((e=>{l===e.type&&n.addMark(s,a,l.create({...e.attrs,...t}))})):n.addMark(s,a,l.create(t))}))}));return!0},setMeta:(e,t)=>({tr:n})=>(n.setMeta(e,t),!0),setNode:(e,t={})=>({state:n,dispatch:r,chain:o})=>{const i=yi(e,n.schema);return i.isTextblock?o().command((({commands:e})=>!!ii(i,t)(n)||e.clearNodes())).command((({state:e})=>ii(i,t)(e,r))).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},setNodeSelection:e=>({tr:t,dispatch:n})=>{if(n){const{doc:n}=t,r=wo.atStart(n).from,o=wo.atEnd(n).to,i=Ii(e,r,o),s=Mo.create(n,i);t.setSelection(s)}return!0},setTextSelection:e=>({tr:t,dispatch:n})=>{if(n){const{doc:n}=t,{from:r,to:o}="number"==typeof e?{from:e,to:e}:e,i=Ao.atStart(n).from,s=Ao.atEnd(n).to,a=Ii(r,i,s),l=Ii(o,i,s),u=Ao.create(n,a,l);t.setSelection(u)}return!0},sinkListItem:e=>({state:t,dispatch:n})=>{const r=yi(e,t.schema);return(o=r,function(e,t){let{$from:n,$to:r}=e.selection,i=n.blockRange(r,(e=>e.childCount>0&&e.firstChild.type==o));if(!i)return!1;let s=i.startIndex;if(0==s)return!1;let a=i.parent,l=a.child(s-1);if(l.type!=o)return!1;if(t){let n=l.lastChild&&l.lastChild.type==a.type,r=jn.from(n?o.create():null),s=new Wn(jn.from(o.create(null,jn.from(a.type.create(null,r)))),n?3:1,0),u=i.start,c=i.end;t(e.tr.step(new Yr(u-(n?3:1),c,u,c,s,1,!0)).scrollIntoView())}return!0})(t,n);var o},splitBlock:({keepMarks:e=!0}={})=>({tr:t,state:n,dispatch:r,editor:o})=>{const{selection:i,doc:s}=t,{$from:a,$to:l}=i,u=Wi(o.extensionManager.attributes,a.node().type.name,a.node().attrs);if(i instanceof Mo&&i.node.isBlock)return!(!a.parentOffset||!ro(s,a.pos))&&(r&&(e&&Ui(n,o.extensionManager.splittableMarks),t.split(a.pos).scrollIntoView()),!0);if(!a.parent.isBlock)return!1;if(r){const r=l.parentOffset===l.parent.content.size;i instanceof Ao&&t.deleteSelection();const s=0===a.depth?void 0:function(e){for(let t=0;t<e.edgeCount;t+=1){const{type:n}=e.edge(t);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}(a.node(-1).contentMatchAt(a.indexAfter(-1)));let c=r&&s?[{type:s,attrs:u}]:void 0,d=ro(t.doc,t.mapping.map(a.pos),1,c);if(c||d||!ro(t.doc,t.mapping.map(a.pos),1,s?[{type:s}]:void 0)||(d=!0,c=s?[{type:s,attrs:u}]:void 0),d&&(t.split(t.mapping.map(a.pos),1,c),s&&!r&&!a.parentOffset&&a.parent.type!==s)){const e=t.mapping.map(a.before()),n=t.doc.resolve(e);a.node(-1).canReplaceWith(n.index(),n.index()+1,s)&&t.setNodeMarkup(t.mapping.map(a.before()),s)}e&&Ui(n,o.extensionManager.splittableMarks),t.scrollIntoView()}return!0},splitListItem:e=>({tr:t,state:n,dispatch:r,editor:o})=>{var i;const s=yi(e,n.schema),{$from:a,$to:l}=n.selection,u=n.selection.node;if(u&&u.isBlock||a.depth<2||!a.sameParent(l))return!1;const c=a.node(-1);if(c.type!==s)return!1;const d=o.extensionManager.attributes;if(0===a.parent.content.size&&a.node(-1).childCount===a.indexAfter(-1)){if(2===a.depth||a.node(-3).type!==s||a.index(-2)!==a.node(-2).childCount-1)return!1;if(r){let e=jn.empty;const n=a.index(-1)?1:a.index(-2)?2:3;for(let t=a.depth-n;t>=a.depth-3;t-=1)e=jn.from(a.node(t).copy(e));const r=a.indexAfter(-1)<a.node(-2).childCount?1:a.indexAfter(-2)<a.node(-3).childCount?2:3,o=Wi(d,a.node().type.name,a.node().attrs),l=(null===(i=s.contentMatch.defaultType)||void 0===i?void 0:i.createAndFill(o))||void 0;e=e.append(jn.from(s.createAndFill(null,l)||void 0));const u=a.before(a.depth-(n-1));t.replace(u,a.after(-r),new Wn(e,4-n,0));let c=-1;t.doc.nodesBetween(u,t.doc.content.size,((e,t)=>{if(c>-1)return!1;e.isTextblock&&0===e.content.size&&(c=t+1)})),c>-1&&t.setSelection(Ao.near(t.doc.resolve(c))),t.scrollIntoView()}return!0}const p=l.pos===a.end()?c.contentMatchAt(0).defaultType:null,h=Wi(d,c.type.name,c.attrs),f=Wi(d,a.node().type.name,a.node().attrs);t.delete(a.pos,l.pos);const m=p?[{type:s,attrs:h},{type:p,attrs:f}]:[{type:s,attrs:h}];return!!ro(t.doc,a.pos,2)&&(r&&t.split(a.pos,2,m).scrollIntoView(),!0)},toggleList:(e,t)=>({editor:n,tr:r,state:o,dispatch:i,chain:s,commands:a,can:l})=>{const{extensions:u}=n.extensionManager,c=yi(e,o.schema),d=yi(t,o.schema),{selection:p}=o,{$from:h,$to:f}=p,m=h.blockRange(f);if(!m)return!1;const g=Zi((e=>Ji(e.type.name,u)))(p);if(m.depth>=1&&g&&m.depth-g.depth<=1){if(g.node.type===c)return a.liftListItem(d);if(Ji(g.node.type.name,u)&&c.validContent(g.node.content)&&i)return s().command((()=>(r.setNodeMarkup(g.pos,c),!0))).command((()=>Gi(r,c))).command((()=>Yi(r,c))).run()}return s().command((()=>!!l().wrapInList(c)||a.clearNodes())).wrapInList(c).command((()=>Gi(r,c))).command((()=>Yi(r,c))).run()},toggleMark:(e,t={},n={})=>({state:r,commands:o})=>{const{extendEmptyMarkRange:i=!1}=n,s=Ni(e,r.schema);return Xi(r,s,t)?o.unsetMark(s,{extendEmptyMarkRange:i}):o.setMark(s,t)},toggleNode:(e,t,n={})=>({state:r,commands:o})=>{const i=yi(e,r.schema),s=yi(t,r.schema);return _i(r,i,n)?o.setNode(s):o.setNode(i,n)},toggleWrap:(e,t={})=>({state:n,commands:r})=>{const o=yi(e,n.schema);return _i(n,o,t)?r.lift(o):r.wrapIn(o,t)},undoInputRule:()=>({state:e,dispatch:t})=>{const n=e.plugins;for(let r=0;r<n.length;r+=1){const o=n[r];let i;if(o.spec.isInputRules&&(i=o.getState(e))){if(t){const t=e.tr,n=i.transform;for(let e=n.steps.length-1;e>=0;e-=1)t.step(n.steps[e].invert(n.docs[e]));if(i.text){const n=t.doc.resolve(i.from).marks();t.replaceWith(i.from,i.to,e.schema.text(i.text,n))}else t.delete(i.from,i.to)}return!0}}return!1},unsetAllMarks:()=>({tr:e,dispatch:t})=>{const{selection:n}=e,{empty:r,ranges:o}=n;return r||t&&o.forEach((t=>{e.removeMark(t.$from.pos,t.$to.pos)})),!0},unsetMark:(e,t={})=>({tr:n,state:r,dispatch:o})=>{var i;const{extendEmptyMarkRange:s=!1}=t,{selection:a}=n,l=Ni(e,r.schema),{$from:u,empty:c,ranges:d}=a;if(!o)return!0;if(c&&s){let{from:e,to:t}=a;const r=null===(i=u.marks().find((e=>e.type===l)))||void 0===i?void 0:i.attrs,o=Bi(u,l,r);o&&(e=o.from,t=o.to),n.removeMark(e,t,l)}else d.forEach((e=>{n.removeMark(e.$from.pos,e.$to.pos,l)}));return n.removeStoredMark(l),!0},updateAttributes:(e,t={})=>({tr:n,state:r,dispatch:o})=>{let i=null,s=null;const a=Hi("string"==typeof e?e:e.name,r.schema);return!!a&&("node"===a&&(i=yi(e,r.schema)),"mark"===a&&(s=Ni(e,r.schema)),o&&n.selection.ranges.forEach((e=>{const o=e.$from.pos,a=e.$to.pos;r.doc.nodesBetween(o,a,((e,r)=>{i&&i===e.type&&n.setNodeMarkup(r,void 0,{...e.attrs,...t}),s&&e.marks.length&&e.marks.forEach((i=>{if(s===i.type){const l=Math.max(r,o),u=Math.min(r+e.nodeSize,a);n.addMark(l,u,s.create({...i.attrs,...t}))}}))}))})),!0)},wrapIn:(e,t={})=>({state:n,dispatch:r})=>function(e,t=null){return function(n,r){let{$from:o,$to:i}=n.selection,s=o.blockRange(i),a=s&&to(s,e,t);return!!a&&(r&&r(n.tr.wrap(s,a).scrollIntoView()),!0)}}(yi(e,n.schema),t)(n,r),wrapInList:(e,t={})=>({state:n,dispatch:r})=>di(yi(e,n.schema),t)(n,r)});Ai.create({name:"commands",addCommands:()=>({...Qi})}),Ai.create({name:"editable",addProseMirrorPlugins(){return[new Lo({key:new jo("editable"),props:{editable:()=>this.editor.options.editable}})]}}),Ai.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:e}=this;return[new Lo({key:new jo("focusEvents"),props:{handleDOMEvents:{focus:(t,n)=>{e.isFocused=!0;const r=e.state.tr.setMeta("focus",{event:n}).setMeta("addToHistory",!1);return t.dispatch(r),!1},blur:(t,n)=>{e.isFocused=!1;const r=e.state.tr.setMeta("blur",{event:n}).setMeta("addToHistory",!1);return t.dispatch(r),!1}}}})]}}),Ai.create({name:"keymap",addKeyboardShortcuts(){const e=()=>this.editor.commands.first((({commands:e})=>[()=>e.undoInputRule(),()=>e.command((({tr:t})=>{const{selection:n,doc:r}=t,{empty:o,$anchor:i}=n,{pos:s,parent:a}=i,l=wo.atStart(r).from===s;return!(!(o&&l&&a.type.isTextblock)||a.textContent.length)&&e.clearNodes()})),()=>e.deleteSelection(),()=>e.joinBackward(),()=>e.selectNodeBackward()])),t=()=>this.editor.commands.first((({commands:e})=>[()=>e.deleteSelection(),()=>e.joinForward(),()=>e.selectNodeForward()])),n={Enter:()=>this.editor.commands.first((({commands:e})=>[()=>e.newlineInCode(),()=>e.createParagraphNear(),()=>e.liftEmptyBlock(),()=>e.splitBlock()])),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:e,"Mod-Backspace":e,"Shift-Backspace":e,Delete:t,"Mod-Delete":t,"Mod-a":()=>this.editor.commands.selectAll()},r={...n},o={...n,"Ctrl-h":e,"Alt-Backspace":e,"Ctrl-d":t,"Ctrl-Alt-Backspace":t,"Alt-Delete":t,"Alt-d":t,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return Li()||ji()?o:r},addProseMirrorPlugins(){return[new Lo({key:new jo("clearDocument"),appendTransaction:(e,t,n)=>{if(!(e.some((e=>e.docChanged))&&!t.doc.eq(n.doc)))return;const{empty:r,from:o,to:i}=t.selection,s=wo.atStart(t.doc).from,a=wo.atEnd(t.doc).to,l=o===s&&i===a,u=0===n.doc.textBetween(0,n.doc.content.size," "," ").length;if(r||!l||!u)return;const c=n.tr,d=hi({state:n,transaction:c}),{commands:p}=new fi({editor:this.editor,state:d});return p.clearNodes(),c.steps.length?c:void 0}})]}}),Ai.create({name:"tabindex",addProseMirrorPlugins(){return[new Lo({key:new jo("tabindex"),props:{attributes:this.editor.isEditable?{tabindex:"0"}:{}}})]}});function es(e,t){const n=Hi("string"==typeof t?t:t.name,e.schema);return"node"===n?function(e,t){const n=yi(t,e.schema),{from:r,to:o}=e.selection,i=[];e.doc.nodesBetween(r,o,(e=>{i.push(e)}));const s=i.reverse().find((e=>e.type.name===n.name));return s?{...s.attrs}:{}}(e,t):"mark"===n?qi(e,t):{}}function ts(e){const t=function(e,t=JSON.stringify){const n={};return e.filter((e=>{const r=t(e);return!Object.prototype.hasOwnProperty.call(n,r)&&(n[r]=!0)}))}(e);return 1===t.length?t:t.filter(((e,n)=>!t.filter(((e,t)=>t!==n)).some((t=>e.oldRange.from>=t.oldRange.from&&e.oldRange.to<=t.oldRange.to&&e.newRange.from>=t.newRange.from&&e.newRange.to<=t.newRange.to))))}function ns(e,t,n){const r=[];return e===t?n.resolve(e).marks().forEach((t=>{const o=Bi(n.resolve(e-1),t.type);o&&r.push({mark:t,...o})})):n.nodesBetween(e,t,((e,t)=>{r.push(...e.marks.map((n=>({from:t,to:t+e.nodeSize,mark:n}))))})),r}function rs(e){return new wi({find:e.find,handler:({state:t,range:n,match:r})=>{const o=Di(e.getAttributes,void 0,r);if(!1===o||null===o)return null;const{tr:i}=t,s=r[r.length-1],a=r[0];let l=n.to;if(s){const r=a.search(/\S/),u=n.from+a.indexOf(s),c=u+s.length;if(ns(n.from,n.to,t.doc).filter((t=>t.mark.type.excluded.find((n=>n===e.type&&n!==t.mark.type)))).filter((e=>e.to>u)).length)return null;c<n.to&&i.delete(c,n.to),u>n.from&&i.delete(n.from+r,u),l=n.from+r+s.length,i.addMark(n.from+r,l,e.type.create(o||{})),i.removeStoredMark(e.type)}}})}function is(e){return new wi({find:e.find,handler:({state:t,range:n,match:r})=>{const o=t.doc.resolve(n.from),i=Di(e.getAttributes,void 0,r)||{};if(!o.node(-1).canReplaceWith(o.index(-1),o.indexAfter(-1),e.type))return null;t.tr.delete(n.from,n.to).setBlockType(n.from,n.from,e.type,i)}})}function ss(e){return new wi({find:e.find,handler:({state:t,range:n,match:r})=>{const o=Di(e.getAttributes,void 0,r)||{},i=t.tr.delete(n.from,n.to),s=i.doc.resolve(n.from).blockRange(),a=s&&to(s,e.type,o);if(!a)return null;i.wrap(s,a);const l=i.doc.resolve(n.from-1).nodeBefore;l&&l.type===e.type&&oo(i.doc,n.from-1)&&(!e.joinPredicate||e.joinPredicate(r,l))&&i.join(n.from-1)}})}class as{constructor(e={}){this.type="mark",this.name="mark",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=Di(mi(this,"addOptions",{name:this.name}))),this.storage=Di(mi(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new as(e)}configure(e={}){const t=this.extend();return t.options=ki(this.options,e),t.storage=Di(mi(t,"addStorage",{name:t.name,options:t.options})),t}extend(e={}){const t=new as(e);return t.parent=this,this.child=t,t.name=e.name?e.name:t.parent.name,e.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${t.name}".`),t.options=Di(mi(t,"addOptions",{name:t.name})),t.storage=Di(mi(t,"addStorage",{name:t.name,options:t.options})),t}}class ls{constructor(e={}){this.type="node",this.name="node",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=Di(mi(this,"addOptions",{name:this.name}))),this.storage=Di(mi(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new ls(e)}configure(e={}){const t=this.extend();return t.options=ki(this.options,e),t.storage=Di(mi(t,"addStorage",{name:t.name,options:t.options})),t}extend(e={}){const t=new ls(e);return t.parent=this,this.child=t,t.name=e.name?e.name:t.parent.name,e.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${t.name}".`),t.options=Di(mi(t,"addOptions",{name:t.name})),t.storage=Di(mi(t,"addStorage",{name:t.name,options:t.options})),t}}function us(e){return new Ei({find:e.find,handler:({state:t,range:n,match:r})=>{const o=Di(e.getAttributes,void 0,r);if(!1===o||null===o)return null;const{tr:i}=t,s=r[r.length-1],a=r[0];let l=n.to;if(s){const r=a.search(/\S/),u=n.from+a.indexOf(s),c=u+s.length;if(ns(n.from,n.to,t.doc).filter((t=>t.mark.type.excluded.find((n=>n===e.type&&n!==t.mark.type)))).filter((e=>e.to>u)).length)return null;c<n.to&&i.delete(c,n.to),u>n.from&&i.delete(n.from+r,u),l=n.from+r+s.length,i.addMark(n.from+r,l,e.type.create(o||{})),i.removeStoredMark(e.type)}}})}const cs=/^\s*>\s$/,ds=ls.create({name:"blockquote",addOptions:()=>({HTMLAttributes:{}}),content:"block+",group:"block",defining:!0,parseHTML:()=>[{tag:"blockquote"}],renderHTML({HTMLAttributes:e}){return["blockquote",vi(this.options.HTMLAttributes,e),0]},addCommands(){return{setBlockquote:()=>({commands:e})=>e.wrapIn(this.name),toggleBlockquote:()=>({commands:e})=>e.toggleWrap(this.name),unsetBlockquote:()=>({commands:e})=>e.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[ss({find:cs,type:this.type})]}}),ps=/(?:^|\s)((?:\*\*)((?:[^*]+))(?:\*\*))$/,hs=/(?:^|\s)((?:\*\*)((?:[^*]+))(?:\*\*))/g,fs=/(?:^|\s)((?:__)((?:[^__]+))(?:__))$/,ms=/(?:^|\s)((?:__)((?:[^__]+))(?:__))/g,gs=as.create({name:"bold",addOptions:()=>({HTMLAttributes:{}}),parseHTML:()=>[{tag:"strong"},{tag:"b",getAttrs:e=>"normal"!==e.style.fontWeight&&null},{style:"font-weight",getAttrs:e=>/^(bold(er)?|[5-9]\d{2,})$/.test(e)&&null}],renderHTML({HTMLAttributes:e}){return["strong",vi(this.options.HTMLAttributes,e),0]},addCommands(){return{setBold:()=>({commands:e})=>e.setMark(this.name),toggleBold:()=>({commands:e})=>e.toggleMark(this.name),unsetBold:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[rs({find:ps,type:this.type}),rs({find:fs,type:this.type})]},addPasteRules(){return[us({find:hs,type:this.type}),us({find:ms,type:this.type})]}}),ys=/^\s*([-+*])\s$/,vs=ls.create({name:"bulletList",addOptions:()=>({itemTypeName:"listItem",HTMLAttributes:{}}),group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML:()=>[{tag:"ul"}],renderHTML({HTMLAttributes:e}){return["ul",vi(this.options.HTMLAttributes,e),0]},addCommands(){return{toggleBulletList:()=>({commands:e})=>e.toggleList(this.name,this.options.itemTypeName)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){return[ss({find:ys,type:this.type})]}}),bs=/(?:^|\s)((?:`)((?:[^`]+))(?:`))$/,Ds=/(?:^|\s)((?:`)((?:[^`]+))(?:`))/g,Cs=as.create({name:"code",addOptions:()=>({HTMLAttributes:{}}),excludes:"_",code:!0,parseHTML:()=>[{tag:"code"}],renderHTML({HTMLAttributes:e}){return["code",vi(this.options.HTMLAttributes,e),0]},addCommands(){return{setCode:()=>({commands:e})=>e.setMark(this.name),toggleCode:()=>({commands:e})=>e.toggleMark(this.name),unsetCode:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[rs({find:bs,type:this.type})]},addPasteRules(){return[us({find:Ds,type:this.type})]}}),ws=/^```([a-z]+)?[\s\n]$/,Es=/^~~~([a-z]+)?[\s\n]$/,xs=ls.create({name:"codeBlock",addOptions:()=>({languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,HTMLAttributes:{}}),content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:null,parseHTML:e=>{var t;const{languageClassPrefix:n}=this.options,r=[...(null===(t=e.firstElementChild)||void 0===t?void 0:t.classList)||[]].filter((e=>e.startsWith(n))).map((e=>e.replace(n,"")))[0];return r||null},rendered:!1}}},parseHTML:()=>[{tag:"pre",preserveWhitespace:"full"}],renderHTML({node:e,HTMLAttributes:t}){return["pre",vi(this.options.HTMLAttributes,t),["code",{class:e.attrs.language?this.options.languageClassPrefix+e.attrs.language:null},0]]},addCommands(){return{setCodeBlock:e=>({commands:t})=>t.setNode(this.name,e),toggleCodeBlock:e=>({commands:t})=>t.toggleNode(this.name,"paragraph",e)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:e,$anchor:t}=this.editor.state.selection,n=1===t.pos;return!(!e||t.parent.type.name!==this.name)&&(!(!n&&t.parent.textContent.length)&&this.editor.commands.clearNodes())},Enter:({editor:e})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:t}=e,{selection:n}=t,{$from:r,empty:o}=n;if(!o||r.parent.type!==this.type)return!1;const i=r.parentOffset===r.parent.nodeSize-2,s=r.parent.textContent.endsWith("\n\n");return!(!i||!s)&&e.chain().command((({tr:e})=>(e.delete(r.pos-2,r.pos),!0))).exitCode().run()},ArrowDown:({editor:e})=>{if(!this.options.exitOnArrowDown)return!1;const{state:t}=e,{selection:n,doc:r}=t,{$from:o,empty:i}=n;if(!i||o.parent.type!==this.type)return!1;if(!(o.parentOffset===o.parent.nodeSize-2))return!1;const s=o.after();if(void 0===s)return!1;return!r.nodeAt(s)&&e.commands.exitCode()}}},addInputRules(){return[is({find:ws,type:this.type,getAttributes:e=>({language:e[1]})}),is({find:Es,type:this.type,getAttributes:e=>({language:e[1]})})]},addProseMirrorPlugins(){return[new Lo({key:new jo("codeBlockVSCodeHandler"),props:{handlePaste:(e,t)=>{if(!t.clipboardData)return!1;if(this.editor.isActive(this.type.name))return!1;const n=t.clipboardData.getData("text/plain"),r=t.clipboardData.getData("vscode-editor-data"),o=r?JSON.parse(r):void 0,i=null==o?void 0:o.mode;if(!n||!i)return!1;const{tr:s}=e.state;return s.replaceSelectionWith(this.type.create({language:i})),s.setSelection(Ao.near(s.doc.resolve(Math.max(0,s.selection.from-2)))),s.insertText(n.replace(/\r\n?/g,"\n")),s.setMeta("paste",!0),e.dispatch(s),!0}}})]}}),ks=ls.create({name:"doc",topNode:!0,content:"block+"});function As(e={}){return new Lo({view:t=>new Ss(t,e)})}class Ss{constructor(e,t){this.editorView=e,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=t.width||1,this.color=t.color||"black",this.class=t.class,this.handlers=["dragover","dragend","drop","dragleave"].map((t=>{let n=e=>{this[t](e)};return e.dom.addEventListener(t,n),{name:t,handler:n}}))}destroy(){this.handlers.forEach((({name:e,handler:t})=>this.editorView.dom.removeEventListener(e,t)))}update(e,t){null!=this.cursorPos&&t.doc!=e.state.doc&&(this.cursorPos>e.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(e){e!=this.cursorPos&&(this.cursorPos=e,null==e?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let e,t=this.editorView.state.doc.resolve(this.cursorPos);if(!t.parent.inlineContent){let n=t.nodeBefore,r=t.nodeAfter;if(n||r){let t=this.editorView.nodeDOM(this.cursorPos-(n?n.nodeSize:0)).getBoundingClientRect(),o=n?t.bottom:t.top;n&&r&&(o=(o+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2),e={left:t.left,right:t.right,top:o-this.width/2,bottom:o+this.width/2}}}if(!e){let t=this.editorView.coordsAtPos(this.cursorPos);e={left:t.left-this.width/2,right:t.left+this.width/2,top:t.top,bottom:t.bottom}}let n,r,o=this.editorView.dom.offsetParent;if(this.element||(this.element=o.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none; background-color: "+this.color),!o||o==document.body&&"static"==getComputedStyle(o).position)n=-pageXOffset,r=-pageYOffset;else{let e=o.getBoundingClientRect();n=e.left-o.scrollLeft,r=e.top-o.scrollTop}this.element.style.left=e.left-n+"px",this.element.style.top=e.top-r+"px",this.element.style.width=e.right-e.left+"px",this.element.style.height=e.bottom-e.top+"px"}scheduleRemoval(e){clearTimeout(this.timeout),this.timeout=setTimeout((()=>this.setCursor(null)),e)}dragover(e){if(!this.editorView.editable)return;let t=this.editorView.posAtCoords({left:e.clientX,top:e.clientY}),n=t&&t.inside>=0&&this.editorView.state.doc.nodeAt(t.inside),r=n&&n.type.spec.disableDropCursor,o="function"==typeof r?r(this.editorView,t):r;if(t&&!o){let e=t.pos;if(this.editorView.dragging&&this.editorView.dragging.slice&&(e=so(this.editorView.state.doc,e,this.editorView.dragging.slice),null==e))return this.setCursor(null);this.setCursor(e),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(e){e.target!=this.editorView.dom&&this.editorView.dom.contains(e.relatedTarget)||this.setCursor(null)}}const Ms=Ai.create({name:"dropCursor",addOptions:()=>({color:"currentColor",width:1,class:void 0}),addProseMirrorPlugins(){return[As(this.options)]}});for(var Fs={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",229:"q"},Os={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"',229:"Q"},Ts="undefined"!=typeof navigator&&/Chrome\/(\d+)/.exec(navigator.userAgent),Bs="undefined"!=typeof navigator&&/Apple Computer/.test(navigator.vendor),Ns="undefined"!=typeof navigator&&/Gecko\/\d+/.test(navigator.userAgent),Rs="undefined"!=typeof navigator&&/Mac/.test(navigator.platform),Is="undefined"!=typeof navigator&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),Ps=Ts&&(Rs||+Ts[1]<57)||Ns&&Rs,Ls=0;Ls<10;Ls++)Fs[48+Ls]=Fs[96+Ls]=String(Ls);for(Ls=1;Ls<=24;Ls++)Fs[Ls+111]="F"+Ls;for(Ls=65;Ls<=90;Ls++)Fs[Ls]=String.fromCharCode(Ls+32),Os[Ls]=String.fromCharCode(Ls);for(var zs in Fs)Os.hasOwnProperty(zs)||(Os[zs]=Fs[zs]);const $s="undefined"!=typeof navigator&&/Mac|iP(hone|[oa]d)/.test(navigator.platform);function js(e){let t,n,r,o,i=e.split(/-(?!$)/),s=i[i.length-1];"Space"==s&&(s=" ");for(let a=0;a<i.length-1;a++){let e=i[a];if(/^(cmd|meta|m)$/i.test(e))o=!0;else if(/^a(lt)?$/i.test(e))t=!0;else if(/^(c|ctrl|control)$/i.test(e))n=!0;else if(/^s(hift)?$/i.test(e))r=!0;else{if(!/^mod$/i.test(e))throw new Error("Unrecognized modifier name: "+e);$s?o=!0:n=!0}}return t&&(s="Alt-"+s),n&&(s="Ctrl-"+s),o&&(s="Meta-"+s),r&&(s="Shift-"+s),s}function _s(e,t,n){return t.altKey&&(e="Alt-"+e),t.ctrlKey&&(e="Ctrl-"+e),t.metaKey&&(e="Meta-"+e),!1!==n&&t.shiftKey&&(e="Shift-"+e),e}function Hs(e){let t=function(e){let t=Object.create(null);for(let n in e)t[js(n)]=e[n];return t}(e);return function(e,n){let r,o=function(e){var t=!(Ps&&(e.ctrlKey||e.altKey||e.metaKey)||(Bs||Is)&&e.shiftKey&&e.key&&1==e.key.length)&&e.key||(e.shiftKey?Os:Fs)[e.keyCode]||e.key||"Unidentified";return"Esc"==t&&(t="Escape"),"Del"==t&&(t="Delete"),"Left"==t&&(t="ArrowLeft"),"Up"==t&&(t="ArrowUp"),"Right"==t&&(t="ArrowRight"),"Down"==t&&(t="ArrowDown"),t}(n),i=1==o.length&&" "!=o,s=t[_s(o,n,!i)];if(s&&s(e.state,e.dispatch,e))return!0;if(i&&(n.shiftKey||n.altKey||n.metaKey||o.charCodeAt(0)>127)&&(r=Fs[n.keyCode])&&r!=o){let o=t[_s(r,n,!0)];if(o&&o(e.state,e.dispatch,e))return!0}else if(i&&n.shiftKey){let r=t[_s(o,n,!0)];if(r&&r(e.state,e.dispatch,e))return!0}return!1}}const Ks="undefined"!=typeof navigator?navigator:null,Vs="undefined"!=typeof document?document:null,qs=Ks&&Ks.userAgent||"",Ws=/Edge\/(\d+)/.exec(qs),Us=/MSIE \d/.exec(qs),Zs=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(qs),Js=!!(Us||Zs||Ws),Gs=Us?document.documentMode:Zs?+Zs[1]:Ws?+Ws[1]:0,Ys=!Js&&/gecko\/(\d+)/i.test(qs);Ys&&(/Firefox\/(\d+)/.exec(qs)||[0,0])[1];const Xs=!Js&&/Chrome\/(\d+)/.exec(qs),Qs=!!Xs,ea=Xs?+Xs[1]:0,ta=!Js&&!!Ks&&/Apple Computer/.test(Ks.vendor),na=ta&&(/Mobile\/\w+/.test(qs)||!!Ks&&Ks.maxTouchPoints>2),ra=na||!!Ks&&/Mac/.test(Ks.platform),oa=/Android \d/.test(qs),ia=!!Vs&&"webkitFontSmoothing"in Vs.documentElement.style,sa=ia?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0,aa=function(e){for(var t=0;;t++)if(!(e=e.previousSibling))return t};const la=function(e,t,n,r){return n&&(ca(e,t,n,r,-1)||ca(e,t,n,r,1))},ua=/^(img|br|input|textarea|hr)$/i;function ca(e,t,n,r,o){for(;;){if(e==n&&t==r)return!0;if(t==(o<0?0:da(e))){let n=e.parentNode;if(!n||1!=n.nodeType||pa(e)||ua.test(e.nodeName)||"false"==e.contentEditable)return!1;t=aa(e)+(o<0?0:1),e=n}else{if(1!=e.nodeType)return!1;if("false"==(e=e.childNodes[t+(o<0?-1:0)]).contentEditable)return!1;t=o<0?da(e):0}}}function da(e){return 3==e.nodeType?e.nodeValue.length:e.childNodes.length}function pa(e){let t;for(let n=e;n&&!(t=n.pmViewDesc);n=n.parentNode);return t&&t.node&&t.node.isBlock&&(t.dom==e||t.contentDOM==e)}const ha=function(e){let t=e.isCollapsed;return t&&Qs&&e.rangeCount&&!e.getRangeAt(0).collapsed&&(t=!1),t};function fa(e,t){let n=document.createEvent("Event");return n.initEvent("keydown",!0,!0),n.keyCode=e,n.key=n.code=t,n}const ma=function(e){e&&(this.nodeName=e)};ma.prototype=Object.create(null);new ma;function ga(e,t=null){let n=e.domSelection(),r=e.state.doc;if(!n.focusNode)return null;let o=e.docView.nearestDesc(n.focusNode),i=o&&0==o.size,s=e.docView.posFromDOM(n.focusNode,n.focusOffset,1);if(s<0)return null;let a,l,u=r.resolve(s);if(ha(n)){for(a=u;o&&!o.node;)o=o.parent;let e=o.node;if(o&&e.isAtom&&Mo.isSelectable(e)&&o.parent&&(!e.isInline||!function(e,t,n){for(let r=0==t,o=t==da(e);r||o;){if(e==n)return!0;let t=aa(e);if(!(e=e.parentNode))return!1;r=r&&0==t,o=o&&t==da(e)}}(n.focusNode,n.focusOffset,o.dom))){let e=o.posBefore;l=new Mo(s==e?u:r.resolve(e))}}else{let t=e.docView.posFromDOM(n.anchorNode,n.anchorOffset,1);if(t<0)return null;a=r.resolve(t)}if(!l){l=ka(e,a,u,"pointer"==t||e.state.selection.head<u.pos&&!i?1:-1)}return l}function ya(e){return e.editable?e.hasFocus():Aa(e)&&document.activeElement&&document.activeElement.contains(e.dom)}function va(e,t=!1){let n=e.state.selection;if(Ea(e,n),ya(e)){if(!t&&e.input.mouseDown&&e.input.mouseDown.allowDefault&&Qs){let t=e.domSelection(),n=e.domObserver.currentSelection;if(t.anchorNode&&n.anchorNode&&la(t.anchorNode,t.anchorOffset,n.anchorNode,n.anchorOffset))return e.input.mouseDown.delayedSelectionSync=!0,void e.domObserver.setCurSelection()}if(e.domObserver.disconnectSelection(),e.cursorWrapper)!function(e){let t=e.domSelection(),n=document.createRange(),r=e.cursorWrapper.dom,o="IMG"==r.nodeName;o?n.setEnd(r.parentNode,aa(r)+1):n.setEnd(r,0);n.collapse(!1),t.removeAllRanges(),t.addRange(n),!o&&!e.state.selection.visible&&Js&&Gs<=11&&(r.disabled=!0,r.disabled=!1)}(e);else{let r,o,{anchor:i,head:s}=n;!ba||n instanceof Ao||(n.$from.parent.inlineContent||(r=Da(e,n.from)),n.empty||n.$from.parent.inlineContent||(o=Da(e,n.to))),e.docView.setSelection(i,s,e.root,t),ba&&(r&&wa(r),o&&wa(o)),n.visible?e.dom.classList.remove("ProseMirror-hideselection"):(e.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&function(e){let t=e.dom.ownerDocument;t.removeEventListener("selectionchange",e.input.hideSelectionGuard);let n=e.domSelection(),r=n.anchorNode,o=n.anchorOffset;t.addEventListener("selectionchange",e.input.hideSelectionGuard=()=>{n.anchorNode==r&&n.anchorOffset==o||(t.removeEventListener("selectionchange",e.input.hideSelectionGuard),setTimeout((()=>{ya(e)&&!e.state.selection.visible||e.dom.classList.remove("ProseMirror-hideselection")}),20))})}(e))}e.domObserver.setCurSelection(),e.domObserver.connectSelection()}}const ba=ta||Qs&&ea<63;function Da(e,t){let{node:n,offset:r}=e.docView.domFromPos(t,0),o=r<n.childNodes.length?n.childNodes[r]:null,i=r?n.childNodes[r-1]:null;if(ta&&o&&"false"==o.contentEditable)return Ca(o);if(!(o&&"false"!=o.contentEditable||i&&"false"!=i.contentEditable)){if(o)return Ca(o);if(i)return Ca(i)}}function Ca(e){return e.contentEditable="true",ta&&e.draggable&&(e.draggable=!1,e.wasDraggable=!0),e}function wa(e){e.contentEditable="false",e.wasDraggable&&(e.draggable=!0,e.wasDraggable=null)}function Ea(e,t){if(t instanceof Mo){let n=e.docView.descAt(t.from);n!=e.lastSelectedViewDesc&&(xa(e),n&&n.selectNode(),e.lastSelectedViewDesc=n)}else xa(e)}function xa(e){e.lastSelectedViewDesc&&(e.lastSelectedViewDesc.parent&&e.lastSelectedViewDesc.deselectNode(),e.lastSelectedViewDesc=void 0)}function ka(e,t,n,r){return e.someProp("createSelectionBetween",(r=>r(e,t,n)))||Ao.between(t,n,r)}function Aa(e){let t=e.domSelection();if(!t.anchorNode)return!1;try{return e.dom.contains(3==t.anchorNode.nodeType?t.anchorNode.parentNode:t.anchorNode)&&(e.editable||e.dom.contains(3==t.focusNode.nodeType?t.focusNode.parentNode:t.focusNode))}catch(n){return!1}}function Sa(e,t){let{$anchor:n,$head:r}=e.selection,o=t>0?n.max(r):n.min(r),i=o.parent.inlineContent?o.depth?e.doc.resolve(t>0?o.after():o.before()):null:o;return i&&wo.findFrom(i,t)}function Ma(e,t){return e.dispatch(e.state.tr.setSelection(t).scrollIntoView()),!0}function Fa(e,t,n){let r=e.state.selection;if(!(r instanceof Ao)){if(r instanceof Mo&&r.node.isInline)return Ma(e,new Ao(t>0?r.$to:r.$from));{let n=Sa(e.state,t);return!!n&&Ma(e,n)}}if(!r.empty||n.indexOf("s")>-1)return!1;if(e.endOfTextblock(t>0?"right":"left")){let n=Sa(e.state,t);return!!(n&&n instanceof Mo)&&Ma(e,n)}if(!(ra&&n.indexOf("m")>-1)){let n,o=r.$head,i=o.textOffset?null:t<0?o.nodeBefore:o.nodeAfter;if(!i||i.isText)return!1;let s=t<0?o.pos-i.nodeSize:o.pos;return!!(i.isAtom||(n=e.docView.descAt(s))&&!n.contentDOM)&&(Mo.isSelectable(i)?Ma(e,new Mo(t<0?e.state.doc.resolve(o.pos-i.nodeSize):o)):!!ia&&Ma(e,new Ao(e.state.doc.resolve(t<0?s:s+i.nodeSize))))}}function Oa(e){return 3==e.nodeType?e.nodeValue.length:e.childNodes.length}function Ta(e){let t=e.pmViewDesc;return t&&0==t.size&&(e.nextSibling||"BR"!=e.nodeName)}function Ba(e){let t=e.domSelection(),n=t.focusNode,r=t.focusOffset;if(!n)return;let o,i,s=!1;for(Ys&&1==n.nodeType&&r<Oa(n)&&Ta(n.childNodes[r])&&(s=!0);;)if(r>0){if(1!=n.nodeType)break;{let e=n.childNodes[r-1];if(Ta(e))o=n,i=--r;else{if(3!=e.nodeType)break;n=e,r=n.nodeValue.length}}}else{if(Ra(n))break;{let t=n.previousSibling;for(;t&&Ta(t);)o=n.parentNode,i=aa(t),t=t.previousSibling;if(t)n=t,r=Oa(n);else{if(n=n.parentNode,n==e.dom)break;r=0}}}s?Ia(e,t,n,r):o&&Ia(e,t,o,i)}function Na(e){let t=e.domSelection(),n=t.focusNode,r=t.focusOffset;if(!n)return;let o,i,s=Oa(n);for(;;)if(r<s){if(1!=n.nodeType)break;if(!Ta(n.childNodes[r]))break;o=n,i=++r}else{if(Ra(n))break;{let t=n.nextSibling;for(;t&&Ta(t);)o=t.parentNode,i=aa(t)+1,t=t.nextSibling;if(t)n=t,r=0,s=Oa(n);else{if(n=n.parentNode,n==e.dom)break;r=s=0}}}o&&Ia(e,t,o,i)}function Ra(e){let t=e.pmViewDesc;return t&&t.node&&t.node.isBlock}function Ia(e,t,n,r){if(ha(t)){let e=document.createRange();e.setEnd(n,r),e.setStart(n,r),t.removeAllRanges(),t.addRange(e)}else t.extend&&t.extend(n,r);e.domObserver.setCurSelection();let{state:o}=e;setTimeout((()=>{e.state==o&&va(e)}),50)}function Pa(e,t,n){let r=e.state.selection;if(r instanceof Ao&&!r.empty||n.indexOf("s")>-1)return!1;if(ra&&n.indexOf("m")>-1)return!1;let{$from:o,$to:i}=r;if(!o.parent.inlineContent||e.endOfTextblock(t<0?"up":"down")){let n=Sa(e.state,t);if(n&&n instanceof Mo)return Ma(e,n)}if(!o.parent.inlineContent){let n=t<0?o:i,s=r instanceof Oo?wo.near(n,t):wo.findFrom(n,t);return!!s&&Ma(e,s)}return!1}function La(e,t){if(!(e.state.selection instanceof Ao))return!0;let{$head:n,$anchor:r,empty:o}=e.state.selection;if(!n.sameParent(r))return!0;if(!o)return!1;if(e.endOfTextblock(t>0?"forward":"backward"))return!0;let i=!n.textOffset&&(t<0?n.nodeBefore:n.nodeAfter);if(i&&!i.isText){let r=e.state.tr;return t<0?r.delete(n.pos-i.nodeSize,n.pos):r.delete(n.pos,n.pos+i.nodeSize),e.dispatch(r),!0}return!1}function za(e,t,n){e.domObserver.stop(),t.contentEditable=n,e.domObserver.start()}function $a(e,t){let n=t.keyCode,r=function(e){let t="";return e.ctrlKey&&(t+="c"),e.metaKey&&(t+="m"),e.altKey&&(t+="a"),e.shiftKey&&(t+="s"),t}(t);return 8==n||ra&&72==n&&"c"==r?La(e,-1)||Ba(e):46==n||ra&&68==n&&"c"==r?La(e,1)||Na(e):13==n||27==n||(37==n||ra&&66==n&&"c"==r?Fa(e,-1,r)||Ba(e):39==n||ra&&70==n&&"c"==r?Fa(e,1,r)||Na(e):38==n||ra&&80==n&&"c"==r?Pa(e,-1,r)||Ba(e):40==n||ra&&78==n&&"c"==r?function(e){if(!ta||e.state.selection.$head.parentOffset>0)return!1;let{focusNode:t,focusOffset:n}=e.domSelection();if(t&&1==t.nodeType&&0==n&&t.firstChild&&"false"==t.firstChild.contentEditable){let n=t.firstChild;za(e,n,"true"),setTimeout((()=>za(e,n,"false")),20)}return!1}(e)||Pa(e,1,r)||Na(e):r==(ra?"m":"c")&&(66==n||73==n||89==n||90==n))}function ja(e,t){let n=[],{content:r,openStart:o,openEnd:i}=t;for(;o>1&&i>1&&1==r.childCount&&1==r.firstChild.childCount;){o--,i--;let e=r.firstChild;n.push(e.type.name,e.attrs!=e.type.defaultAttrs?e.attrs:null),r=e.content}let s=e.someProp("clipboardSerializer")||Pr.fromSchema(e.state.schema),a=Ga(),l=a.createElement("div");l.appendChild(s.serializeFragment(r,{document:a}));let u,c=l.firstChild,d=0;for(;c&&1==c.nodeType&&(u=Za[c.nodeName.toLowerCase()]);){for(let e=u.length-1;e>=0;e--){let t=a.createElement(u[e]);for(;l.firstChild;)t.appendChild(l.firstChild);l.appendChild(t),d++}c=l.firstChild}return c&&1==c.nodeType&&c.setAttribute("data-pm-slice",`${o} ${i}${d?` -${d}`:""} ${JSON.stringify(n)}`),{dom:l,text:e.someProp("clipboardTextSerializer",(e=>e(t)))||t.content.textBetween(0,t.content.size,"\n\n")}}function _a(e,t,n,r,o){let i,s,a=o.parent.type.spec.code;if(!n&&!t)return null;let l=t&&(r||a||!n);if(l){if(e.someProp("transformPastedText",(e=>{t=e(t,a||r)})),a)return t?new Wn(jn.from(e.state.schema.text(t.replace(/\r\n?/g,"\n"))),0,0):Wn.empty;let n=e.someProp("clipboardTextParser",(e=>e(t,o,r)));if(n)s=n;else{let n=o.marks(),{schema:r}=e.state,s=Pr.fromSchema(r);i=document.createElement("div"),t.split(/(?:\r\n?|\n)+/).forEach((e=>{let t=i.appendChild(document.createElement("p"));e&&t.appendChild(s.serializeNode(r.text(e,n)))}))}}else e.someProp("transformPastedHTML",(e=>{n=e(n)})),i=function(e){let t=/^(\s*<meta [^>]*>)*/.exec(e);t&&(e=e.slice(t[0].length));let n,r=Ga().createElement("div"),o=/<([a-z][^>\s]+)/i.exec(e);(n=o&&Za[o[1].toLowerCase()])&&(e=n.map((e=>"<"+e+">")).join("")+e+n.map((e=>"</"+e+">")).reverse().join(""));if(r.innerHTML=e,n)for(let i=0;i<n.length;i++)r=r.querySelector(n[i])||r;return r}(n),ia&&function(e){let t=e.querySelectorAll(Qs?"span:not([class]):not([style])":"span.Apple-converted-space");for(let n=0;n<t.length;n++){let r=t[n];1==r.childNodes.length&&"\xa0"==r.textContent&&r.parentNode&&r.parentNode.replaceChild(e.ownerDocument.createTextNode(" "),r)}}(i);let u=i&&i.querySelector("[data-pm-slice]"),c=u&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(u.getAttribute("data-pm-slice")||"");if(c&&c[3])for(let d=+c[3];d>0&&i.firstChild;d--)i=i.firstChild;if(!s){let t=e.someProp("clipboardParser")||e.someProp("domParser")||Ar.fromSchema(e.state.schema);s=t.parseSlice(i,{preserveWhitespace:!(!l&&!c),context:o,ruleFromNode:e=>"BR"!=e.nodeName||e.nextSibling||!e.parentNode||Ha.test(e.parentNode.nodeName)?null:{ignore:!0}})}if(c)s=function(e,t){if(!e.size)return e;let n,r=e.content.firstChild.type.schema;try{n=JSON.parse(t)}catch(a){return e}let{content:o,openStart:i,openEnd:s}=e;for(let l=n.length-2;l>=0;l-=2){let e=r.nodes[n[l]];if(!e||e.hasRequiredAttrs())break;o=jn.from(e.create(n[l+1],o)),i++,s++}return new Wn(o,i,s)}(Ua(s,+c[1],+c[2]),c[4]);else if(s=Wn.maxOpen(function(e,t){if(e.childCount<2)return e;for(let n=t.depth;n>=0;n--){let r,o=t.node(n).contentMatchAt(t.index(n)),i=[];if(e.forEach((e=>{if(!i)return;let t,n=o.findWrapping(e.type);if(!n)return i=null;if(t=i.length&&r.length&&Va(n,r,e,i[i.length-1],0))i[i.length-1]=t;else{i.length&&(i[i.length-1]=qa(i[i.length-1],r.length));let t=Ka(e,n);i.push(t),o=o.matchType(t.type),r=n}})),i)return jn.from(i)}return e}(s.content,o),!0),s.openStart||s.openEnd){let e=0,t=0;for(let n=s.content.firstChild;e<s.openStart&&!n.type.spec.isolating;e++,n=n.firstChild);for(let n=s.content.lastChild;t<s.openEnd&&!n.type.spec.isolating;t++,n=n.lastChild);s=Ua(s,e,t)}return e.someProp("transformPasted",(e=>{s=e(s)})),s}const Ha=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function Ka(e,t,n=0){for(let r=t.length-1;r>=n;r--)e=t[r].create(null,jn.from(e));return e}function Va(e,t,n,r,o){if(o<e.length&&o<t.length&&e[o]==t[o]){let i=Va(e,t,n,r.lastChild,o+1);if(i)return r.copy(r.content.replaceChild(r.childCount-1,i));if(r.contentMatchAt(r.childCount).matchType(o==e.length-1?n.type:e[o+1]))return r.copy(r.content.append(jn.from(Ka(n,e,o+1))))}}function qa(e,t){if(0==t)return e;let n=e.content.replaceChild(e.childCount-1,qa(e.lastChild,t-1)),r=e.contentMatchAt(e.childCount).fillBefore(jn.empty,!0);return e.copy(n.append(r))}function Wa(e,t,n,r,o,i){let s=t<0?e.firstChild:e.lastChild,a=s.content;return o<r-1&&(a=Wa(a,t,n,r,o+1,i)),o>=n&&(a=t<0?s.contentMatchAt(0).fillBefore(a,e.childCount>1||i<=o).append(a):a.append(s.contentMatchAt(s.childCount).fillBefore(jn.empty,!0))),e.replaceChild(t<0?0:e.childCount-1,s.copy(a))}function Ua(e,t,n){return t<e.openStart&&(e=new Wn(Wa(e.content,-1,t,e.openStart,0,e.openEnd),t,e.openEnd)),n<e.openEnd&&(e=new Wn(Wa(e.content,1,n,e.openEnd,0,0),e.openStart,n)),e}const Za={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let Ja=null;function Ga(){return Ja||(Ja=document.implementation.createHTMLDocument("title"))}const Ya={};let Xa={};function Qa(e,t){e.input.lastSelectionOrigin=t,e.input.lastSelectionTime=Date.now()}function el(e){return{left:e.clientX,top:e.clientY}}function tl(e,t,n,r,o){if(-1==r)return!1;let i=e.state.doc.resolve(r);for(let s=i.depth+1;s>0;s--)if(e.someProp(t,(t=>s>i.depth?t(e,n,i.nodeAfter,i.before(s),o,!0):t(e,n,i.node(s),i.before(s),o,!1))))return!0;return!1}function nl(e,t,n){e.focused||e.focus();let r=e.state.tr.setSelection(t);"pointer"==n&&r.setMeta("pointer",!0),e.dispatch(r)}function rl(e,t,n,r,o){return tl(e,"handleClickOn",t,n,r)||e.someProp("handleClick",(n=>n(e,t,r)))||(o?function(e,t){if(-1==t)return!1;let n,r,o=e.state.selection;o instanceof Mo&&(n=o.node);let i=e.state.doc.resolve(t);for(let s=i.depth+1;s>0;s--){let e=s>i.depth?i.nodeAfter:i.node(s);if(Mo.isSelectable(e)){r=n&&o.$from.depth>0&&s>=o.$from.depth&&i.before(o.$from.depth+1)==o.$from.pos?i.before(o.$from.depth):i.before(s);break}}return null!=r&&(nl(e,Mo.create(e.state.doc,r),"pointer"),!0)}(e,n):function(e,t){if(-1==t)return!1;let n=e.state.doc.resolve(t),r=n.nodeAfter;return!!(r&&r.isAtom&&Mo.isSelectable(r))&&(nl(e,new Mo(n),"pointer"),!0)}(e,n))}function ol(e,t,n,r){return tl(e,"handleDoubleClickOn",t,n,r)||e.someProp("handleDoubleClick",(n=>n(e,t,r)))}function il(e,t,n,r){return tl(e,"handleTripleClickOn",t,n,r)||e.someProp("handleTripleClick",(n=>n(e,t,r)))||function(e,t,n){if(0!=n.button)return!1;let r=e.state.doc;if(-1==t)return!!r.inlineContent&&(nl(e,Ao.create(r,0,r.content.size),"pointer"),!0);let o=r.resolve(t);for(let i=o.depth+1;i>0;i--){let t=i>o.depth?o.nodeAfter:o.node(i),n=o.before(i);if(t.inlineContent)nl(e,Ao.create(r,n+1,n+1+t.content.size),"pointer");else{if(!Mo.isSelectable(t))continue;nl(e,Mo.create(r,n),"pointer")}return!0}}(e,n,r)}function sl(e){return hl(e)}Xa.keydown=(e,t)=>{let n=t;if(e.input.shiftKey=16==n.keyCode||n.shiftKey,!ul(e,n)&&(e.input.lastKeyCode=n.keyCode,e.input.lastKeyCodeTime=Date.now(),!oa||!Qs||13!=n.keyCode))if(229!=n.keyCode&&e.domObserver.forceFlush(),!na||13!=n.keyCode||n.ctrlKey||n.altKey||n.metaKey)e.someProp("handleKeyDown",(t=>t(e,n)))||$a(e,n)?n.preventDefault():Qa(e,"key");else{let t=Date.now();e.input.lastIOSEnter=t,e.input.lastIOSEnterFallbackTimeout=setTimeout((()=>{e.input.lastIOSEnter==t&&(e.someProp("handleKeyDown",(t=>t(e,fa(13,"Enter")))),e.input.lastIOSEnter=0)}),200)}},Xa.keyup=(e,t)=>{16==t.keyCode&&(e.input.shiftKey=!1)},Xa.keypress=(e,t)=>{let n=t;if(ul(e,n)||!n.charCode||n.ctrlKey&&!n.altKey||ra&&n.metaKey)return;if(e.someProp("handleKeyPress",(t=>t(e,n))))return void n.preventDefault();let r=e.state.selection;if(!(r instanceof Ao&&r.$from.sameParent(r.$to))){let t=String.fromCharCode(n.charCode);e.someProp("handleTextInput",(n=>n(e,r.$from.pos,r.$to.pos,t)))||e.dispatch(e.state.tr.insertText(t).scrollIntoView()),n.preventDefault()}};const al=ra?"metaKey":"ctrlKey";Ya.mousedown=(e,t)=>{let n=t;e.input.shiftKey=n.shiftKey;let r=sl(e),o=Date.now(),i="singleClick";o-e.input.lastClick.time<500&&function(e,t){let n=t.x-e.clientX,r=t.y-e.clientY;return n*n+r*r<100}(n,e.input.lastClick)&&!n[al]&&("singleClick"==e.input.lastClick.type?i="doubleClick":"doubleClick"==e.input.lastClick.type&&(i="tripleClick")),e.input.lastClick={time:o,x:n.clientX,y:n.clientY,type:i};let s=e.posAtCoords(el(n));s&&("singleClick"==i?(e.input.mouseDown&&e.input.mouseDown.done(),e.input.mouseDown=new ll(e,s,n,!!r)):("doubleClick"==i?ol:il)(e,s.pos,s.inside,n)?n.preventDefault():Qa(e,"pointer"))};class ll{constructor(e,t,n,r){let o,i;if(this.view=e,this.pos=t,this.event=n,this.flushed=r,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!n[al],this.allowDefault=n.shiftKey,t.inside>-1)o=e.state.doc.nodeAt(t.inside),i=t.inside;else{let n=e.state.doc.resolve(t.pos);o=n.parent,i=n.depth?n.before():0}const s=r?null:n.target,a=s?e.docView.nearestDesc(s,!0):null;this.target=a?a.dom:null;let{selection:l}=e.state;(0==n.button&&o.type.spec.draggable&&!1!==o.type.spec.selectable||l instanceof Mo&&l.from<=i&&l.to>i)&&(this.mightDrag={node:o,pos:i,addAttr:!(!this.target||this.target.draggable),setUneditable:!(!this.target||!Ys||this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout((()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")}),20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),Qa(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout((()=>va(this.view))),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let t=this.pos;this.view.state.doc!=this.startDoc&&(t=this.view.posAtCoords(el(e))),this.allowDefault||!t?Qa(this.view,"pointer"):rl(this.view,t.pos,t.inside,e,this.selectNode)?e.preventDefault():0==e.button&&(this.flushed||ta&&this.mightDrag&&!this.mightDrag.node.isAtom||Qs&&!(this.view.state.selection instanceof Ao)&&Math.min(Math.abs(t.pos-this.view.state.selection.from),Math.abs(t.pos-this.view.state.selection.to))<=2)?(nl(this.view,wo.near(this.view.state.doc.resolve(t.pos)),"pointer"),e.preventDefault()):Qa(this.view,"pointer")}move(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0),Qa(this.view,"pointer"),0==e.buttons&&this.done()}}function ul(e,t){return!!e.composing||!!(ta&&Math.abs(t.timeStamp-e.input.compositionEndedAt)<500)&&(e.input.compositionEndedAt=-2e8,!0)}Ya.touchdown=e=>{sl(e),Qa(e,"pointer")},Ya.contextmenu=e=>sl(e);const cl=oa?5e3:-1;function dl(e,t){clearTimeout(e.input.composingTimeout),t>-1&&(e.input.composingTimeout=setTimeout((()=>hl(e)),t))}function pl(e){for(e.composing&&(e.input.composing=!1,e.input.compositionEndedAt=function(){let e=document.createEvent("Event");return e.initEvent("event",!0,!0),e.timeStamp}());e.input.compositionNodes.length>0;)e.input.compositionNodes.pop().markParentsDirty()}function hl(e,t=!1){if(!(oa&&e.domObserver.flushingSoon>=0)){if(e.domObserver.forceFlush(),pl(e),t||e.docView&&e.docView.dirty){let t=ga(e);return t&&!t.eq(e.state.selection)?e.dispatch(e.state.tr.setSelection(t)):e.updateState(e.state),!0}return!1}}Xa.compositionstart=Xa.compositionupdate=e=>{if(!e.composing){e.domObserver.flush();let{state:t}=e,n=t.selection.$from;if(t.selection.empty&&(t.storedMarks||!n.textOffset&&n.parentOffset&&n.nodeBefore.marks.some((e=>!1===e.type.spec.inclusive))))e.markCursor=e.state.storedMarks||n.marks(),hl(e,!0),e.markCursor=null;else if(hl(e),Ys&&t.selection.empty&&n.parentOffset&&!n.textOffset&&n.nodeBefore.marks.length){let t=e.domSelection();for(let e=t.focusNode,n=t.focusOffset;e&&1==e.nodeType&&0!=n;){let r=n<0?e.lastChild:e.childNodes[n-1];if(!r)break;if(3==r.nodeType){t.collapse(r,r.nodeValue.length);break}e=r,n=-1}}e.input.composing=!0}dl(e,cl)},Xa.compositionend=(e,t)=>{e.composing&&(e.input.composing=!1,e.input.compositionEndedAt=t.timeStamp,dl(e,20))};const fl=Js&&Gs<15||na&&sa<604;function ml(e,t,n,r){let o=_a(e,t,n,e.input.shiftKey,e.state.selection.$from);if(e.someProp("handlePaste",(t=>t(e,r,o||Wn.empty))))return!0;if(!o)return!1;let i=function(e){return 0==e.openStart&&0==e.openEnd&&1==e.content.childCount?e.content.firstChild:null}(o),s=i?e.state.tr.replaceSelectionWith(i,e.input.shiftKey):e.state.tr.replaceSelection(o);return e.dispatch(s.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}Ya.copy=Xa.cut=(e,t)=>{let n=t,r=e.state.selection,o="cut"==n.type;if(r.empty)return;let i=fl?null:n.clipboardData,s=r.content(),{dom:a,text:l}=ja(e,s);i?(n.preventDefault(),i.clearData(),i.setData("text/html",a.innerHTML),i.setData("text/plain",l)):function(e,t){if(!e.dom.parentNode)return;let n=e.dom.parentNode.appendChild(document.createElement("div"));n.appendChild(t),n.style.cssText="position: fixed; left: -10000px; top: 10px";let r=getSelection(),o=document.createRange();o.selectNodeContents(t),e.dom.blur(),r.removeAllRanges(),r.addRange(o),setTimeout((()=>{n.parentNode&&n.parentNode.removeChild(n),e.focus()}),50)}(e,a),o&&e.dispatch(e.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))},Xa.paste=(e,t)=>{let n=t;if(e.composing&&!oa)return;let r=fl?null:n.clipboardData;r&&ml(e,r.getData("text/plain"),r.getData("text/html"),n)?n.preventDefault():function(e,t){if(!e.dom.parentNode)return;let n=e.input.shiftKey||e.state.selection.$from.parent.type.spec.code,r=e.dom.parentNode.appendChild(document.createElement(n?"textarea":"div"));n||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus(),setTimeout((()=>{e.focus(),r.parentNode&&r.parentNode.removeChild(r),n?ml(e,r.value,null,t):ml(e,r.textContent,r.innerHTML,t)}),50)}(e,n)};class gl{constructor(e,t){this.slice=e,this.move=t}}const yl=ra?"altKey":"ctrlKey";Ya.dragstart=(e,t)=>{let n=t,r=e.input.mouseDown;if(r&&r.done(),!n.dataTransfer)return;let o=e.state.selection,i=o.empty?null:e.posAtCoords(el(n));if(i&&i.pos>=o.from&&i.pos<=(o instanceof Mo?o.to-1:o.to));else if(r&&r.mightDrag)e.dispatch(e.state.tr.setSelection(Mo.create(e.state.doc,r.mightDrag.pos)));else if(n.target&&1==n.target.nodeType){let t=e.docView.nearestDesc(n.target,!0);t&&t.node.type.spec.draggable&&t!=e.docView&&e.dispatch(e.state.tr.setSelection(Mo.create(e.state.doc,t.posBefore)))}let s=e.state.selection.content(),{dom:a,text:l}=ja(e,s);n.dataTransfer.clearData(),n.dataTransfer.setData(fl?"Text":"text/html",a.innerHTML),n.dataTransfer.effectAllowed="copyMove",fl||n.dataTransfer.setData("text/plain",l),e.dragging=new gl(s,!n[yl])},Ya.dragend=e=>{let t=e.dragging;window.setTimeout((()=>{e.dragging==t&&(e.dragging=null)}),50)},Xa.dragover=Xa.dragenter=(e,t)=>t.preventDefault(),Xa.drop=(e,t)=>{let n=t,r=e.dragging;if(e.dragging=null,!n.dataTransfer)return;let o=e.posAtCoords(el(n));if(!o)return;let i=e.state.doc.resolve(o.pos);if(!i)return;let s=r&&r.slice;s?e.someProp("transformPasted",(e=>{s=e(s)})):s=_a(e,n.dataTransfer.getData(fl?"Text":"text/plain"),fl?null:n.dataTransfer.getData("text/html"),!1,i);let a=!(!r||n[yl]);if(e.someProp("handleDrop",(t=>t(e,n,s||Wn.empty,a))))return void n.preventDefault();if(!s)return;n.preventDefault();let l=s?so(e.state.doc,i.pos,s):i.pos;null==l&&(l=i.pos);let u=e.state.tr;a&&u.deleteSelection();let c=u.mapping.map(l),d=0==s.openStart&&0==s.openEnd&&1==s.content.childCount,p=u.doc;if(d?u.replaceRangeWith(c,c,s.content.firstChild):u.replaceRange(c,c,s),u.doc.eq(p))return;let h=u.doc.resolve(c);if(d&&Mo.isSelectable(s.content.firstChild)&&h.nodeAfter&&h.nodeAfter.sameMarkup(s.content.firstChild))u.setSelection(new Mo(h));else{let t=u.mapping.map(l);u.mapping.maps[u.mapping.maps.length-1].forEach(((e,n,r,o)=>t=o)),u.setSelection(ka(e,h,u.doc.resolve(t)))}e.focus(),e.dispatch(u.setMeta("uiEvent","drop"))},Ya.focus=e=>{e.focused||(e.domObserver.stop(),e.dom.classList.add("ProseMirror-focused"),e.domObserver.start(),e.focused=!0,setTimeout((()=>{e.docView&&e.hasFocus()&&!e.domObserver.currentSelection.eq(e.domSelection())&&va(e)}),20))},Ya.blur=(e,t)=>{let n=t;e.focused&&(e.domObserver.stop(),e.dom.classList.remove("ProseMirror-focused"),e.domObserver.start(),n.relatedTarget&&e.dom.contains(n.relatedTarget)&&e.domObserver.currentSelection.clear(),e.focused=!1)},Ya.beforeinput=(e,t)=>{if(Qs&&oa&&"deleteContentBackward"==t.inputType){e.domObserver.flushSoon();let{domChangeCount:t}=e.input;setTimeout((()=>{if(e.input.domChangeCount!=t)return;if(e.dom.blur(),e.focus(),e.someProp("handleKeyDown",(t=>t(e,fa(8,"Backspace")))))return;let{$cursor:n}=e.state.selection;n&&n.pos>0&&e.dispatch(e.state.tr.delete(n.pos-1,n.pos).scrollIntoView())}),50)}};for(let os in Xa)Ya[os]=Xa[os];function vl(e,t){if(e==t)return!0;for(let n in e)if(e[n]!==t[n])return!1;for(let n in t)if(!(n in e))return!1;return!0}class bl{constructor(e,t){this.toDOM=e,this.spec=t||xl,this.side=this.spec.side||0}map(e,t,n,r){let{pos:o,deleted:i}=e.mapResult(t.from+r,this.side<0?-1:1);return i?null:new wl(o-n,o-n,this)}valid(){return!0}eq(e){return this==e||e instanceof bl&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&vl(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}}class Dl{constructor(e,t){this.attrs=e,this.spec=t||xl}map(e,t,n,r){let o=e.map(t.from+r,this.spec.inclusiveStart?-1:1)-n,i=e.map(t.to+r,this.spec.inclusiveEnd?1:-1)-n;return o>=i?null:new wl(o,i,this)}valid(e,t){return t.from<t.to}eq(e){return this==e||e instanceof Dl&&vl(this.attrs,e.attrs)&&vl(this.spec,e.spec)}static is(e){return e.type instanceof Dl}destroy(){}}class Cl{constructor(e,t){this.attrs=e,this.spec=t||xl}map(e,t,n,r){let o=e.mapResult(t.from+r,1);if(o.deleted)return null;let i=e.mapResult(t.to+r,-1);return i.deleted||i.pos<=o.pos?null:new wl(o.pos-n,i.pos-n,this)}valid(e,t){let n,{index:r,offset:o}=e.content.findIndex(t.from);return o==t.from&&!(n=e.child(r)).isText&&o+n.nodeSize==t.to}eq(e){return this==e||e instanceof Cl&&vl(this.attrs,e.attrs)&&vl(this.spec,e.spec)}destroy(){}}class wl{constructor(e,t,n){this.from=e,this.to=t,this.type=n}copy(e,t){return new wl(e,t,this.type)}eq(e,t=0){return this.type.eq(e.type)&&this.from+t==e.from&&this.to+t==e.to}map(e,t,n){return this.type.map(e,this,t,n)}static widget(e,t,n){return new wl(e,e,new bl(t,n))}static inline(e,t,n,r){return new wl(e,t,new Dl(n,r))}static node(e,t,n,r){return new wl(e,t,new Cl(n,r))}get spec(){return this.type.spec}get inline(){return this.type instanceof Dl}}const El=[],xl={};class kl{constructor(e,t){this.local=e.length?e:El,this.children=t.length?t:El}static create(e,t){return t.length?Tl(t,e,0,xl):Al}find(e,t,n){let r=[];return this.findInner(null==e?0:e,null==t?1e9:t,r,0,n),r}findInner(e,t,n,r,o){for(let i=0;i<this.local.length;i++){let s=this.local[i];s.from<=t&&s.to>=e&&(!o||o(s.spec))&&n.push(s.copy(s.from+r,s.to+r))}for(let i=0;i<this.children.length;i+=3)if(this.children[i]<t&&this.children[i+1]>e){let s=this.children[i]+1;this.children[i+2].findInner(e-s,t-s,n,r+s,o)}}map(e,t,n){return this==Al||0==e.maps.length?this:this.mapInner(e,t,0,0,n||xl)}mapInner(e,t,n,r,o){let i;for(let s=0;s<this.local.length;s++){let a=this.local[s].map(e,n,r);a&&a.type.valid(t,a)?(i||(i=[])).push(a):o.onRemove&&o.onRemove(this.local[s].spec)}return this.children.length?function(e,t,n,r,o,i,s){let a=e.slice(),l=(e,t,n,r)=>{for(let s=0;s<a.length;s+=3){let l,u=a[s+1];if(u<0||e>u+i)continue;let c=a[s]+i;t>=c?a[s+1]=e<=c?-2:-1:n>=o&&(l=r-n-(t-e))&&(a[s]+=l,a[s+1]+=l)}};for(let c=0;c<n.maps.length;c++)n.maps[c].forEach(l);let u=!1;for(let c=0;c<a.length;c+=3)if(a[c+1]<0){if(-2==a[c+1]){u=!0,a[c+1]=-1;continue}let t=n.map(e[c]+i),l=t-o;if(l<0||l>=r.content.size){u=!0;continue}let d=n.map(e[c+1]+i,-1)-o,{index:p,offset:h}=r.content.findIndex(l),f=r.maybeChild(p);if(f&&h==l&&h+f.nodeSize==d){let r=a[c+2].mapInner(n,f,t+1,e[c]+i+1,s);r!=Al?(a[c]=l,a[c+1]=d,a[c+2]=r):(a[c+1]=-2,u=!0)}else u=!0}if(u){let l=function(e,t,n,r,o,i,s){function a(e,t){for(let i=0;i<e.local.length;i++){let a=e.local[i].map(r,o,t);a?n.push(a):s.onRemove&&s.onRemove(e.local[i].spec)}for(let n=0;n<e.children.length;n+=3)a(e.children[n+2],e.children[n]+t+1)}for(let l=0;l<e.length;l+=3)-1==e[l+1]&&a(e[l+2],t[l]+i+1);return n}(a,e,t,n,o,i,s),u=Tl(l,r,0,s);t=u.local;for(let e=0;e<a.length;e+=3)a[e+1]<0&&(a.splice(e,3),e-=3);for(let e=0,t=0;e<u.children.length;e+=3){let n=u.children[e];for(;t<a.length&&a[t]<n;)t+=3;a.splice(t,0,u.children[e],u.children[e+1],u.children[e+2])}}return new kl(t.sort(Bl),a)}(this.children,i||[],e,t,n,r,o):i?new kl(i.sort(Bl),El):Al}add(e,t){return t.length?this==Al?kl.create(e,t):this.addInner(e,t,0):this}addInner(e,t,n){let r,o=0;e.forEach(((e,i)=>{let s,a=i+n;if(s=Fl(t,e,a)){for(r||(r=this.children.slice());o<r.length&&r[o]<i;)o+=3;r[o]==i?r[o+2]=r[o+2].addInner(e,s,a+1):r.splice(o,0,i,i+e.nodeSize,Tl(s,e,a+1,xl)),o+=3}}));let i=Ml(o?Ol(t):t,-n);for(let s=0;s<i.length;s++)i[s].type.valid(e,i[s])||i.splice(s--,1);return new kl(i.length?this.local.concat(i).sort(Bl):this.local,r||this.children)}remove(e){return 0==e.length||this==Al?this:this.removeInner(e,0)}removeInner(e,t){let n=this.children,r=this.local;for(let o=0;o<n.length;o+=3){let r,i=n[o]+t,s=n[o+1]+t;for(let t,n=0;n<e.length;n++)(t=e[n])&&t.from>i&&t.to<s&&(e[n]=null,(r||(r=[])).push(t));if(!r)continue;n==this.children&&(n=this.children.slice());let a=n[o+2].removeInner(r,i+1);a!=Al?n[o+2]=a:(n.splice(o,3),o-=3)}if(r.length)for(let o,i=0;i<e.length;i++)if(o=e[i])for(let e=0;e<r.length;e++)r[e].eq(o,t)&&(r==this.local&&(r=this.local.slice()),r.splice(e--,1));return n==this.children&&r==this.local?this:r.length||n.length?new kl(r,n):Al}forChild(e,t){if(this==Al)return this;if(t.isLeaf)return kl.empty;let n,r;for(let s=0;s<this.children.length;s+=3)if(this.children[s]>=e){this.children[s]==e&&(n=this.children[s+2]);break}let o=e+1,i=o+t.content.size;for(let s=0;s<this.local.length;s++){let e=this.local[s];if(e.from<i&&e.to>o&&e.type instanceof Dl){let t=Math.max(o,e.from)-o,n=Math.min(i,e.to)-o;t<n&&(r||(r=[])).push(e.copy(t,n))}}if(r){let e=new kl(r.sort(Bl),El);return n?new Sl([e,n]):e}return n||Al}eq(e){if(this==e)return!0;if(!(e instanceof kl)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let t=0;t<this.local.length;t++)if(!this.local[t].eq(e.local[t]))return!1;for(let t=0;t<this.children.length;t+=3)if(this.children[t]!=e.children[t]||this.children[t+1]!=e.children[t+1]||!this.children[t+2].eq(e.children[t+2]))return!1;return!0}locals(e){return Nl(this.localsInner(e))}localsInner(e){if(this==Al)return El;if(e.inlineContent||!this.local.some(Dl.is))return this.local;let t=[];for(let n=0;n<this.local.length;n++)this.local[n].type instanceof Dl||t.push(this.local[n]);return t}}kl.empty=new kl([],[]),kl.removeOverlap=Nl;const Al=kl.empty;class Sl{constructor(e){this.members=e}map(e,t){const n=this.members.map((n=>n.map(e,t,xl)));return Sl.from(n)}forChild(e,t){if(t.isLeaf)return kl.empty;let n=[];for(let r=0;r<this.members.length;r++){let o=this.members[r].forChild(e,t);o!=Al&&(o instanceof Sl?n=n.concat(o.members):n.push(o))}return Sl.from(n)}eq(e){if(!(e instanceof Sl)||e.members.length!=this.members.length)return!1;for(let t=0;t<this.members.length;t++)if(!this.members[t].eq(e.members[t]))return!1;return!0}locals(e){let t,n=!0;for(let r=0;r<this.members.length;r++){let o=this.members[r].localsInner(e);if(o.length)if(t){n&&(t=t.slice(),n=!1);for(let e=0;e<o.length;e++)t.push(o[e])}else t=o}return t?Nl(n?t:t.sort(Bl)):El}static from(e){switch(e.length){case 0:return Al;case 1:return e[0];default:return new Sl(e)}}}function Ml(e,t){if(!t||!e.length)return e;let n=[];for(let r=0;r<e.length;r++){let o=e[r];n.push(new wl(o.from+t,o.to+t,o.type))}return n}function Fl(e,t,n){if(t.isLeaf)return null;let r=n+t.nodeSize,o=null;for(let i,s=0;s<e.length;s++)(i=e[s])&&i.from>n&&i.to<r&&((o||(o=[])).push(i),e[s]=null);return o}function Ol(e){let t=[];for(let n=0;n<e.length;n++)null!=e[n]&&t.push(e[n]);return t}function Tl(e,t,n,r){let o=[],i=!1;t.forEach(((t,s)=>{let a=Fl(e,t,s+n);if(a){i=!0;let e=Tl(a,t,n+s+1,r);e!=Al&&o.push(s,s+t.nodeSize,e)}}));let s=Ml(i?Ol(e):e,-n).sort(Bl);for(let a=0;a<s.length;a++)s[a].type.valid(t,s[a])||(r.onRemove&&r.onRemove(s[a].spec),s.splice(a--,1));return s.length||o.length?new kl(s,o):Al}function Bl(e,t){return e.from-t.from||e.to-t.to}function Nl(e){let t=e;for(let n=0;n<t.length-1;n++){let r=t[n];if(r.from!=r.to)for(let o=n+1;o<t.length;o++){let i=t[o];if(i.from!=r.from){i.from<r.to&&(t==e&&(t=e.slice()),t[n]=r.copy(r.from,i.from),Rl(t,o,r.copy(i.from,r.to)));break}i.to!=r.to&&(t==e&&(t=e.slice()),t[o]=i.copy(i.from,r.to),Rl(t,o+1,i.copy(r.to,i.to)))}}return t}function Rl(e,t,n){for(;t<e.length&&Bl(n,e[t])>0;)t++;e.splice(t,0,n)}class Il extends wo{constructor(e){super(e,e)}map(e,t){let n=e.resolve(t.map(this.head));return Il.valid(n)?new Il(n):wo.near(n)}content(){return Wn.empty}eq(e){return e instanceof Il&&e.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(e,t){if("number"!=typeof t.pos)throw new RangeError("Invalid input for GapCursor.fromJSON");return new Il(e.resolve(t.pos))}getBookmark(){return new Pl(this.anchor)}static valid(e){let t=e.parent;if(t.isTextblock||!function(e){for(let t=e.depth;t>=0;t--){let n=e.index(t),r=e.node(t);if(0!=n)for(let e=r.child(n-1);;e=e.lastChild){if(0==e.childCount&&!e.inlineContent||e.isAtom||e.type.spec.isolating)return!0;if(e.inlineContent)return!1}else if(r.type.spec.isolating)return!0}return!0}(e)||!function(e){for(let t=e.depth;t>=0;t--){let n=e.indexAfter(t),r=e.node(t);if(n!=r.childCount)for(let e=r.child(n);;e=e.firstChild){if(0==e.childCount&&!e.inlineContent||e.isAtom||e.type.spec.isolating)return!0;if(e.inlineContent)return!1}else if(r.type.spec.isolating)return!0}return!0}(e))return!1;let n=t.type.spec.allowGapCursor;if(null!=n)return n;let r=t.contentMatchAt(e.index()).defaultType;return r&&r.isTextblock}static findGapCursorFrom(e,t,n=!1){e:for(;;){if(!n&&Il.valid(e))return e;let r=e.pos,o=null;for(let n=e.depth;;n--){let i=e.node(n);if(t>0?e.indexAfter(n)<i.childCount:e.index(n)>0){o=i.child(t>0?e.indexAfter(n):e.index(n)-1);break}if(0==n)return null;r+=t;let s=e.doc.resolve(r);if(Il.valid(s))return s}for(;;){let i=t>0?o.firstChild:o.lastChild;if(!i){if(o.isAtom&&!o.isText&&!Mo.isSelectable(o)){e=e.doc.resolve(r+o.nodeSize*t),n=!1;continue e}break}o=i,r+=t;let s=e.doc.resolve(r);if(Il.valid(s))return s}return null}}}Il.prototype.visible=!1,Il.findFrom=Il.findGapCursorFrom,wo.jsonID("gapcursor",Il);class Pl{constructor(e){this.pos=e}map(e){return new Pl(e.map(this.pos))}resolve(e){let t=e.resolve(this.pos);return Il.valid(t)?new Il(t):wo.near(t)}}const Ll=Hs({ArrowLeft:zl("horiz",-1),ArrowRight:zl("horiz",1),ArrowUp:zl("vert",-1),ArrowDown:zl("vert",1)});function zl(e,t){const n="vert"==e?t>0?"down":"up":t>0?"right":"left";return function(e,r,o){let i=e.selection,s=t>0?i.$to:i.$from,a=i.empty;if(i instanceof Ao){if(!o.endOfTextblock(n)||0==s.depth)return!1;a=!1,s=e.doc.resolve(t>0?s.after():s.before())}let l=Il.findGapCursorFrom(s,t,a);return!!l&&(r&&r(e.tr.setSelection(new Il(l))),!0)}}function $l(e,t,n){if(!e||!e.editable)return!1;let r=e.state.doc.resolve(t);if(!Il.valid(r))return!1;let o=e.posAtCoords({left:n.clientX,top:n.clientY});return!(o&&o.inside>-1&&Mo.isSelectable(e.state.doc.nodeAt(o.inside)))&&(e.dispatch(e.state.tr.setSelection(new Il(r))),!0)}function jl(e,t){if("insertCompositionText"!=t.inputType||!(e.state.selection instanceof Il))return!1;let{$from:n}=e.state.selection,r=n.parent.contentMatchAt(n.index()).findWrapping(e.state.schema.nodes.text);if(!r)return!1;let o=jn.empty;for(let s=r.length-1;s>=0;s--)o=jn.from(r[s].createAndFill(null,o));let i=e.state.tr.replace(n.pos,n.pos,new Wn(o,0,0));return i.setSelection(Ao.near(i.doc.resolve(n.pos+1))),e.dispatch(i),!1}function _l(e){if(!(e.selection instanceof Il))return null;let t=document.createElement("div");return t.className="ProseMirror-gapcursor",kl.create(e.doc,[wl.widget(e.selection.head,t,{key:"gapcursor"})])}const Hl=Ai.create({name:"gapCursor",addProseMirrorPlugins:()=>[new Lo({props:{decorations:_l,createSelectionBetween:(e,t,n)=>t.pos==n.pos&&Il.valid(n)?new Il(n):null,handleClick:$l,handleKeyDown:Ll,handleDOMEvents:{beforeinput:jl}}})],extendNodeSchema(e){var t;return{allowGapCursor:null!==(t=Di(mi(e,"allowGapCursor",{name:e.name,options:e.options,storage:e.storage})))&&void 0!==t?t:null}}}),Kl=ls.create({name:"hardBreak",addOptions:()=>({keepMarks:!0,HTMLAttributes:{}}),inline:!0,group:"inline",selectable:!1,parseHTML:()=>[{tag:"br"}],renderHTML({HTMLAttributes:e}){return["br",vi(this.options.HTMLAttributes,e)]},renderText:()=>"\n",addCommands(){return{setHardBreak:()=>({commands:e,chain:t,state:n,editor:r})=>e.first([()=>e.exitCode(),()=>e.command((()=>{const{selection:e,storedMarks:o}=n;if(e.$from.parent.type.spec.isolating)return!1;const{keepMarks:i}=this.options,{splittableMarks:s}=r.extensionManager,a=o||e.$to.parentOffset&&e.$from.marks();return t().insertContent({type:this.name}).command((({tr:e,dispatch:t})=>{if(t&&a&&i){const t=a.filter((e=>s.includes(e.type.name)));e.ensureMarks(t)}return!0})).run()}))])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),Vl=ls.create({name:"heading",addOptions:()=>({levels:[1,2,3,4,5,6],HTMLAttributes:{}}),content:"inline*",group:"block",defining:!0,addAttributes:()=>({level:{default:1,rendered:!1}}),parseHTML(){return this.options.levels.map((e=>({tag:`h${e}`,attrs:{level:e}})))},renderHTML({node:e,HTMLAttributes:t}){return[`h${this.options.levels.includes(e.attrs.level)?e.attrs.level:this.options.levels[0]}`,vi(this.options.HTMLAttributes,t),0]},addCommands(){return{setHeading:e=>({commands:t})=>!!this.options.levels.includes(e.level)&&t.setNode(this.name,e),toggleHeading:e=>({commands:t})=>!!this.options.levels.includes(e.level)&&t.toggleNode(this.name,"paragraph",e)}},addKeyboardShortcuts(){return this.options.levels.reduce(((e,t)=>({...e,[`Mod-Alt-${t}`]:()=>this.editor.commands.toggleHeading({level:t})})),{})},addInputRules(){return this.options.levels.map((e=>is({find:new RegExp(`^(#{1,${e}})\\s$`),type:this.type,getAttributes:{level:e}})))}});var ql=200,Wl=function(){};Wl.prototype.append=function(e){return e.length?(e=Wl.from(e),!this.length&&e||e.length<ql&&this.leafAppend(e)||this.length<ql&&e.leafPrepend(this)||this.appendInner(e)):this},Wl.prototype.prepend=function(e){return e.length?Wl.from(e).append(this):this},Wl.prototype.appendInner=function(e){return new Zl(this,e)},Wl.prototype.slice=function(e,t){return void 0===e&&(e=0),void 0===t&&(t=this.length),e>=t?Wl.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,t))},Wl.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)},Wl.prototype.forEach=function(e,t,n){void 0===t&&(t=0),void 0===n&&(n=this.length),t<=n?this.forEachInner(e,t,n,0):this.forEachInvertedInner(e,t,n,0)},Wl.prototype.map=function(e,t,n){void 0===t&&(t=0),void 0===n&&(n=this.length);var r=[];return this.forEach((function(t,n){return r.push(e(t,n))}),t,n),r},Wl.from=function(e){return e instanceof Wl?e:e&&e.length?new Ul(e):Wl.empty};var Ul=function(e){function t(t){e.call(this),this.values=t}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={length:{configurable:!0},depth:{configurable:!0}};return t.prototype.flatten=function(){return this.values},t.prototype.sliceInner=function(e,n){return 0==e&&n==this.length?this:new t(this.values.slice(e,n))},t.prototype.getInner=function(e){return this.values[e]},t.prototype.forEachInner=function(e,t,n,r){for(var o=t;o<n;o++)if(!1===e(this.values[o],r+o))return!1},t.prototype.forEachInvertedInner=function(e,t,n,r){for(var o=t-1;o>=n;o--)if(!1===e(this.values[o],r+o))return!1},t.prototype.leafAppend=function(e){if(this.length+e.length<=ql)return new t(this.values.concat(e.flatten()))},t.prototype.leafPrepend=function(e){if(this.length+e.length<=ql)return new t(e.flatten().concat(this.values))},n.length.get=function(){return this.values.length},n.depth.get=function(){return 0},Object.defineProperties(t.prototype,n),t}(Wl);Wl.empty=new Ul([]);var Zl=function(e){function t(t,n){e.call(this),this.left=t,this.right=n,this.length=t.length+n.length,this.depth=Math.max(t.depth,n.depth)+1}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},t.prototype.getInner=function(e){return e<this.left.length?this.left.get(e):this.right.get(e-this.left.length)},t.prototype.forEachInner=function(e,t,n,r){var o=this.left.length;return!(t<o&&!1===this.left.forEachInner(e,t,Math.min(n,o),r))&&(!(n>o&&!1===this.right.forEachInner(e,Math.max(t-o,0),Math.min(this.length,n)-o,r+o))&&void 0)},t.prototype.forEachInvertedInner=function(e,t,n,r){var o=this.left.length;return!(t>o&&!1===this.right.forEachInvertedInner(e,t-o,Math.max(n,o)-o,r+o))&&(!(n<o&&!1===this.left.forEachInvertedInner(e,Math.min(t,o),n,r))&&void 0)},t.prototype.sliceInner=function(e,t){if(0==e&&t==this.length)return this;var n=this.left.length;return t<=n?this.left.slice(e,t):e>=n?this.right.slice(e-n,t-n):this.left.slice(e,n).append(this.right.slice(0,t-n))},t.prototype.leafAppend=function(e){var n=this.right.leafAppend(e);if(n)return new t(this.left,n)},t.prototype.leafPrepend=function(e){var n=this.left.leafPrepend(e);if(n)return new t(n,this.right)},t.prototype.appendInner=function(e){return this.left.depth>=Math.max(this.right.depth,e.depth)+1?new t(this.left,new t(this.right,e)):new t(this,e)},t}(Wl),Jl=Wl;class Gl{constructor(e,t){this.items=e,this.eventCount=t}popEvent(e,t){if(0==this.eventCount)return null;let n,r,o=this.items.length;for(;;o--){if(this.items.get(o-1).selection){--o;break}}t&&(n=this.remapping(o,this.items.length),r=n.maps.length);let i,s,a=e.tr,l=[],u=[];return this.items.forEach(((e,t)=>{if(!e.step)return n||(n=this.remapping(o,t+1),r=n.maps.length),r--,void u.push(e);if(n){u.push(new Yl(e.map));let t,o=e.step.map(n.slice(r));o&&a.maybeStep(o).doc&&(t=a.mapping.maps[a.mapping.maps.length-1],l.push(new Yl(t,void 0,void 0,l.length+u.length))),r--,t&&n.appendMap(t,r)}else a.maybeStep(e.step);return e.selection?(i=n?e.selection.map(n.slice(r)):e.selection,s=new Gl(this.items.slice(0,o).append(u.reverse().concat(l)),this.eventCount-1),!1):void 0}),this.items.length,0),{remaining:s,transform:a,selection:i}}addTransform(e,t,n,r){let o=[],i=this.eventCount,s=this.items,a=!r&&s.length?s.get(s.length-1):null;for(let u=0;u<e.steps.length;u++){let n,l=e.steps[u].invert(e.docs[u]),c=new Yl(e.mapping.maps[u],l,t);(n=a&&a.merge(c))&&(c=n,u?o.pop():s=s.slice(0,s.length-1)),o.push(c),t&&(i++,t=void 0),r||(a=c)}let l=i-n.depth;return l>Ql&&(s=function(e,t){let n;return e.forEach(((e,r)=>{if(e.selection&&0==t--)return n=r,!1})),e.slice(n)}(s,l),i-=l),new Gl(s.append(o),i)}remapping(e,t){let n=new Kr;return this.items.forEach(((t,r)=>{let o=null!=t.mirrorOffset&&r-t.mirrorOffset>=e?n.maps.length-t.mirrorOffset:void 0;n.appendMap(t.map,o)}),e,t),n}addMaps(e){return 0==this.eventCount?this:new Gl(this.items.append(e.map((e=>new Yl(e)))),this.eventCount)}rebased(e,t){if(!this.eventCount)return this;let n=[],r=Math.max(0,this.items.length-t),o=e.mapping,i=e.steps.length,s=this.eventCount;this.items.forEach((e=>{e.selection&&s--}),r);let a=t;this.items.forEach((t=>{let r=o.getMirror(--a);if(null==r)return;i=Math.min(i,r);let l=o.maps[r];if(t.step){let i=e.steps[r].invert(e.docs[r]),u=t.selection&&t.selection.map(o.slice(a+1,r));u&&s++,n.push(new Yl(l,i,u))}else n.push(new Yl(l))}),r);let l=[];for(let d=t;d<i;d++)l.push(new Yl(o.maps[d]));let u=this.items.slice(0,r).append(l).append(n),c=new Gl(u,s);return c.emptyItemCount()>500&&(c=c.compress(this.items.length-n.length)),c}emptyItemCount(){let e=0;return this.items.forEach((t=>{t.step||e++})),e}compress(e=this.items.length){let t=this.remapping(0,e),n=t.maps.length,r=[],o=0;return this.items.forEach(((i,s)=>{if(s>=e)r.push(i),i.selection&&o++;else if(i.step){let e=i.step.map(t.slice(n)),s=e&&e.getMap();if(n--,s&&t.appendMap(s,n),e){let a=i.selection&&i.selection.map(t.slice(n));a&&o++;let l,u=new Yl(s.invert(),e,a),c=r.length-1;(l=r.length&&r[c].merge(u))?r[c]=l:r.push(u)}}else i.map&&n--}),this.items.length,0),new Gl(Jl.from(r.reverse()),o)}}Gl.empty=new Gl(Jl.empty,0);class Yl{constructor(e,t,n,r){this.map=e,this.step=t,this.selection=n,this.mirrorOffset=r}merge(e){if(this.step&&e.step&&!e.selection){let t=e.step.merge(this.step);if(t)return new Yl(t.getMap().invert(),t,this.selection)}}}class Xl{constructor(e,t,n,r){this.done=e,this.undone=t,this.prevRanges=n,this.prevTime=r}}const Ql=20;function eu(e){let t=[];return e.forEach(((e,n,r,o)=>t.push(r,o))),t}function tu(e,t){if(!e)return null;let n=[];for(let r=0;r<e.length;r+=2){let o=t.map(e[r],1),i=t.map(e[r+1],-1);o<=i&&n.push(o,i)}return n}function nu(e,t,n,r){let o=iu(t),i=su.get(t).spec.config,s=(r?e.undone:e.done).popEvent(t,o);if(!s)return;let a=s.selection.resolve(s.transform.doc),l=(r?e.done:e.undone).addTransform(s.transform,t.selection.getBookmark(),i,o),u=new Xl(r?l:s.remaining,r?s.remaining:l,null,0);n(s.transform.setSelection(a).setMeta(su,{redo:r,historyState:u}).scrollIntoView())}let ru=!1,ou=null;function iu(e){let t=e.plugins;if(ou!=t){ru=!1,ou=t;for(let e=0;e<t.length;e++)if(t[e].spec.historyPreserveItems){ru=!0;break}}return ru}const su=new jo("history"),au=new jo("closeHistory");function lu(e={}){return e={depth:e.depth||100,newGroupDelay:e.newGroupDelay||500},new Lo({key:su,state:{init:()=>new Xl(Gl.empty,Gl.empty,null,0),apply:(t,n,r)=>function(e,t,n,r){let o,i=n.getMeta(su);if(i)return i.historyState;n.getMeta(au)&&(e=new Xl(e.done,e.undone,null,0));let s=n.getMeta("appendedTransaction");if(0==n.steps.length)return e;if(s&&s.getMeta(su))return s.getMeta(su).redo?new Xl(e.done.addTransform(n,void 0,r,iu(t)),e.undone,eu(n.mapping.maps[n.steps.length-1]),e.prevTime):new Xl(e.done,e.undone.addTransform(n,void 0,r,iu(t)),null,e.prevTime);if(!1===n.getMeta("addToHistory")||s&&!1===s.getMeta("addToHistory"))return(o=n.getMeta("rebased"))?new Xl(e.done.rebased(n,o),e.undone.rebased(n,o),tu(e.prevRanges,n.mapping),e.prevTime):new Xl(e.done.addMaps(n.mapping.maps),e.undone.addMaps(n.mapping.maps),tu(e.prevRanges,n.mapping),e.prevTime);{let o=0==e.prevTime||!s&&(e.prevTime<(n.time||0)-r.newGroupDelay||!function(e,t){if(!t)return!1;if(!e.docChanged)return!0;let n=!1;return e.mapping.maps[0].forEach(((e,r)=>{for(let o=0;o<t.length;o+=2)e<=t[o+1]&&r>=t[o]&&(n=!0)})),n}(n,e.prevRanges)),i=s?tu(e.prevRanges,n.mapping):eu(n.mapping.maps[n.steps.length-1]);return new Xl(e.done.addTransform(n,o?t.selection.getBookmark():void 0,r,iu(t)),Gl.empty,i,n.time)}}(n,r,t,e)},config:e,props:{handleDOMEvents:{beforeinput(e,t){let n=t.inputType,r="historyUndo"==n?uu:"historyRedo"==n?cu:null;return!!r&&(t.preventDefault(),r(e.state,e.dispatch))}}}})}const uu=(e,t)=>{let n=su.getState(e);return!(!n||0==n.done.eventCount)&&(t&&nu(n,e,t,!1),!0)},cu=(e,t)=>{let n=su.getState(e);return!(!n||0==n.undone.eventCount)&&(t&&nu(n,e,t,!0),!0)};const du=Ai.create({name:"history",addOptions:()=>({depth:100,newGroupDelay:500}),addCommands:()=>({undo:()=>({state:e,dispatch:t})=>uu(e,t),redo:()=>({state:e,dispatch:t})=>cu(e,t)}),addProseMirrorPlugins(){return[lu(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Mod-y":()=>this.editor.commands.redo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-\u044f":()=>this.editor.commands.undo(),"Shift-Mod-\u044f":()=>this.editor.commands.redo()}}}),pu=ls.create({name:"horizontalRule",addOptions:()=>({HTMLAttributes:{}}),group:"block",parseHTML:()=>[{tag:"hr"}],renderHTML({HTMLAttributes:e}){return["hr",vi(this.options.HTMLAttributes,e)]},addCommands(){return{setHorizontalRule:()=>({chain:e})=>e().insertContent({type:this.name}).command((({tr:e,dispatch:t})=>{var n;if(t){const{$to:t}=e.selection,r=t.end();if(t.nodeAfter)e.setSelection(Ao.create(e.doc,t.pos));else{const o=null===(n=t.parent.type.contentMatch.defaultType)||void 0===n?void 0:n.create();o&&(e.insert(r,o),e.setSelection(Ao.create(e.doc,r)))}e.scrollIntoView()}return!0})).run()}},addInputRules(){return[(e={find:/^(?:---|\u2014-|___\s|\*\*\*\s)$/,type:this.type},new wi({find:e.find,handler:({state:t,range:n,match:r})=>{const o=Di(e.getAttributes,void 0,r)||{},{tr:i}=t,s=n.from;let a=n.to;if(r[1]){let t=s+r[0].lastIndexOf(r[1]);t>a?t=a:a=t+r[1].length;const n=r[0][r[0].length-1];i.insertText(n,s+r[0].length-1),i.replaceWith(t,a,e.type.create(o))}else r[0]&&i.replaceWith(s,a,e.type.create(o))}}))];var e}}),hu=/(?:^|\s)((?:\*)((?:[^*]+))(?:\*))$/,fu=/(?:^|\s)((?:\*)((?:[^*]+))(?:\*))/g,mu=/(?:^|\s)((?:_)((?:[^_]+))(?:_))$/,gu=/(?:^|\s)((?:_)((?:[^_]+))(?:_))/g,yu=as.create({name:"italic",addOptions:()=>({HTMLAttributes:{}}),parseHTML:()=>[{tag:"em"},{tag:"i",getAttrs:e=>"normal"!==e.style.fontStyle&&null},{style:"font-style=italic"}],renderHTML({HTMLAttributes:e}){return["em",vi(this.options.HTMLAttributes,e),0]},addCommands(){return{setItalic:()=>({commands:e})=>e.setMark(this.name),toggleItalic:()=>({commands:e})=>e.toggleMark(this.name),unsetItalic:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[rs({find:hu,type:this.type}),rs({find:mu,type:this.type})]},addPasteRules(){return[us({find:fu,type:this.type}),us({find:gu,type:this.type})]}}),vu=ls.create({name:"listItem",addOptions:()=>({HTMLAttributes:{}}),content:"paragraph block*",defining:!0,parseHTML:()=>[{tag:"li"}],renderHTML({HTMLAttributes:e}){return["li",vi(this.options.HTMLAttributes,e),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),bu=/^(\d+)\.\s$/,Du=ls.create({name:"orderedList",addOptions:()=>({itemTypeName:"listItem",HTMLAttributes:{}}),group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes:()=>({start:{default:1,parseHTML:e=>e.hasAttribute("start")?parseInt(e.getAttribute("start")||"",10):1}}),parseHTML:()=>[{tag:"ol"}],renderHTML({HTMLAttributes:e}){const{start:t,...n}=e;return 1===t?["ol",vi(this.options.HTMLAttributes,n),0]:["ol",vi(this.options.HTMLAttributes,e),0]},addCommands(){return{toggleOrderedList:()=>({commands:e})=>e.toggleList(this.name,this.options.itemTypeName)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){return[ss({find:bu,type:this.type,getAttributes:e=>({start:+e[1]}),joinPredicate:(e,t)=>t.childCount+t.attrs.start===+e[1]})]}}),Cu=ls.create({name:"paragraph",priority:1e3,addOptions:()=>({HTMLAttributes:{}}),group:"block",content:"inline*",parseHTML:()=>[{tag:"p"}],renderHTML({HTMLAttributes:e}){return["p",vi(this.options.HTMLAttributes,e),0]},addCommands(){return{setParagraph:()=>({commands:e})=>e.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),wu=/(?:^|\s)((?:~~)((?:[^~]+))(?:~~))$/,Eu=/(?:^|\s)((?:~~)((?:[^~]+))(?:~~))/g,xu=as.create({name:"strike",addOptions:()=>({HTMLAttributes:{}}),parseHTML:()=>[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:e=>!!e.includes("line-through")&&{}}],renderHTML({HTMLAttributes:e}){return["s",vi(this.options.HTMLAttributes,e),0]},addCommands(){return{setStrike:()=>({commands:e})=>e.setMark(this.name),toggleStrike:()=>({commands:e})=>e.toggleMark(this.name),unsetStrike:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-x":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[rs({find:wu,type:this.type})]},addPasteRules(){return[us({find:Eu,type:this.type})]}}),ku=ls.create({name:"text",group:"inline"});Ai.create({name:"starterKit",addExtensions(){var e,t,n,r,o,i,s,a,l,u,c,d,p,h,f,m,g,y;const v=[];return!1!==this.options.blockquote&&v.push(ds.configure(null===(e=this.options)||void 0===e?void 0:e.blockquote)),!1!==this.options.bold&&v.push(gs.configure(null===(t=this.options)||void 0===t?void 0:t.bold)),!1!==this.options.bulletList&&v.push(vs.configure(null===(n=this.options)||void 0===n?void 0:n.bulletList)),!1!==this.options.code&&v.push(Cs.configure(null===(r=this.options)||void 0===r?void 0:r.code)),!1!==this.options.codeBlock&&v.push(xs.configure(null===(o=this.options)||void 0===o?void 0:o.codeBlock)),!1!==this.options.document&&v.push(ks.configure(null===(i=this.options)||void 0===i?void 0:i.document)),!1!==this.options.dropcursor&&v.push(Ms.configure(null===(s=this.options)||void 0===s?void 0:s.dropcursor)),!1!==this.options.gapcursor&&v.push(Hl.configure(null===(a=this.options)||void 0===a?void 0:a.gapcursor)),!1!==this.options.hardBreak&&v.push(Kl.configure(null===(l=this.options)||void 0===l?void 0:l.hardBreak)),!1!==this.options.heading&&v.push(Vl.configure(null===(u=this.options)||void 0===u?void 0:u.heading)),!1!==this.options.history&&v.push(du.configure(null===(c=this.options)||void 0===c?void 0:c.history)),!1!==this.options.horizontalRule&&v.push(pu.configure(null===(d=this.options)||void 0===d?void 0:d.horizontalRule)),!1!==this.options.italic&&v.push(yu.configure(null===(p=this.options)||void 0===p?void 0:p.italic)),!1!==this.options.listItem&&v.push(vu.configure(null===(h=this.options)||void 0===h?void 0:h.listItem)),!1!==this.options.orderedList&&v.push(Du.configure(null===(f=this.options)||void 0===f?void 0:f.orderedList)),!1!==this.options.paragraph&&v.push(Cu.configure(null===(m=this.options)||void 0===m?void 0:m.paragraph)),!1!==this.options.strike&&v.push(xu.configure(null===(g=this.options)||void 0===g?void 0:g.strike)),!1!==this.options.text&&v.push(ku.configure(null===(y=this.options)||void 0===y?void 0:y.text)),v}});function Au(e){this.j={},this.jr=[],this.jd=null,this.t=e}Au.prototype={accepts:function(){return!!this.t},tt:function(e,t){if(t&&t.j)return this.j[e]=t,t;var n=t,r=this.j[e];if(r)return n&&(r.t=n),r;r=Su();var o=Tu(this,e);return o?(Object.assign(r.j,o.j),r.jr.append(o.jr),r.jr=o.jd,r.t=n||o.t):r.t=n,this.j[e]=r,r}};var Su=function(){return new Au},Mu=function(e){return new Au(e)},Fu=function(e,t,n){e.j[t]||(e.j[t]=n)},Ou=function(e,t,n){e.jr.push([t,n])},Tu=function(e,t){var n=e.j[t];if(n)return n;for(var r=0;r<e.jr.length;r++){var o=e.jr[r][0],i=e.jr[r][1];if(o.test(t))return i}return e.jd},Bu=function(e,t,n){for(var r=0;r<t.length;r++)Fu(e,t[r],n)},Nu=function(e,t){for(var n=0;n<t.length;n++){var r=t[n][0],o=t[n][1];Fu(e,r,o)}},Ru=function(e,t,n,r){for(var o,i=0,s=t.length;i<s&&(o=e.j[t[i]]);)e=o,i++;if(i>=s)return[];for(;i<s-1;)o=r(),Fu(e,t[i],o),e=o,i++;Fu(e,t[s-1],n)},Iu="DOMAIN",Pu="LOCALHOST",Lu="TLD",zu="NUM",$u="PROTOCOL",ju="MAILTO",_u="WS",Hu="NL",Ku="OPENBRACE",Vu="OPENBRACKET",qu="OPENANGLEBRACKET",Wu="OPENPAREN",Uu="CLOSEBRACE",Zu="CLOSEBRACKET",Ju="CLOSEANGLEBRACKET",Gu="CLOSEPAREN",Yu="AMPERSAND",Xu="APOSTROPHE",Qu="ASTERISK",ec="AT",tc="BACKSLASH",nc="BACKTICK",rc="CARET",oc="COLON",ic="COMMA",sc="DOLLAR",ac="DOT",lc="EQUALS",uc="EXCLAMATION",cc="HYPHEN",dc="PERCENT",pc="PIPE",hc="PLUS",fc="POUND",mc="QUERY",gc="QUOTE",yc="SEMI",vc="SLASH",bc="TILDE",Dc="UNDERSCORE",Cc="SYM",wc=Object.freeze({__proto__:null,DOMAIN:Iu,LOCALHOST:Pu,TLD:Lu,NUM:zu,PROTOCOL:$u,MAILTO:ju,WS:_u,NL:Hu,OPENBRACE:Ku,OPENBRACKET:Vu,OPENANGLEBRACKET:qu,OPENPAREN:Wu,CLOSEBRACE:Uu,CLOSEBRACKET:Zu,CLOSEANGLEBRACKET:Ju,CLOSEPAREN:Gu,AMPERSAND:Yu,APOSTROPHE:Xu,ASTERISK:Qu,AT:ec,BACKSLASH:tc,BACKTICK:nc,CARET:rc,COLON:oc,COMMA:ic,DOLLAR:sc,DOT:ac,EQUALS:lc,EXCLAMATION:uc,HYPHEN:cc,PERCENT:dc,PIPE:pc,PLUS:hc,POUND:fc,QUERY:mc,QUOTE:gc,SEMI:yc,SLASH:vc,TILDE:bc,UNDERSCORE:Dc,SYM:Cc}),Ec="aaa aarp abarth abb abbott abbvie abc able abogado abudhabi ac academy accenture accountant accountants aco actor ad adac ads adult ae aeg aero aetna af afamilycompany afl africa ag agakhan agency ai aig airbus airforce airtel akdn al alfaromeo alibaba alipay allfinanz allstate ally alsace alstom am amazon americanexpress americanfamily amex amfam amica amsterdam analytics android anquan anz ao aol apartments app apple aq aquarelle ar arab aramco archi army arpa art arte as asda asia associates at athleta attorney au auction audi audible audio auspost author auto autos avianca aw aws ax axa az azure ba baby baidu banamex bananarepublic band bank bar barcelona barclaycard barclays barefoot bargains baseball basketball bauhaus bayern bb bbc bbt bbva bcg bcn bd be beats beauty beer bentley berlin best bestbuy bet bf bg bh bharti bi bible bid bike bing bingo bio biz bj black blackfriday blockbuster blog bloomberg blue bm bms bmw bn bnpparibas bo boats boehringer bofa bom bond boo book booking bosch bostik boston bot boutique box br bradesco bridgestone broadway broker brother brussels bs bt budapest bugatti build builders business buy buzz bv bw by bz bzh ca cab cafe cal call calvinklein cam camera camp cancerresearch canon capetown capital capitalone car caravan cards care career careers cars casa case cash casino cat catering catholic cba cbn cbre cbs cc cd center ceo cern cf cfa cfd cg ch chanel channel charity chase chat cheap chintai christmas chrome church ci cipriani circle cisco citadel citi citic city cityeats ck cl claims cleaning click clinic clinique clothing cloud club clubmed cm cn co coach codes coffee college cologne com comcast commbank community company compare computer comsec condos construction consulting contact contractors cooking cookingchannel cool coop corsica country coupon coupons courses cpa cr credit creditcard creditunion cricket crown crs cruise cruises csc cu cuisinella cv cw cx cy cymru cyou cz dabur dad dance data date dating datsun day dclk dds de deal dealer deals degree delivery dell deloitte delta democrat dental dentist desi design dev dhl diamonds diet digital direct directory discount discover dish diy dj dk dm dnp do docs doctor dog domains dot download drive dtv dubai duck dunlop dupont durban dvag dvr dz earth eat ec eco edeka edu education ee eg email emerck energy engineer engineering enterprises epson equipment er ericsson erni es esq estate et etisalat eu eurovision eus events exchange expert exposed express extraspace fage fail fairwinds faith family fan fans farm farmers fashion fast fedex feedback ferrari ferrero fi fiat fidelity fido film final finance financial fire firestone firmdale fish fishing fit fitness fj fk flickr flights flir florist flowers fly fm fo foo food foodnetwork football ford forex forsale forum foundation fox fr free fresenius frl frogans frontdoor frontier ftr fujitsu fujixerox fun fund furniture futbol fyi ga gal gallery gallo gallup game games gap garden gay gb gbiz gd gdn ge gea gent genting george gf gg ggee gh gi gift gifts gives giving gl glade glass gle global globo gm gmail gmbh gmo gmx gn godaddy gold goldpoint golf goo goodyear goog google gop got gov gp gq gr grainger graphics gratis green gripe grocery group gs gt gu guardian gucci guge guide guitars guru gw gy hair hamburg hangout haus hbo hdfc hdfcbank health healthcare help helsinki here hermes hgtv hiphop hisamitsu hitachi hiv hk hkt hm hn hockey holdings holiday homedepot homegoods homes homesense honda horse hospital host hosting hot hoteles hotels hotmail house how hr hsbc ht hu hughes hyatt hyundai ibm icbc ice icu id ie ieee ifm ikano il im imamat imdb immo immobilien in inc industries infiniti info ing ink institute insurance insure int international intuit investments io ipiranga iq ir irish is ismaili ist istanbul it itau itv iveco jaguar java jcb je jeep jetzt jewelry jio jll jm jmp jnj jo jobs joburg jot joy jp jpmorgan jprs juegos juniper kaufen kddi ke kerryhotels kerrylogistics kerryproperties kfh kg kh ki kia kim kinder kindle kitchen kiwi km kn koeln komatsu kosher kp kpmg kpn kr krd kred kuokgroup kw ky kyoto kz la lacaixa lamborghini lamer lancaster lancia land landrover lanxess lasalle lat latino latrobe law lawyer lb lc lds lease leclerc lefrak legal lego lexus lgbt li lidl life lifeinsurance lifestyle lighting like lilly limited limo lincoln linde link lipsy live living lixil lk llc llp loan loans locker locus loft lol london lotte lotto love lpl lplfinancial lr ls lt ltd ltda lu lundbeck luxe luxury lv ly ma macys madrid maif maison makeup man management mango map market marketing markets marriott marshalls maserati mattel mba mc mckinsey md me med media meet melbourne meme memorial men menu merckmsd mg mh miami microsoft mil mini mint mit mitsubishi mk ml mlb mls mm mma mn mo mobi mobile moda moe moi mom monash money monster mormon mortgage moscow moto motorcycles mov movie mp mq mr ms msd mt mtn mtr mu museum mutual mv mw mx my mz na nab nagoya name nationwide natura navy nba nc ne nec net netbank netflix network neustar new news next nextdirect nexus nf nfl ng ngo nhk ni nico nike nikon ninja nissan nissay nl no nokia northwesternmutual norton now nowruz nowtv np nr nra nrw ntt nu nyc nz obi observer off office okinawa olayan olayangroup oldnavy ollo om omega one ong onl online onyourside ooo open oracle orange org organic origins osaka otsuka ott ovh pa page panasonic paris pars partners parts party passagens pay pccw pe pet pf pfizer pg ph pharmacy phd philips phone photo photography photos physio pics pictet pictures pid pin ping pink pioneer pizza pk pl place play playstation plumbing plus pm pn pnc pohl poker politie porn post pr pramerica praxi press prime pro prod productions prof progressive promo properties property protection pru prudential ps pt pub pw pwc py qa qpon quebec quest qvc racing radio raid re read realestate realtor realty recipes red redstone redumbrella rehab reise reisen reit reliance ren rent rentals repair report republican rest restaurant review reviews rexroth rich richardli ricoh ril rio rip rmit ro rocher rocks rodeo rogers room rs rsvp ru rugby ruhr run rw rwe ryukyu sa saarland safe safety sakura sale salon samsclub samsung sandvik sandvikcoromant sanofi sap sarl sas save saxo sb sbi sbs sc sca scb schaeffler schmidt scholarships school schule schwarz science scjohnson scot sd se search seat secure security seek select sener services ses seven sew sex sexy sfr sg sh shangrila sharp shaw shell shia shiksha shoes shop shopping shouji show showtime si silk sina singles site sj sk ski skin sky skype sl sling sm smart smile sn sncf so soccer social softbank software sohu solar solutions song sony soy spa space sport spot spreadbetting sr srl ss st stada staples star statebank statefarm stc stcgroup stockholm storage store stream studio study style su sucks supplies supply support surf surgery suzuki sv swatch swiftcover swiss sx sy sydney systems sz tab taipei talk taobao target tatamotors tatar tattoo tax taxi tc tci td tdk team tech technology tel temasek tennis teva tf tg th thd theater theatre tiaa tickets tienda tiffany tips tires tirol tj tjmaxx tjx tk tkmaxx tl tm tmall tn to today tokyo tools top toray toshiba total tours town toyota toys tr trade trading training travel travelchannel travelers travelersinsurance trust trv tt tube tui tunes tushu tv tvs tw tz ua ubank ubs ug uk unicom university uno uol ups us uy uz va vacations vana vanguard vc ve vegas ventures verisign versicherung vet vg vi viajes video vig viking villas vin vip virgin visa vision viva vivo vlaanderen vn vodka volkswagen volvo vote voting voto voyage vu vuelos wales walmart walter wang wanggou watch watches weather weatherchannel webcam weber website wed wedding weibo weir wf whoswho wien wiki williamhill win windows wine winners wme wolterskluwer woodside work works world wow ws wtc wtf xbox xerox xfinity xihuan xin xxx xyz yachts yahoo yamaxun yandex ye yodobashi yoga yokohama you youtube yt yun za zappos zara zero zip zm zone zuerich zw verm\xf6gensberater-ctb verm\xf6gensberatung-pwb \u03b5\u03bb \u03b5\u03c5 \u0431\u0433 \u0431\u0435\u043b \u0434\u0435\u0442\u0438 \u0435\u044e \u043a\u0430\u0442\u043e\u043b\u0438\u043a \u043a\u043e\u043c \u049b\u0430\u0437 \u043c\u043a\u0434 \u043c\u043e\u043d \u043c\u043e\u0441\u043a\u0432\u0430 \u043e\u043d\u043b\u0430\u0439\u043d \u043e\u0440\u0433 \u0440\u0443\u0441 \u0440\u0444 \u0441\u0430\u0439\u0442 \u0441\u0440\u0431 \u0443\u043a\u0440 \u10d2\u10d4 \u0570\u0561\u0575 \u05d9\u05e9\u05e8\u05d0\u05dc \u05e7\u05d5\u05dd \u0627\u0628\u0648\u0638\u0628\u064a \u0627\u062a\u0635\u0627\u0644\u0627\u062a \u0627\u0631\u0627\u0645\u0643\u0648 \u0627\u0644\u0627\u0631\u062f\u0646 \u0627\u0644\u0628\u062d\u0631\u064a\u0646 \u0627\u0644\u062c\u0632\u0627\u0626\u0631 \u0627\u0644\u0633\u0639\u0648\u062f\u064a\u0629 \u0627\u0644\u0639\u0644\u064a\u0627\u0646 \u0627\u0644\u0645\u063a\u0631\u0628 \u0627\u0645\u0627\u0631\u0627\u062a \u0627\u06cc\u0631\u0627\u0646 \u0628\u0627\u0631\u062a \u0628\u0627\u0632\u0627\u0631 \u0628\u06be\u0627\u0631\u062a \u0628\u064a\u062a\u0643 \u067e\u0627\u06a9\u0633\u062a\u0627\u0646 \u0680\u0627\u0631\u062a \u062a\u0648\u0646\u0633 \u0633\u0648\u062f\u0627\u0646 \u0633\u0648\u0631\u064a\u0629 \u0634\u0628\u0643\u0629 \u0639\u0631\u0627\u0642 \u0639\u0631\u0628 \u0639\u0645\u0627\u0646 \u0641\u0644\u0633\u0637\u064a\u0646 \u0642\u0637\u0631 \u0643\u0627\u062b\u0648\u0644\u064a\u0643 \u0643\u0648\u0645 \u0645\u0635\u0631 \u0645\u0644\u064a\u0633\u064a\u0627 \u0645\u0648\u0631\u064a\u062a\u0627\u0646\u064a\u0627 \u0645\u0648\u0642\u0639 \u0647\u0645\u0631\u0627\u0647 \u0915\u0949\u092e \u0928\u0947\u091f \u092d\u093e\u0930\u0924 \u092d\u093e\u0930\u0924\u092e\u094d \u092d\u093e\u0930\u094b\u0924 \u0938\u0902\u0917\u0920\u0928 \u09ac\u09be\u0982\u09b2\u09be \u09ad\u09be\u09b0\u09a4 \u09ad\u09be\u09f0\u09a4 \u0a2d\u0a3e\u0a30\u0a24 \u0aad\u0abe\u0ab0\u0aa4 \u0b2d\u0b3e\u0b30\u0b24 \u0b87\u0ba8\u0bcd\u0ba4\u0bbf\u0baf\u0bbe \u0b87\u0bb2\u0b99\u0bcd\u0b95\u0bc8 \u0b9a\u0bbf\u0b99\u0bcd\u0b95\u0baa\u0bcd\u0baa\u0bc2\u0bb0\u0bcd \u0c2d\u0c3e\u0c30\u0c24\u0c4d \u0cad\u0cbe\u0cb0\u0ca4 \u0d2d\u0d3e\u0d30\u0d24\u0d02 \u0dbd\u0d82\u0d9a\u0dcf \u0e04\u0e2d\u0e21 \u0e44\u0e17\u0e22 \u0ea5\u0eb2\u0ea7 \ub2f7\ub137 \ub2f7\ucef4 \uc0bc\uc131 \ud55c\uad6d \u30a2\u30de\u30be\u30f3 \u30b0\u30fc\u30b0\u30eb \u30af\u30e9\u30a6\u30c9 \u30b3\u30e0 \u30b9\u30c8\u30a2 \u30bb\u30fc\u30eb \u30d5\u30a1\u30c3\u30b7\u30e7\u30f3 \u30dd\u30a4\u30f3\u30c8 \u307f\u3093\u306a \u4e16\u754c \u4e2d\u4fe1 \u4e2d\u56fd \u4e2d\u570b \u4e2d\u6587\u7f51 \u4e9a\u9a6c\u900a \u4f01\u4e1a \u4f5b\u5c71 \u4fe1\u606f \u5065\u5eb7 \u516b\u5366 \u516c\u53f8 \u516c\u76ca \u53f0\u6e7e \u53f0\u7063 \u5546\u57ce \u5546\u5e97 \u5546\u6807 \u5609\u91cc \u5609\u91cc\u5927\u9152\u5e97 \u5728\u7ebf \u5927\u4f17\u6c7d\u8f66 \u5927\u62ff \u5929\u4e3b\u6559 \u5a31\u4e50 \u5bb6\u96fb \u5e7f\u4e1c \u5fae\u535a \u6148\u5584 \u6211\u7231\u4f60 \u624b\u673a \u62db\u8058 \u653f\u52a1 \u653f\u5e9c \u65b0\u52a0\u5761 \u65b0\u95fb \u65f6\u5c1a \u66f8\u7c4d \u673a\u6784 \u6de1\u9a6c\u9521 \u6e38\u620f \u6fb3\u9580 \u70b9\u770b \u79fb\u52a8 \u7ec4\u7ec7\u673a\u6784 \u7f51\u5740 \u7f51\u5e97 \u7f51\u7ad9 \u7f51\u7edc \u8054\u901a \u8bfa\u57fa\u4e9a \u8c37\u6b4c \u8d2d\u7269 \u901a\u8ca9 \u96c6\u56e2 \u96fb\u8a0a\u76c8\u79d1 \u98de\u5229\u6d66 \u98df\u54c1 \u9910\u5385 \u9999\u683c\u91cc\u62c9 \u9999\u6e2f".split(" "),xc=/(?:[A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF38\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])/,kc=/(?:[#\*0-9\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u23CF\u23E9-\u23F3\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB-\u25FE\u2600-\u2604\u260E\u2611\u2614\u2615\u2618\u261D\u2620\u2622\u2623\u2626\u262A\u262E\u262F\u2638-\u263A\u2640\u2642\u2648-\u2653\u265F\u2660\u2663\u2665\u2666\u2668\u267B\u267E\u267F\u2692-\u2697\u2699\u269B\u269C\u26A0\u26A1\u26A7\u26AA\u26AB\u26B0\u26B1\u26BD\u26BE\u26C4\u26C5\u26C8\u26CE\u26CF\u26D1\u26D3\u26D4\u26E9\u26EA\u26F0-\u26F5\u26F7-\u26FA\u26FD\u2702\u2705\u2708-\u270D\u270F\u2712\u2714\u2716\u271D\u2721\u2728\u2733\u2734\u2744\u2747\u274C\u274E\u2753-\u2755\u2757\u2763\u2764\u2795-\u2797\u27A1\u27B0\u27BF\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B50\u2B55\u3030\u303D\u3297\u3299]|\uD83C[\uDC04\uDCCF\uDD70\uDD71\uDD7E\uDD7F\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE02\uDE1A\uDE2F\uDE32-\uDE3A\uDE50\uDE51\uDF00-\uDF21\uDF24-\uDF93\uDF96\uDF97\uDF99-\uDF9B\uDF9E-\uDFF0\uDFF3-\uDFF5\uDFF7-\uDFFF]|\uD83D[\uDC00-\uDCFD\uDCFF-\uDD3D\uDD49-\uDD4E\uDD50-\uDD67\uDD6F\uDD70\uDD73-\uDD7A\uDD87\uDD8A-\uDD8D\uDD90\uDD95\uDD96\uDDA4\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDE8\uDDEF\uDDF3\uDDFA-\uDE4F\uDE80-\uDEC5\uDECB-\uDED2\uDED5-\uDED7\uDEDD-\uDEE5\uDEE9\uDEEB\uDEEC\uDEF0\uDEF3-\uDEFC\uDFE0-\uDFEB\uDFF0]|\uD83E[\uDD0C-\uDD3A\uDD3C-\uDD45\uDD47-\uDDFF\uDE70-\uDE74\uDE78-\uDE7C\uDE80-\uDE86\uDE90-\uDEAC\uDEB0-\uDEBA\uDEC0-\uDEC5\uDED0-\uDED9\uDEE0-\uDEE7\uDEF0-\uDEF6])/,Ac=/\uFE0F/,Sc=/\d/,Mc=/\s/;function Fc(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=Su(),n=Mu(zu),r=Mu(Iu),o=Su(),i=Mu(_u),s=[[Sc,r],[xc,r],[kc,r],[Ac,r]],a=function(){var e=Mu(Iu);return e.j={"-":o},e.jr=[].concat(s),e},l=function(e){var t=a();return t.t=e,t};Nu(t,[["'",Mu(Xu)],["{",Mu(Ku)],["[",Mu(Vu)],["<",Mu(qu)],["(",Mu(Wu)],["}",Mu(Uu)],["]",Mu(Zu)],[">",Mu(Ju)],[")",Mu(Gu)],["&",Mu(Yu)],["*",Mu(Qu)],["@",Mu(ec)],["`",Mu(nc)],["^",Mu(rc)],[":",Mu(oc)],[",",Mu(ic)],["$",Mu(sc)],[".",Mu(ac)],["=",Mu(lc)],["!",Mu(uc)],["-",Mu(cc)],["%",Mu(dc)],["|",Mu(pc)],["+",Mu(hc)],["#",Mu(fc)],["?",Mu(mc)],['"',Mu(gc)],["/",Mu(vc)],[";",Mu(yc)],["~",Mu(bc)],["_",Mu(Dc)],["\\",Mu(tc)]]),Fu(t,"\n",Mu(Hu)),Ou(t,Mc,i),Fu(i,"\n",Su()),Ou(i,Mc,i);for(var u=0;u<Ec.length;u++)Ru(t,Ec[u],l(Lu),a);var c=a(),d=a(),p=a(),h=a();Ru(t,"file",c,a),Ru(t,"ftp",d,a),Ru(t,"http",p,a),Ru(t,"mailto",h,a);var f=a(),m=Mu($u),g=Mu(ju);Fu(d,"s",f),Fu(d,":",m),Fu(p,"s",f),Fu(p,":",m),Fu(c,":",m),Fu(f,":",m),Fu(h,":",g);for(var y=a(),v=0;v<e.length;v++)Ru(t,e[v],y,a);return Fu(y,":",m),Ru(t,"localhost",l(Pu),a),Ou(t,Sc,n),Ou(t,xc,r),Ou(t,kc,r),Ou(t,Ac,r),Ou(n,Sc,n),Ou(n,xc,r),Ou(n,kc,r),Ou(n,Ac,r),Fu(n,"-",o),Fu(r,"-",o),Fu(o,"-",o),Ou(r,Sc,r),Ou(r,xc,r),Ou(r,kc,r),Ou(r,Ac,r),Ou(o,Sc,r),Ou(o,xc,r),Ou(o,kc,r),Ou(o,Ac,r),t.jd=Mu(Cc),t}function Oc(e){return Oc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Oc(e)}var Tc={defaultProtocol:"http",events:null,format:Nc,formatHref:Nc,nl2br:!1,tagName:"a",target:null,rel:null,validate:!0,truncate:0,className:null,attributes:null,ignoreTags:[]};function Bc(e){e=e||{},this.defaultProtocol="defaultProtocol"in e?e.defaultProtocol:Tc.defaultProtocol,this.events="events"in e?e.events:Tc.events,this.format="format"in e?e.format:Tc.format,this.formatHref="formatHref"in e?e.formatHref:Tc.formatHref,this.nl2br="nl2br"in e?e.nl2br:Tc.nl2br,this.tagName="tagName"in e?e.tagName:Tc.tagName,this.target="target"in e?e.target:Tc.target,this.rel="rel"in e?e.rel:Tc.rel,this.validate="validate"in e?e.validate:Tc.validate,this.truncate="truncate"in e?e.truncate:Tc.truncate,this.className="className"in e?e.className:Tc.className,this.attributes=e.attributes||Tc.attributes,this.ignoreTags=[];for(var t=("ignoreTags"in e?e.ignoreTags:Tc.ignoreTags),n=0;n<t.length;n++)this.ignoreTags.push(t[n].toUpperCase())}function Nc(e){return e}Bc.prototype={resolve:function(e){var t=e.toHref(this.defaultProtocol);return{formatted:this.get("format",e.toString(),e),formattedHref:this.get("formatHref",t,e),tagName:this.get("tagName",t,e),className:this.get("className",t,e),target:this.get("target",t,e),rel:this.get("rel",t,e),events:this.getObject("events",t,e),attributes:this.getObject("attributes",t,e),truncate:this.get("truncate",t,e)}},check:function(e){return this.get("validate",e.toString(),e)},get:function(e,t,n){var r,o=this[e];if(!o)return o;switch(Oc(o)){case"function":return o(t,n.t);case"object":return"function"==typeof(r=n.t in o?o[n.t]:Tc[e])?r(t,n.t):r}return o},getObject:function(e,t,n){var r=this[e];return"function"==typeof r?r(t,n.t):r}};function Rc(){}function Ic(e,t){function n(t,n){this.t=e,this.v=t,this.tk=n}return function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=Object.create(e.prototype);for(var o in n)r[o]=n[o];r.constructor=t,t.prototype=r}(Rc,n,t),n}Rc.prototype={t:"token",isLink:!1,toString:function(){return this.v},toHref:function(){return this.toString()},startIndex:function(){return this.tk[0].s},endIndex:function(){return this.tk[this.tk.length-1].e},toObject:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Tc.defaultProtocol;return{type:this.t,value:this.v,isLink:this.isLink,href:this.toHref(e),start:this.startIndex(),end:this.endIndex()}}};var Pc=Ic("email",{isLink:!0}),Lc=Ic("email",{isLink:!0,toHref:function(){return"mailto:"+this.toString()}}),zc=Ic("text"),$c=Ic("nl"),jc=Ic("url",{isLink:!0,toHref:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Tc.defaultProtocol,t=this.tk,n=!1,r=!1,o=[],i=0;t[i].t===$u;)n=!0,o.push(t[i].v),i++;for(;t[i].t===vc;)r=!0,o.push(t[i].v),i++;for(;i<t.length;i++)o.push(t[i].v);return o=o.join(""),n||r||(o="".concat(e,"://").concat(o)),o},hasProtocol:function(){return this.tk[0].t===$u}}),_c=Object.freeze({__proto__:null,MultiToken:Rc,Base:Rc,createTokenClass:Ic,MailtoEmail:Pc,Email:Lc,Text:zc,Nl:$c,Url:jc});function Hc(){var e=Su(),t=Su(),n=Su(),r=Su(),o=Su(),i=Su(),s=Su(),a=Mu(jc),l=Su(),u=Mu(jc),c=Mu(jc),d=Su(),p=Su(),h=Su(),f=Su(),m=Su(),g=Mu(jc),y=Mu(jc),v=Mu(jc),b=Mu(jc),D=Su(),C=Su(),w=Su(),E=Su(),x=Su(),k=Su(),A=Mu(Lc),S=Su(),M=Mu(Lc),F=Mu(Pc),O=Su(),T=Su(),B=Su(),N=Su(),R=Mu($c);Fu(e,Hu,R),Fu(e,$u,t),Fu(e,ju,n),Fu(t,vc,r),Fu(r,vc,o),Fu(e,Lu,i),Fu(e,Iu,i),Fu(e,Pu,a),Fu(e,zu,i),Fu(o,Lu,c),Fu(o,Iu,c),Fu(o,zu,c),Fu(o,Pu,c),Fu(i,ac,s),Fu(x,ac,k),Fu(s,Lu,a),Fu(s,Iu,i),Fu(s,zu,i),Fu(s,Pu,i),Fu(k,Lu,A),Fu(k,Iu,x),Fu(k,zu,x),Fu(k,Pu,x),Fu(a,ac,s),Fu(A,ac,k),Fu(a,oc,l),Fu(a,vc,c),Fu(l,zu,u),Fu(u,vc,c),Fu(A,oc,S),Fu(S,zu,M);var I=[Yu,Qu,ec,tc,nc,rc,sc,Iu,lc,cc,Pu,zu,dc,pc,hc,fc,$u,vc,Cc,bc,Lu,Dc],P=[Xu,Ju,Uu,Zu,Gu,oc,ic,ac,uc,qu,Ku,Vu,Wu,mc,gc,yc];Fu(c,Ku,p),Fu(c,Vu,h),Fu(c,qu,f),Fu(c,Wu,m),Fu(d,Ku,p),Fu(d,Vu,h),Fu(d,qu,f),Fu(d,Wu,m),Fu(p,Uu,c),Fu(h,Zu,c),Fu(f,Ju,c),Fu(m,Gu,c),Fu(g,Uu,c),Fu(y,Zu,c),Fu(v,Ju,c),Fu(b,Gu,c),Fu(D,Uu,c),Fu(C,Zu,c),Fu(w,Ju,c),Fu(E,Gu,c),Bu(p,I,g),Bu(h,I,y),Bu(f,I,v),Bu(m,I,b),Bu(p,P,D),Bu(h,P,C),Bu(f,P,w),Bu(m,P,E),Bu(g,I,g),Bu(y,I,y),Bu(v,I,v),Bu(b,I,b),Bu(g,P,g),Bu(y,P,y),Bu(v,P,v),Bu(b,P,b),Bu(D,I,g),Bu(C,I,y),Bu(w,I,v),Bu(E,I,b),Bu(D,P,D),Bu(C,P,C),Bu(w,P,w),Bu(E,P,E),Bu(c,I,c),Bu(d,I,c),Bu(c,P,d),Bu(d,P,d),Fu(n,Lu,F),Fu(n,Iu,F),Fu(n,zu,F),Fu(n,Pu,F),Bu(F,I,F),Bu(F,P,O),Bu(O,I,F),Bu(O,P,O);var L=[Yu,Xu,Qu,tc,nc,rc,Uu,sc,Iu,lc,cc,zu,Ku,dc,pc,hc,fc,mc,vc,Cc,bc,Lu,Dc];return Bu(i,L,T),Fu(i,ec,B),Bu(a,L,T),Fu(a,ec,B),Bu(s,L,T),Bu(T,L,T),Fu(T,ec,B),Fu(T,ac,N),Bu(N,L,T),Fu(B,Lu,x),Fu(B,Iu,x),Fu(B,zu,x),Fu(B,Pu,A),e}function Kc(e,t,n){var r=n[0].s,o=n[n.length-1].e;return new e(t.substr(r,o-r),n)}var Vc="undefined"!=typeof console&&console&&console.warn||function(){},qc={scanner:null,parser:null,pluginQueue:[],customProtocols:[],initialized:!1};function Wc(e){if(qc.initialized&&Vc('linkifyjs: already initialized - will not register custom protocol "'.concat(e,'" until you manually call linkify.init(). To avoid this warning, please register all custom protocols before invoking linkify the first time.')),!/^[a-z-]+$/.test(e))throw Error("linkifyjs: protocols containing characters other than a-z or - (hyphen) are not supported");qc.customProtocols.push(e)}function Uc(e){return qc.initialized||function(){qc.scanner={start:Fc(qc.customProtocols),tokens:wc},qc.parser={start:Hc(),tokens:_c};for(var e={createTokenClass:Ic},t=0;t<qc.pluginQueue.length;t++)qc.pluginQueue[t][1]({scanner:qc.scanner,parser:qc.parser,utils:e});qc.initialized=!0}(),function(e,t,n){for(var r=n.length,o=0,i=[],s=[];o<r;){for(var a=e,l=null,u=null,c=0,d=null,p=-1;o<r&&!(l=Tu(a,n[o].t));)s.push(n[o++]);for(;o<r&&(u=l||Tu(a,n[o].t));)l=null,(a=u).accepts()?(p=0,d=a):p>=0&&p++,o++,c++;if(p<0)for(var h=o-c;h<o;h++)s.push(n[h]);else{s.length>0&&(i.push(Kc(zc,t,s)),s=[]),o-=p,c-=p;var f=d.t,m=n.slice(o-c,o);i.push(Kc(f,t,m))}}return s.length>0&&i.push(Kc(zc,t,s)),i}(qc.parser.start,e,function(e,t){for(var n=function(e){for(var t=[],n=e.length,r=0;r<n;){var o=e.charCodeAt(r),i=void 0,s=o<55296||o>56319||r+1===n||(i=e.charCodeAt(r+1))<56320||i>57343?e[r]:e.slice(r,r+2);t.push(s),r+=s.length}return t}(t.replace(/[A-Z]/g,(function(e){return e.toLowerCase()}))),r=n.length,o=[],i=0,s=0;s<r;){for(var a=e,l=null,u=0,c=null,d=-1,p=-1;s<r&&(l=Tu(a,n[s]));)(a=l).accepts()?(d=0,p=0,c=a):d>=0&&(d+=n[s].length,p++),u+=n[s].length,i+=n[s].length,s++;i-=d,s-=p,u-=d,o.push({t:c.t,v:t.substr(i-u,u),s:i-u,e:i})}return o}(qc.scanner.start,e))}function Zc(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=Uc(e),r=[],o=0;o<n.length;o++){var i=n[o];!i.isLink||t&&i.t!==t||r.push(i.toObject())}return r}function Jc(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=Uc(e);return 1===n.length&&n[0].isLink&&(!t||n[0].t===t)}function Gc(e){return new Lo({key:new jo("autolink"),appendTransaction:(t,n,r)=>{const o=t.some((e=>e.docChanged))&&!n.doc.eq(r.doc),i=t.some((e=>e.getMeta("preventAutolink")));if(!o||i)return;const{tr:s}=r,a=function(e,t){const n=new Do(e);return t.forEach((e=>{e.steps.forEach((e=>{n.step(e)}))})),n}(n.doc,[...t]),{mapping:l}=a,u=function(e){const{mapping:t,steps:n}=e,r=[];return t.maps.forEach(((e,o)=>{const i=[];if(e.ranges.length)e.forEach(((e,t)=>{i.push({from:e,to:t})}));else{const{from:e,to:t}=n[o];if(void 0===e||void 0===t)return;i.push({from:e,to:t})}i.forEach((({from:e,to:n})=>{const i=t.slice(o).map(e,-1),s=t.slice(o).map(n),a=t.invert().map(i,-1),l=t.invert().map(s);r.push({oldRange:{from:a,to:l},newRange:{from:i,to:s}})}))})),ts(r)}(a);return u.forEach((({oldRange:t,newRange:o})=>{ns(t.from,t.to,n.doc).filter((t=>t.mark.type===e.type)).forEach((t=>{const o=ns(l.map(t.from),l.map(t.to),r.doc).filter((t=>t.mark.type===e.type));if(!o.length)return;const i=o[0],a=n.doc.textBetween(t.from,t.to,void 0," "),u=r.doc.textBetween(i.from,i.to,void 0," "),c=Jc(a),d=Jc(u);c&&!d&&s.removeMark(i.from,i.to,e.type)})),function(e,t,n){const r=[];return e.nodesBetween(t.from,t.to,((e,t)=>{n(e)&&r.push({node:e,pos:t})})),r}(r.doc,o,(e=>e.isTextblock)).forEach((t=>{Zc(r.doc.textBetween(t.pos,t.pos+t.node.nodeSize,void 0," ")).filter((e=>e.isLink)).filter((t=>!e.validate||e.validate(t.value))).map((e=>({...e,from:t.pos+e.start+1,to:t.pos+e.end+1}))).filter((e=>{const t=o.from>=e.from&&o.from<=e.to,n=o.to>=e.from&&o.to<=e.to;return t||n})).forEach((t=>{s.addMark(t.from,t.to,e.type.create({href:t.href}))}))}))})),s.steps.length?s:void 0}})}as.create({name:"link",priority:1e3,keepOnSplit:!1,onCreate(){this.options.protocols.forEach(Wc)},inclusive(){return this.options.autolink},addOptions:()=>({openOnClick:!0,linkOnPaste:!0,autolink:!0,protocols:[],HTMLAttributes:{target:"_blank",rel:"noopener noreferrer nofollow",class:null},validate:void 0}),addAttributes(){return{href:{default:null},target:{default:this.options.HTMLAttributes.target},class:{default:this.options.HTMLAttributes.class}}},parseHTML:()=>[{tag:'a[href]:not([href *= "javascript:" i])'}],renderHTML({HTMLAttributes:e}){return["a",vi(this.options.HTMLAttributes,e),0]},addCommands(){return{setLink:e=>({chain:t})=>t().setMark(this.name,e).setMeta("preventAutolink",!0).run(),toggleLink:e=>({chain:t})=>t().toggleMark(this.name,e,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run(),unsetLink:()=>({chain:e})=>e().unsetMark(this.name,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()}},addPasteRules(){return[us({find:e=>Zc(e).filter((e=>!this.options.validate||this.options.validate(e.value))).filter((e=>e.isLink)).map((e=>({text:e.value,index:e.start,data:e}))),type:this.type,getAttributes:e=>{var t;return{href:null===(t=e.data)||void 0===t?void 0:t.href}}})]},addProseMirrorPlugins(){const e=[];return this.options.autolink&&e.push(Gc({type:this.type,validate:this.options.validate})),this.options.openOnClick&&e.push(function(e){return new Lo({key:new jo("handleClickLink"),props:{handleClick:(t,n,r)=>{var o;const i=es(t.state,e.type.name);return!(!(null===(o=r.target)||void 0===o?void 0:o.closest("a"))||!i.href||(window.open(i.href,i.target),0))}}})}({type:this.type})),this.options.linkOnPaste&&e.push(function(e){return new Lo({key:new jo("handlePasteLink"),props:{handlePaste:(t,n,r)=>{const{state:o}=t,{selection:i}=o,{empty:s}=i;if(s)return!1;let a="";r.content.forEach((e=>{a+=e.textContent}));const l=Zc(a).find((e=>e.isLink&&e.value===a));return!(!a||!l||(e.editor.commands.setMark(e.type,{href:l.href}),0))}}})}({editor:this.editor,type:this.type})),e}});const Yc="undefined"!=typeof navigator?navigator:null,Xc="undefined"!=typeof document?document:null,Qc=Yc&&Yc.userAgent||"",ed=/Edge\/(\d+)/.exec(Qc),td=/MSIE \d/.exec(Qc),nd=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Qc),rd=!!(td||nd||ed),od=td?document.documentMode:nd?+nd[1]:ed?+ed[1]:0,id=!rd&&/gecko\/(\d+)/i.test(Qc);id&&(/Firefox\/(\d+)/.exec(Qc)||[0,0])[1];const sd=!rd&&/Chrome\/(\d+)/.exec(Qc),ad=!!sd,ld=sd?+sd[1]:0,ud=!rd&&!!Yc&&/Apple Computer/.test(Yc.vendor),cd=ud&&(/Mobile\/\w+/.test(Qc)||!!Yc&&Yc.maxTouchPoints>2),dd=cd||!!Yc&&/Mac/.test(Yc.platform),pd=/Android \d/.test(Qc),hd=!!Xc&&"webkitFontSmoothing"in Xc.documentElement.style,fd=hd?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0,md=function(e){for(var t=0;;t++)if(!(e=e.previousSibling))return t};const gd=function(e,t,n,r){return n&&(vd(e,t,n,r,-1)||vd(e,t,n,r,1))},yd=/^(img|br|input|textarea|hr)$/i;function vd(e,t,n,r,o){for(;;){if(e==n&&t==r)return!0;if(t==(o<0?0:bd(e))){let n=e.parentNode;if(!n||1!=n.nodeType||Dd(e)||yd.test(e.nodeName)||"false"==e.contentEditable)return!1;t=md(e)+(o<0?0:1),e=n}else{if(1!=e.nodeType)return!1;if("false"==(e=e.childNodes[t+(o<0?-1:0)]).contentEditable)return!1;t=o<0?bd(e):0}}}function bd(e){return 3==e.nodeType?e.nodeValue.length:e.childNodes.length}function Dd(e){let t;for(let n=e;n&&!(t=n.pmViewDesc);n=n.parentNode);return t&&t.node&&t.node.isBlock&&(t.dom==e||t.contentDOM==e)}const Cd=function(e){let t=e.isCollapsed;return t&&ad&&e.rangeCount&&!e.getRangeAt(0).collapsed&&(t=!1),t};function wd(e,t){let n=document.createEvent("Event");return n.initEvent("keydown",!0,!0),n.keyCode=e,n.key=n.code=t,n}const Ed=function(e){e&&(this.nodeName=e)};Ed.prototype=Object.create(null);new Ed;function xd(e,t=null){let n=e.domSelection(),r=e.state.doc;if(!n.focusNode)return null;let o=e.docView.nearestDesc(n.focusNode),i=o&&0==o.size,s=e.docView.posFromDOM(n.focusNode,n.focusOffset,1);if(s<0)return null;let a,l,u=r.resolve(s);if(Cd(n)){for(a=u;o&&!o.node;)o=o.parent;let e=o.node;if(o&&e.isAtom&&Mo.isSelectable(e)&&o.parent&&(!e.isInline||!function(e,t,n){for(let r=0==t,o=t==bd(e);r||o;){if(e==n)return!0;let t=md(e);if(!(e=e.parentNode))return!1;r=r&&0==t,o=o&&t==bd(e)}}(n.focusNode,n.focusOffset,o.dom))){let e=o.posBefore;l=new Mo(s==e?u:r.resolve(e))}}else{let t=e.docView.posFromDOM(n.anchorNode,n.anchorOffset,1);if(t<0)return null;a=r.resolve(t)}if(!l){l=Nd(e,a,u,"pointer"==t||e.state.selection.head<u.pos&&!i?1:-1)}return l}function kd(e){return e.editable?e.hasFocus():Rd(e)&&document.activeElement&&document.activeElement.contains(e.dom)}function Ad(e,t=!1){let n=e.state.selection;if(Td(e,n),kd(e)){if(!t&&e.input.mouseDown&&e.input.mouseDown.allowDefault&&ad){let t=e.domSelection(),n=e.domObserver.currentSelection;if(t.anchorNode&&n.anchorNode&&gd(t.anchorNode,t.anchorOffset,n.anchorNode,n.anchorOffset))return e.input.mouseDown.delayedSelectionSync=!0,void e.domObserver.setCurSelection()}if(e.domObserver.disconnectSelection(),e.cursorWrapper)!function(e){let t=e.domSelection(),n=document.createRange(),r=e.cursorWrapper.dom,o="IMG"==r.nodeName;o?n.setEnd(r.parentNode,md(r)+1):n.setEnd(r,0);n.collapse(!1),t.removeAllRanges(),t.addRange(n),!o&&!e.state.selection.visible&&rd&&od<=11&&(r.disabled=!0,r.disabled=!1)}(e);else{let r,o,{anchor:i,head:s}=n;!Sd||n instanceof Ao||(n.$from.parent.inlineContent||(r=Md(e,n.from)),n.empty||n.$from.parent.inlineContent||(o=Md(e,n.to))),e.docView.setSelection(i,s,e.root,t),Sd&&(r&&Od(r),o&&Od(o)),n.visible?e.dom.classList.remove("ProseMirror-hideselection"):(e.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&function(e){let t=e.dom.ownerDocument;t.removeEventListener("selectionchange",e.input.hideSelectionGuard);let n=e.domSelection(),r=n.anchorNode,o=n.anchorOffset;t.addEventListener("selectionchange",e.input.hideSelectionGuard=()=>{n.anchorNode==r&&n.anchorOffset==o||(t.removeEventListener("selectionchange",e.input.hideSelectionGuard),setTimeout((()=>{kd(e)&&!e.state.selection.visible||e.dom.classList.remove("ProseMirror-hideselection")}),20))})}(e))}e.domObserver.setCurSelection(),e.domObserver.connectSelection()}}const Sd=ud||ad&&ld<63;function Md(e,t){let{node:n,offset:r}=e.docView.domFromPos(t,0),o=r<n.childNodes.length?n.childNodes[r]:null,i=r?n.childNodes[r-1]:null;if(ud&&o&&"false"==o.contentEditable)return Fd(o);if(!(o&&"false"!=o.contentEditable||i&&"false"!=i.contentEditable)){if(o)return Fd(o);if(i)return Fd(i)}}function Fd(e){return e.contentEditable="true",ud&&e.draggable&&(e.draggable=!1,e.wasDraggable=!0),e}function Od(e){e.contentEditable="false",e.wasDraggable&&(e.draggable=!0,e.wasDraggable=null)}function Td(e,t){if(t instanceof Mo){let n=e.docView.descAt(t.from);n!=e.lastSelectedViewDesc&&(Bd(e),n&&n.selectNode(),e.lastSelectedViewDesc=n)}else Bd(e)}function Bd(e){e.lastSelectedViewDesc&&(e.lastSelectedViewDesc.parent&&e.lastSelectedViewDesc.deselectNode(),e.lastSelectedViewDesc=void 0)}function Nd(e,t,n,r){return e.someProp("createSelectionBetween",(r=>r(e,t,n)))||Ao.between(t,n,r)}function Rd(e){let t=e.domSelection();if(!t.anchorNode)return!1;try{return e.dom.contains(3==t.anchorNode.nodeType?t.anchorNode.parentNode:t.anchorNode)&&(e.editable||e.dom.contains(3==t.focusNode.nodeType?t.focusNode.parentNode:t.focusNode))}catch(n){return!1}}function Id(e,t){let{$anchor:n,$head:r}=e.selection,o=t>0?n.max(r):n.min(r),i=o.parent.inlineContent?o.depth?e.doc.resolve(t>0?o.after():o.before()):null:o;return i&&wo.findFrom(i,t)}function Pd(e,t){return e.dispatch(e.state.tr.setSelection(t).scrollIntoView()),!0}function Ld(e,t,n){let r=e.state.selection;if(!(r instanceof Ao)){if(r instanceof Mo&&r.node.isInline)return Pd(e,new Ao(t>0?r.$to:r.$from));{let n=Id(e.state,t);return!!n&&Pd(e,n)}}if(!r.empty||n.indexOf("s")>-1)return!1;if(e.endOfTextblock(t>0?"right":"left")){let n=Id(e.state,t);return!!(n&&n instanceof Mo)&&Pd(e,n)}if(!(dd&&n.indexOf("m")>-1)){let n,o=r.$head,i=o.textOffset?null:t<0?o.nodeBefore:o.nodeAfter;if(!i||i.isText)return!1;let s=t<0?o.pos-i.nodeSize:o.pos;return!!(i.isAtom||(n=e.docView.descAt(s))&&!n.contentDOM)&&(Mo.isSelectable(i)?Pd(e,new Mo(t<0?e.state.doc.resolve(o.pos-i.nodeSize):o)):!!hd&&Pd(e,new Ao(e.state.doc.resolve(t<0?s:s+i.nodeSize))))}}function zd(e){return 3==e.nodeType?e.nodeValue.length:e.childNodes.length}function $d(e){let t=e.pmViewDesc;return t&&0==t.size&&(e.nextSibling||"BR"!=e.nodeName)}function jd(e){let t=e.domSelection(),n=t.focusNode,r=t.focusOffset;if(!n)return;let o,i,s=!1;for(id&&1==n.nodeType&&r<zd(n)&&$d(n.childNodes[r])&&(s=!0);;)if(r>0){if(1!=n.nodeType)break;{let e=n.childNodes[r-1];if($d(e))o=n,i=--r;else{if(3!=e.nodeType)break;n=e,r=n.nodeValue.length}}}else{if(Hd(n))break;{let t=n.previousSibling;for(;t&&$d(t);)o=n.parentNode,i=md(t),t=t.previousSibling;if(t)n=t,r=zd(n);else{if(n=n.parentNode,n==e.dom)break;r=0}}}s?Kd(e,t,n,r):o&&Kd(e,t,o,i)}function _d(e){let t=e.domSelection(),n=t.focusNode,r=t.focusOffset;if(!n)return;let o,i,s=zd(n);for(;;)if(r<s){if(1!=n.nodeType)break;if(!$d(n.childNodes[r]))break;o=n,i=++r}else{if(Hd(n))break;{let t=n.nextSibling;for(;t&&$d(t);)o=t.parentNode,i=md(t)+1,t=t.nextSibling;if(t)n=t,r=0,s=zd(n);else{if(n=n.parentNode,n==e.dom)break;r=s=0}}}o&&Kd(e,t,o,i)}function Hd(e){let t=e.pmViewDesc;return t&&t.node&&t.node.isBlock}function Kd(e,t,n,r){if(Cd(t)){let e=document.createRange();e.setEnd(n,r),e.setStart(n,r),t.removeAllRanges(),t.addRange(e)}else t.extend&&t.extend(n,r);e.domObserver.setCurSelection();let{state:o}=e;setTimeout((()=>{e.state==o&&Ad(e)}),50)}function Vd(e,t,n){let r=e.state.selection;if(r instanceof Ao&&!r.empty||n.indexOf("s")>-1)return!1;if(dd&&n.indexOf("m")>-1)return!1;let{$from:o,$to:i}=r;if(!o.parent.inlineContent||e.endOfTextblock(t<0?"up":"down")){let n=Id(e.state,t);if(n&&n instanceof Mo)return Pd(e,n)}if(!o.parent.inlineContent){let n=t<0?o:i,s=r instanceof Oo?wo.near(n,t):wo.findFrom(n,t);return!!s&&Pd(e,s)}return!1}function qd(e,t){if(!(e.state.selection instanceof Ao))return!0;let{$head:n,$anchor:r,empty:o}=e.state.selection;if(!n.sameParent(r))return!0;if(!o)return!1;if(e.endOfTextblock(t>0?"forward":"backward"))return!0;let i=!n.textOffset&&(t<0?n.nodeBefore:n.nodeAfter);if(i&&!i.isText){let r=e.state.tr;return t<0?r.delete(n.pos-i.nodeSize,n.pos):r.delete(n.pos,n.pos+i.nodeSize),e.dispatch(r),!0}return!1}function Wd(e,t,n){e.domObserver.stop(),t.contentEditable=n,e.domObserver.start()}function Ud(e,t){let n=t.keyCode,r=function(e){let t="";return e.ctrlKey&&(t+="c"),e.metaKey&&(t+="m"),e.altKey&&(t+="a"),e.shiftKey&&(t+="s"),t}(t);return 8==n||dd&&72==n&&"c"==r?qd(e,-1)||jd(e):46==n||dd&&68==n&&"c"==r?qd(e,1)||_d(e):13==n||27==n||(37==n||dd&&66==n&&"c"==r?Ld(e,-1,r)||jd(e):39==n||dd&&70==n&&"c"==r?Ld(e,1,r)||_d(e):38==n||dd&&80==n&&"c"==r?Vd(e,-1,r)||jd(e):40==n||dd&&78==n&&"c"==r?function(e){if(!ud||e.state.selection.$head.parentOffset>0)return!1;let{focusNode:t,focusOffset:n}=e.domSelection();if(t&&1==t.nodeType&&0==n&&t.firstChild&&"false"==t.firstChild.contentEditable){let n=t.firstChild;Wd(e,n,"true"),setTimeout((()=>Wd(e,n,"false")),20)}return!1}(e)||Vd(e,1,r)||_d(e):r==(dd?"m":"c")&&(66==n||73==n||89==n||90==n))}function Zd(e,t){let n=[],{content:r,openStart:o,openEnd:i}=t;for(;o>1&&i>1&&1==r.childCount&&1==r.firstChild.childCount;){o--,i--;let e=r.firstChild;n.push(e.type.name,e.attrs!=e.type.defaultAttrs?e.attrs:null),r=e.content}let s=e.someProp("clipboardSerializer")||Pr.fromSchema(e.state.schema),a=op(),l=a.createElement("div");l.appendChild(s.serializeFragment(r,{document:a}));let u,c=l.firstChild,d=0;for(;c&&1==c.nodeType&&(u=np[c.nodeName.toLowerCase()]);){for(let e=u.length-1;e>=0;e--){let t=a.createElement(u[e]);for(;l.firstChild;)t.appendChild(l.firstChild);l.appendChild(t),d++}c=l.firstChild}return c&&1==c.nodeType&&c.setAttribute("data-pm-slice",`${o} ${i}${d?` -${d}`:""} ${JSON.stringify(n)}`),{dom:l,text:e.someProp("clipboardTextSerializer",(e=>e(t)))||t.content.textBetween(0,t.content.size,"\n\n")}}function Jd(e,t,n,r,o){let i,s,a=o.parent.type.spec.code;if(!n&&!t)return null;let l=t&&(r||a||!n);if(l){if(e.someProp("transformPastedText",(e=>{t=e(t,a||r)})),a)return t?new Wn(jn.from(e.state.schema.text(t.replace(/\r\n?/g,"\n"))),0,0):Wn.empty;let n=e.someProp("clipboardTextParser",(e=>e(t,o,r)));if(n)s=n;else{let n=o.marks(),{schema:r}=e.state,s=Pr.fromSchema(r);i=document.createElement("div"),t.split(/(?:\r\n?|\n)+/).forEach((e=>{let t=i.appendChild(document.createElement("p"));e&&t.appendChild(s.serializeNode(r.text(e,n)))}))}}else e.someProp("transformPastedHTML",(e=>{n=e(n)})),i=function(e){let t=/^(\s*<meta [^>]*>)*/.exec(e);t&&(e=e.slice(t[0].length));let n,r=op().createElement("div"),o=/<([a-z][^>\s]+)/i.exec(e);(n=o&&np[o[1].toLowerCase()])&&(e=n.map((e=>"<"+e+">")).join("")+e+n.map((e=>"</"+e+">")).reverse().join(""));if(r.innerHTML=e,n)for(let i=0;i<n.length;i++)r=r.querySelector(n[i])||r;return r}(n),hd&&function(e){let t=e.querySelectorAll(ad?"span:not([class]):not([style])":"span.Apple-converted-space");for(let n=0;n<t.length;n++){let r=t[n];1==r.childNodes.length&&"\xa0"==r.textContent&&r.parentNode&&r.parentNode.replaceChild(e.ownerDocument.createTextNode(" "),r)}}(i);let u=i&&i.querySelector("[data-pm-slice]"),c=u&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(u.getAttribute("data-pm-slice")||"");if(c&&c[3])for(let d=+c[3];d>0&&i.firstChild;d--)i=i.firstChild;if(!s){let t=e.someProp("clipboardParser")||e.someProp("domParser")||Ar.fromSchema(e.state.schema);s=t.parseSlice(i,{preserveWhitespace:!(!l&&!c),context:o,ruleFromNode:e=>"BR"!=e.nodeName||e.nextSibling||!e.parentNode||Gd.test(e.parentNode.nodeName)?null:{ignore:!0}})}if(c)s=function(e,t){if(!e.size)return e;let n,r=e.content.firstChild.type.schema;try{n=JSON.parse(t)}catch(a){return e}let{content:o,openStart:i,openEnd:s}=e;for(let l=n.length-2;l>=0;l-=2){let e=r.nodes[n[l]];if(!e||e.hasRequiredAttrs())break;o=jn.from(e.create(n[l+1],o)),i++,s++}return new Wn(o,i,s)}(tp(s,+c[1],+c[2]),c[4]);else if(s=Wn.maxOpen(function(e,t){if(e.childCount<2)return e;for(let n=t.depth;n>=0;n--){let r,o=t.node(n).contentMatchAt(t.index(n)),i=[];if(e.forEach((e=>{if(!i)return;let t,n=o.findWrapping(e.type);if(!n)return i=null;if(t=i.length&&r.length&&Xd(n,r,e,i[i.length-1],0))i[i.length-1]=t;else{i.length&&(i[i.length-1]=Qd(i[i.length-1],r.length));let t=Yd(e,n);i.push(t),o=o.matchType(t.type),r=n}})),i)return jn.from(i)}return e}(s.content,o),!0),s.openStart||s.openEnd){let e=0,t=0;for(let n=s.content.firstChild;e<s.openStart&&!n.type.spec.isolating;e++,n=n.firstChild);for(let n=s.content.lastChild;t<s.openEnd&&!n.type.spec.isolating;t++,n=n.lastChild);s=tp(s,e,t)}return e.someProp("transformPasted",(e=>{s=e(s)})),s}const Gd=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function Yd(e,t,n=0){for(let r=t.length-1;r>=n;r--)e=t[r].create(null,jn.from(e));return e}function Xd(e,t,n,r,o){if(o<e.length&&o<t.length&&e[o]==t[o]){let i=Xd(e,t,n,r.lastChild,o+1);if(i)return r.copy(r.content.replaceChild(r.childCount-1,i));if(r.contentMatchAt(r.childCount).matchType(o==e.length-1?n.type:e[o+1]))return r.copy(r.content.append(jn.from(Yd(n,e,o+1))))}}function Qd(e,t){if(0==t)return e;let n=e.content.replaceChild(e.childCount-1,Qd(e.lastChild,t-1)),r=e.contentMatchAt(e.childCount).fillBefore(jn.empty,!0);return e.copy(n.append(r))}function ep(e,t,n,r,o,i){let s=t<0?e.firstChild:e.lastChild,a=s.content;return o<r-1&&(a=ep(a,t,n,r,o+1,i)),o>=n&&(a=t<0?s.contentMatchAt(0).fillBefore(a,e.childCount>1||i<=o).append(a):a.append(s.contentMatchAt(s.childCount).fillBefore(jn.empty,!0))),e.replaceChild(t<0?0:e.childCount-1,s.copy(a))}function tp(e,t,n){return t<e.openStart&&(e=new Wn(ep(e.content,-1,t,e.openStart,0,e.openEnd),t,e.openEnd)),n<e.openEnd&&(e=new Wn(ep(e.content,1,n,e.openEnd,0,0),e.openStart,n)),e}const np={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let rp=null;function op(){return rp||(rp=document.implementation.createHTMLDocument("title"))}const ip={};let sp={};function ap(e,t){e.input.lastSelectionOrigin=t,e.input.lastSelectionTime=Date.now()}function lp(e){return{left:e.clientX,top:e.clientY}}function up(e,t,n,r,o){if(-1==r)return!1;let i=e.state.doc.resolve(r);for(let s=i.depth+1;s>0;s--)if(e.someProp(t,(t=>s>i.depth?t(e,n,i.nodeAfter,i.before(s),o,!0):t(e,n,i.node(s),i.before(s),o,!1))))return!0;return!1}function cp(e,t,n){e.focused||e.focus();let r=e.state.tr.setSelection(t);"pointer"==n&&r.setMeta("pointer",!0),e.dispatch(r)}function dp(e,t,n,r,o){return up(e,"handleClickOn",t,n,r)||e.someProp("handleClick",(n=>n(e,t,r)))||(o?function(e,t){if(-1==t)return!1;let n,r,o=e.state.selection;o instanceof Mo&&(n=o.node);let i=e.state.doc.resolve(t);for(let s=i.depth+1;s>0;s--){let e=s>i.depth?i.nodeAfter:i.node(s);if(Mo.isSelectable(e)){r=n&&o.$from.depth>0&&s>=o.$from.depth&&i.before(o.$from.depth+1)==o.$from.pos?i.before(o.$from.depth):i.before(s);break}}return null!=r&&(cp(e,Mo.create(e.state.doc,r),"pointer"),!0)}(e,n):function(e,t){if(-1==t)return!1;let n=e.state.doc.resolve(t),r=n.nodeAfter;return!!(r&&r.isAtom&&Mo.isSelectable(r))&&(cp(e,new Mo(n),"pointer"),!0)}(e,n))}function pp(e,t,n,r){return up(e,"handleDoubleClickOn",t,n,r)||e.someProp("handleDoubleClick",(n=>n(e,t,r)))}function hp(e,t,n,r){return up(e,"handleTripleClickOn",t,n,r)||e.someProp("handleTripleClick",(n=>n(e,t,r)))||function(e,t,n){if(0!=n.button)return!1;let r=e.state.doc;if(-1==t)return!!r.inlineContent&&(cp(e,Ao.create(r,0,r.content.size),"pointer"),!0);let o=r.resolve(t);for(let i=o.depth+1;i>0;i--){let t=i>o.depth?o.nodeAfter:o.node(i),n=o.before(i);if(t.inlineContent)cp(e,Ao.create(r,n+1,n+1+t.content.size),"pointer");else{if(!Mo.isSelectable(t))continue;cp(e,Mo.create(r,n),"pointer")}return!0}}(e,n,r)}function fp(e){return Cp(e)}sp.keydown=(e,t)=>{let n=t;if(e.input.shiftKey=16==n.keyCode||n.shiftKey,!yp(e,n)&&(e.input.lastKeyCode=n.keyCode,e.input.lastKeyCodeTime=Date.now(),!pd||!ad||13!=n.keyCode))if(229!=n.keyCode&&e.domObserver.forceFlush(),!cd||13!=n.keyCode||n.ctrlKey||n.altKey||n.metaKey)e.someProp("handleKeyDown",(t=>t(e,n)))||Ud(e,n)?n.preventDefault():ap(e,"key");else{let t=Date.now();e.input.lastIOSEnter=t,e.input.lastIOSEnterFallbackTimeout=setTimeout((()=>{e.input.lastIOSEnter==t&&(e.someProp("handleKeyDown",(t=>t(e,wd(13,"Enter")))),e.input.lastIOSEnter=0)}),200)}},sp.keyup=(e,t)=>{16==t.keyCode&&(e.input.shiftKey=!1)},sp.keypress=(e,t)=>{let n=t;if(yp(e,n)||!n.charCode||n.ctrlKey&&!n.altKey||dd&&n.metaKey)return;if(e.someProp("handleKeyPress",(t=>t(e,n))))return void n.preventDefault();let r=e.state.selection;if(!(r instanceof Ao&&r.$from.sameParent(r.$to))){let t=String.fromCharCode(n.charCode);e.someProp("handleTextInput",(n=>n(e,r.$from.pos,r.$to.pos,t)))||e.dispatch(e.state.tr.insertText(t).scrollIntoView()),n.preventDefault()}};const mp=dd?"metaKey":"ctrlKey";ip.mousedown=(e,t)=>{let n=t;e.input.shiftKey=n.shiftKey;let r=fp(e),o=Date.now(),i="singleClick";o-e.input.lastClick.time<500&&function(e,t){let n=t.x-e.clientX,r=t.y-e.clientY;return n*n+r*r<100}(n,e.input.lastClick)&&!n[mp]&&("singleClick"==e.input.lastClick.type?i="doubleClick":"doubleClick"==e.input.lastClick.type&&(i="tripleClick")),e.input.lastClick={time:o,x:n.clientX,y:n.clientY,type:i};let s=e.posAtCoords(lp(n));s&&("singleClick"==i?(e.input.mouseDown&&e.input.mouseDown.done(),e.input.mouseDown=new gp(e,s,n,!!r)):("doubleClick"==i?pp:hp)(e,s.pos,s.inside,n)?n.preventDefault():ap(e,"pointer"))};class gp{constructor(e,t,n,r){let o,i;if(this.view=e,this.pos=t,this.event=n,this.flushed=r,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!n[mp],this.allowDefault=n.shiftKey,t.inside>-1)o=e.state.doc.nodeAt(t.inside),i=t.inside;else{let n=e.state.doc.resolve(t.pos);o=n.parent,i=n.depth?n.before():0}const s=r?null:n.target,a=s?e.docView.nearestDesc(s,!0):null;this.target=a?a.dom:null;let{selection:l}=e.state;(0==n.button&&o.type.spec.draggable&&!1!==o.type.spec.selectable||l instanceof Mo&&l.from<=i&&l.to>i)&&(this.mightDrag={node:o,pos:i,addAttr:!(!this.target||this.target.draggable),setUneditable:!(!this.target||!id||this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout((()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")}),20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),ap(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout((()=>Ad(this.view))),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let t=this.pos;this.view.state.doc!=this.startDoc&&(t=this.view.posAtCoords(lp(e))),this.allowDefault||!t?ap(this.view,"pointer"):dp(this.view,t.pos,t.inside,e,this.selectNode)?e.preventDefault():0==e.button&&(this.flushed||ud&&this.mightDrag&&!this.mightDrag.node.isAtom||ad&&!(this.view.state.selection instanceof Ao)&&Math.min(Math.abs(t.pos-this.view.state.selection.from),Math.abs(t.pos-this.view.state.selection.to))<=2)?(cp(this.view,wo.near(this.view.state.doc.resolve(t.pos)),"pointer"),e.preventDefault()):ap(this.view,"pointer")}move(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0),ap(this.view,"pointer"),0==e.buttons&&this.done()}}function yp(e,t){return!!e.composing||!!(ud&&Math.abs(t.timeStamp-e.input.compositionEndedAt)<500)&&(e.input.compositionEndedAt=-2e8,!0)}ip.touchdown=e=>{fp(e),ap(e,"pointer")},ip.contextmenu=e=>fp(e);const vp=pd?5e3:-1;function bp(e,t){clearTimeout(e.input.composingTimeout),t>-1&&(e.input.composingTimeout=setTimeout((()=>Cp(e)),t))}function Dp(e){for(e.composing&&(e.input.composing=!1,e.input.compositionEndedAt=function(){let e=document.createEvent("Event");return e.initEvent("event",!0,!0),e.timeStamp}());e.input.compositionNodes.length>0;)e.input.compositionNodes.pop().markParentsDirty()}function Cp(e,t=!1){if(!(pd&&e.domObserver.flushingSoon>=0)){if(e.domObserver.forceFlush(),Dp(e),t||e.docView&&e.docView.dirty){let t=xd(e);return t&&!t.eq(e.state.selection)?e.dispatch(e.state.tr.setSelection(t)):e.updateState(e.state),!0}return!1}}sp.compositionstart=sp.compositionupdate=e=>{if(!e.composing){e.domObserver.flush();let{state:t}=e,n=t.selection.$from;if(t.selection.empty&&(t.storedMarks||!n.textOffset&&n.parentOffset&&n.nodeBefore.marks.some((e=>!1===e.type.spec.inclusive))))e.markCursor=e.state.storedMarks||n.marks(),Cp(e,!0),e.markCursor=null;else if(Cp(e),id&&t.selection.empty&&n.parentOffset&&!n.textOffset&&n.nodeBefore.marks.length){let t=e.domSelection();for(let e=t.focusNode,n=t.focusOffset;e&&1==e.nodeType&&0!=n;){let r=n<0?e.lastChild:e.childNodes[n-1];if(!r)break;if(3==r.nodeType){t.collapse(r,r.nodeValue.length);break}e=r,n=-1}}e.input.composing=!0}bp(e,vp)},sp.compositionend=(e,t)=>{e.composing&&(e.input.composing=!1,e.input.compositionEndedAt=t.timeStamp,bp(e,20))};const wp=rd&&od<15||cd&&fd<604;function Ep(e,t,n,r){let o=Jd(e,t,n,e.input.shiftKey,e.state.selection.$from);if(e.someProp("handlePaste",(t=>t(e,r,o||Wn.empty))))return!0;if(!o)return!1;let i=function(e){return 0==e.openStart&&0==e.openEnd&&1==e.content.childCount?e.content.firstChild:null}(o),s=i?e.state.tr.replaceSelectionWith(i,e.input.shiftKey):e.state.tr.replaceSelection(o);return e.dispatch(s.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}ip.copy=sp.cut=(e,t)=>{let n=t,r=e.state.selection,o="cut"==n.type;if(r.empty)return;let i=wp?null:n.clipboardData,s=r.content(),{dom:a,text:l}=Zd(e,s);i?(n.preventDefault(),i.clearData(),i.setData("text/html",a.innerHTML),i.setData("text/plain",l)):function(e,t){if(!e.dom.parentNode)return;let n=e.dom.parentNode.appendChild(document.createElement("div"));n.appendChild(t),n.style.cssText="position: fixed; left: -10000px; top: 10px";let r=getSelection(),o=document.createRange();o.selectNodeContents(t),e.dom.blur(),r.removeAllRanges(),r.addRange(o),setTimeout((()=>{n.parentNode&&n.parentNode.removeChild(n),e.focus()}),50)}(e,a),o&&e.dispatch(e.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))},sp.paste=(e,t)=>{let n=t;if(e.composing&&!pd)return;let r=wp?null:n.clipboardData;r&&Ep(e,r.getData("text/plain"),r.getData("text/html"),n)?n.preventDefault():function(e,t){if(!e.dom.parentNode)return;let n=e.input.shiftKey||e.state.selection.$from.parent.type.spec.code,r=e.dom.parentNode.appendChild(document.createElement(n?"textarea":"div"));n||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus(),setTimeout((()=>{e.focus(),r.parentNode&&r.parentNode.removeChild(r),n?Ep(e,r.value,null,t):Ep(e,r.textContent,r.innerHTML,t)}),50)}(e,n)};class xp{constructor(e,t){this.slice=e,this.move=t}}const kp=dd?"altKey":"ctrlKey";ip.dragstart=(e,t)=>{let n=t,r=e.input.mouseDown;if(r&&r.done(),!n.dataTransfer)return;let o=e.state.selection,i=o.empty?null:e.posAtCoords(lp(n));if(i&&i.pos>=o.from&&i.pos<=(o instanceof Mo?o.to-1:o.to));else if(r&&r.mightDrag)e.dispatch(e.state.tr.setSelection(Mo.create(e.state.doc,r.mightDrag.pos)));else if(n.target&&1==n.target.nodeType){let t=e.docView.nearestDesc(n.target,!0);t&&t.node.type.spec.draggable&&t!=e.docView&&e.dispatch(e.state.tr.setSelection(Mo.create(e.state.doc,t.posBefore)))}let s=e.state.selection.content(),{dom:a,text:l}=Zd(e,s);n.dataTransfer.clearData(),n.dataTransfer.setData(wp?"Text":"text/html",a.innerHTML),n.dataTransfer.effectAllowed="copyMove",wp||n.dataTransfer.setData("text/plain",l),e.dragging=new xp(s,!n[kp])},ip.dragend=e=>{let t=e.dragging;window.setTimeout((()=>{e.dragging==t&&(e.dragging=null)}),50)},sp.dragover=sp.dragenter=(e,t)=>t.preventDefault(),sp.drop=(e,t)=>{let n=t,r=e.dragging;if(e.dragging=null,!n.dataTransfer)return;let o=e.posAtCoords(lp(n));if(!o)return;let i=e.state.doc.resolve(o.pos);if(!i)return;let s=r&&r.slice;s?e.someProp("transformPasted",(e=>{s=e(s)})):s=Jd(e,n.dataTransfer.getData(wp?"Text":"text/plain"),wp?null:n.dataTransfer.getData("text/html"),!1,i);let a=!(!r||n[kp]);if(e.someProp("handleDrop",(t=>t(e,n,s||Wn.empty,a))))return void n.preventDefault();if(!s)return;n.preventDefault();let l=s?so(e.state.doc,i.pos,s):i.pos;null==l&&(l=i.pos);let u=e.state.tr;a&&u.deleteSelection();let c=u.mapping.map(l),d=0==s.openStart&&0==s.openEnd&&1==s.content.childCount,p=u.doc;if(d?u.replaceRangeWith(c,c,s.content.firstChild):u.replaceRange(c,c,s),u.doc.eq(p))return;let h=u.doc.resolve(c);if(d&&Mo.isSelectable(s.content.firstChild)&&h.nodeAfter&&h.nodeAfter.sameMarkup(s.content.firstChild))u.setSelection(new Mo(h));else{let t=u.mapping.map(l);u.mapping.maps[u.mapping.maps.length-1].forEach(((e,n,r,o)=>t=o)),u.setSelection(Nd(e,h,u.doc.resolve(t)))}e.focus(),e.dispatch(u.setMeta("uiEvent","drop"))},ip.focus=e=>{e.focused||(e.domObserver.stop(),e.dom.classList.add("ProseMirror-focused"),e.domObserver.start(),e.focused=!0,setTimeout((()=>{e.docView&&e.hasFocus()&&!e.domObserver.currentSelection.eq(e.domSelection())&&Ad(e)}),20))},ip.blur=(e,t)=>{let n=t;e.focused&&(e.domObserver.stop(),e.dom.classList.remove("ProseMirror-focused"),e.domObserver.start(),n.relatedTarget&&e.dom.contains(n.relatedTarget)&&e.domObserver.currentSelection.clear(),e.focused=!1)},ip.beforeinput=(e,t)=>{if(ad&&pd&&"deleteContentBackward"==t.inputType){e.domObserver.flushSoon();let{domChangeCount:t}=e.input;setTimeout((()=>{if(e.input.domChangeCount!=t)return;if(e.dom.blur(),e.focus(),e.someProp("handleKeyDown",(t=>t(e,wd(8,"Backspace")))))return;let{$cursor:n}=e.state.selection;n&&n.pos>0&&e.dispatch(e.state.tr.delete(n.pos-1,n.pos).scrollIntoView())}),50)}};for(let os in sp)ip[os]=sp[os];function Ap(e,t){if(e==t)return!0;for(let n in e)if(e[n]!==t[n])return!1;for(let n in t)if(!(n in e))return!1;return!0}class Sp{constructor(e,t){this.toDOM=e,this.spec=t||Bp,this.side=this.spec.side||0}map(e,t,n,r){let{pos:o,deleted:i}=e.mapResult(t.from+r,this.side<0?-1:1);return i?null:new Op(o-n,o-n,this)}valid(){return!0}eq(e){return this==e||e instanceof Sp&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&Ap(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}}class Mp{constructor(e,t){this.attrs=e,this.spec=t||Bp}map(e,t,n,r){let o=e.map(t.from+r,this.spec.inclusiveStart?-1:1)-n,i=e.map(t.to+r,this.spec.inclusiveEnd?1:-1)-n;return o>=i?null:new Op(o,i,this)}valid(e,t){return t.from<t.to}eq(e){return this==e||e instanceof Mp&&Ap(this.attrs,e.attrs)&&Ap(this.spec,e.spec)}static is(e){return e.type instanceof Mp}destroy(){}}class Fp{constructor(e,t){this.attrs=e,this.spec=t||Bp}map(e,t,n,r){let o=e.mapResult(t.from+r,1);if(o.deleted)return null;let i=e.mapResult(t.to+r,-1);return i.deleted||i.pos<=o.pos?null:new Op(o.pos-n,i.pos-n,this)}valid(e,t){let n,{index:r,offset:o}=e.content.findIndex(t.from);return o==t.from&&!(n=e.child(r)).isText&&o+n.nodeSize==t.to}eq(e){return this==e||e instanceof Fp&&Ap(this.attrs,e.attrs)&&Ap(this.spec,e.spec)}destroy(){}}class Op{constructor(e,t,n){this.from=e,this.to=t,this.type=n}copy(e,t){return new Op(e,t,this.type)}eq(e,t=0){return this.type.eq(e.type)&&this.from+t==e.from&&this.to+t==e.to}map(e,t,n){return this.type.map(e,this,t,n)}static widget(e,t,n){return new Op(e,e,new Sp(t,n))}static inline(e,t,n,r){return new Op(e,t,new Mp(n,r))}static node(e,t,n,r){return new Op(e,t,new Fp(n,r))}get spec(){return this.type.spec}get inline(){return this.type instanceof Mp}}const Tp=[],Bp={};class Np{constructor(e,t){this.local=e.length?e:Tp,this.children=t.length?t:Tp}static create(e,t){return t.length?$p(t,e,0,Bp):Rp}find(e,t,n){let r=[];return this.findInner(null==e?0:e,null==t?1e9:t,r,0,n),r}findInner(e,t,n,r,o){for(let i=0;i<this.local.length;i++){let s=this.local[i];s.from<=t&&s.to>=e&&(!o||o(s.spec))&&n.push(s.copy(s.from+r,s.to+r))}for(let i=0;i<this.children.length;i+=3)if(this.children[i]<t&&this.children[i+1]>e){let s=this.children[i]+1;this.children[i+2].findInner(e-s,t-s,n,r+s,o)}}map(e,t,n){return this==Rp||0==e.maps.length?this:this.mapInner(e,t,0,0,n||Bp)}mapInner(e,t,n,r,o){let i;for(let s=0;s<this.local.length;s++){let a=this.local[s].map(e,n,r);a&&a.type.valid(t,a)?(i||(i=[])).push(a):o.onRemove&&o.onRemove(this.local[s].spec)}return this.children.length?function(e,t,n,r,o,i,s){let a=e.slice(),l=(e,t,n,r)=>{for(let s=0;s<a.length;s+=3){let l,u=a[s+1];if(u<0||e>u+i)continue;let c=a[s]+i;t>=c?a[s+1]=e<=c?-2:-1:n>=o&&(l=r-n-(t-e))&&(a[s]+=l,a[s+1]+=l)}};for(let c=0;c<n.maps.length;c++)n.maps[c].forEach(l);let u=!1;for(let c=0;c<a.length;c+=3)if(a[c+1]<0){if(-2==a[c+1]){u=!0,a[c+1]=-1;continue}let t=n.map(e[c]+i),l=t-o;if(l<0||l>=r.content.size){u=!0;continue}let d=n.map(e[c+1]+i,-1)-o,{index:p,offset:h}=r.content.findIndex(l),f=r.maybeChild(p);if(f&&h==l&&h+f.nodeSize==d){let r=a[c+2].mapInner(n,f,t+1,e[c]+i+1,s);r!=Rp?(a[c]=l,a[c+1]=d,a[c+2]=r):(a[c+1]=-2,u=!0)}else u=!0}if(u){let l=function(e,t,n,r,o,i,s){function a(e,t){for(let i=0;i<e.local.length;i++){let a=e.local[i].map(r,o,t);a?n.push(a):s.onRemove&&s.onRemove(e.local[i].spec)}for(let n=0;n<e.children.length;n+=3)a(e.children[n+2],e.children[n]+t+1)}for(let l=0;l<e.length;l+=3)-1==e[l+1]&&a(e[l+2],t[l]+i+1);return n}(a,e,t,n,o,i,s),u=$p(l,r,0,s);t=u.local;for(let e=0;e<a.length;e+=3)a[e+1]<0&&(a.splice(e,3),e-=3);for(let e=0,t=0;e<u.children.length;e+=3){let n=u.children[e];for(;t<a.length&&a[t]<n;)t+=3;a.splice(t,0,u.children[e],u.children[e+1],u.children[e+2])}}return new Np(t.sort(jp),a)}(this.children,i||[],e,t,n,r,o):i?new Np(i.sort(jp),Tp):Rp}add(e,t){return t.length?this==Rp?Np.create(e,t):this.addInner(e,t,0):this}addInner(e,t,n){let r,o=0;e.forEach(((e,i)=>{let s,a=i+n;if(s=Lp(t,e,a)){for(r||(r=this.children.slice());o<r.length&&r[o]<i;)o+=3;r[o]==i?r[o+2]=r[o+2].addInner(e,s,a+1):r.splice(o,0,i,i+e.nodeSize,$p(s,e,a+1,Bp)),o+=3}}));let i=Pp(o?zp(t):t,-n);for(let s=0;s<i.length;s++)i[s].type.valid(e,i[s])||i.splice(s--,1);return new Np(i.length?this.local.concat(i).sort(jp):this.local,r||this.children)}remove(e){return 0==e.length||this==Rp?this:this.removeInner(e,0)}removeInner(e,t){let n=this.children,r=this.local;for(let o=0;o<n.length;o+=3){let r,i=n[o]+t,s=n[o+1]+t;for(let t,n=0;n<e.length;n++)(t=e[n])&&t.from>i&&t.to<s&&(e[n]=null,(r||(r=[])).push(t));if(!r)continue;n==this.children&&(n=this.children.slice());let a=n[o+2].removeInner(r,i+1);a!=Rp?n[o+2]=a:(n.splice(o,3),o-=3)}if(r.length)for(let o,i=0;i<e.length;i++)if(o=e[i])for(let e=0;e<r.length;e++)r[e].eq(o,t)&&(r==this.local&&(r=this.local.slice()),r.splice(e--,1));return n==this.children&&r==this.local?this:r.length||n.length?new Np(r,n):Rp}forChild(e,t){if(this==Rp)return this;if(t.isLeaf)return Np.empty;let n,r;for(let s=0;s<this.children.length;s+=3)if(this.children[s]>=e){this.children[s]==e&&(n=this.children[s+2]);break}let o=e+1,i=o+t.content.size;for(let s=0;s<this.local.length;s++){let e=this.local[s];if(e.from<i&&e.to>o&&e.type instanceof Mp){let t=Math.max(o,e.from)-o,n=Math.min(i,e.to)-o;t<n&&(r||(r=[])).push(e.copy(t,n))}}if(r){let e=new Np(r.sort(jp),Tp);return n?new Ip([e,n]):e}return n||Rp}eq(e){if(this==e)return!0;if(!(e instanceof Np)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let t=0;t<this.local.length;t++)if(!this.local[t].eq(e.local[t]))return!1;for(let t=0;t<this.children.length;t+=3)if(this.children[t]!=e.children[t]||this.children[t+1]!=e.children[t+1]||!this.children[t+2].eq(e.children[t+2]))return!1;return!0}locals(e){return _p(this.localsInner(e))}localsInner(e){if(this==Rp)return Tp;if(e.inlineContent||!this.local.some(Mp.is))return this.local;let t=[];for(let n=0;n<this.local.length;n++)this.local[n].type instanceof Mp||t.push(this.local[n]);return t}}Np.empty=new Np([],[]),Np.removeOverlap=_p;const Rp=Np.empty;class Ip{constructor(e){this.members=e}map(e,t){const n=this.members.map((n=>n.map(e,t,Bp)));return Ip.from(n)}forChild(e,t){if(t.isLeaf)return Np.empty;let n=[];for(let r=0;r<this.members.length;r++){let o=this.members[r].forChild(e,t);o!=Rp&&(o instanceof Ip?n=n.concat(o.members):n.push(o))}return Ip.from(n)}eq(e){if(!(e instanceof Ip)||e.members.length!=this.members.length)return!1;for(let t=0;t<this.members.length;t++)if(!this.members[t].eq(e.members[t]))return!1;return!0}locals(e){let t,n=!0;for(let r=0;r<this.members.length;r++){let o=this.members[r].localsInner(e);if(o.length)if(t){n&&(t=t.slice(),n=!1);for(let e=0;e<o.length;e++)t.push(o[e])}else t=o}return t?_p(n?t:t.sort(jp)):Tp}static from(e){switch(e.length){case 0:return Rp;case 1:return e[0];default:return new Ip(e)}}}function Pp(e,t){if(!t||!e.length)return e;let n=[];for(let r=0;r<e.length;r++){let o=e[r];n.push(new Op(o.from+t,o.to+t,o.type))}return n}function Lp(e,t,n){if(t.isLeaf)return null;let r=n+t.nodeSize,o=null;for(let i,s=0;s<e.length;s++)(i=e[s])&&i.from>n&&i.to<r&&((o||(o=[])).push(i),e[s]=null);return o}function zp(e){let t=[];for(let n=0;n<e.length;n++)null!=e[n]&&t.push(e[n]);return t}function $p(e,t,n,r){let o=[],i=!1;t.forEach(((t,s)=>{let a=Lp(e,t,s+n);if(a){i=!0;let e=$p(a,t,n+s+1,r);e!=Rp&&o.push(s,s+t.nodeSize,e)}}));let s=Pp(i?zp(e):e,-n).sort(jp);for(let a=0;a<s.length;a++)s[a].type.valid(t,s[a])||(r.onRemove&&r.onRemove(s[a].spec),s.splice(a--,1));return s.length||o.length?new Np(s,o):Rp}function jp(e,t){return e.from-t.from||e.to-t.to}function _p(e){let t=e;for(let n=0;n<t.length-1;n++){let r=t[n];if(r.from!=r.to)for(let o=n+1;o<t.length;o++){let i=t[o];if(i.from!=r.from){i.from<r.to&&(t==e&&(t=e.slice()),t[n]=r.copy(r.from,i.from),Hp(t,o,r.copy(i.from,r.to)));break}i.to!=r.to&&(t==e&&(t=e.slice()),t[o]=i.copy(i.from,r.to),Hp(t,o+1,i.copy(r.to,i.to)))}}return t}function Hp(e,t,n){for(;t<e.length&&jp(n,e[t])>0;)t++;e.splice(t,0,n)}Ai.create({name:"placeholder",addOptions:()=>({emptyEditorClass:"is-editor-empty",emptyNodeClass:"is-empty",placeholder:"Write something \u2026",showOnlyWhenEditable:!0,showOnlyCurrent:!0,includeChildren:!1}),addProseMirrorPlugins(){return[new Lo({props:{decorations:({doc:e,selection:t})=>{const n=this.editor.isEditable||!this.options.showOnlyWhenEditable,{anchor:r}=t,o=[];return n?(e.descendants(((e,t)=>{const n=r>=t&&r<=t+e.nodeSize,i=!e.isLeaf&&!e.childCount;if((n||!this.options.showOnlyCurrent)&&i){const r=[this.options.emptyNodeClass];this.editor.isEmpty&&r.push(this.options.emptyEditorClass);const i=Op.node(t,t+e.nodeSize,{class:r.join(" "),"data-placeholder":"function"==typeof this.options.placeholder?this.options.placeholder({editor:this.editor,node:e,pos:t,hasAnchor:n}):this.options.placeholder});o.push(i)}return this.options.includeChildren})),Np.create(e,o)):null}}})]}});function Kp(){return Kp=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Kp.apply(this,arguments)}function Vp(e){return Vp=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Vp(e)}function qp(e,t){return qp=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},qp(e,t)}function Wp(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function Up(e,t,n){return Up=Wp()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var o=new(Function.bind.apply(e,r));return n&&qp(o,n.prototype),o},Up.apply(null,arguments)}function Zp(e){var t="function"==typeof Map?new Map:void 0;return Zp=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return Up(e,arguments,Vp(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),qp(r,e)},Zp(e)}function Jp(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}function Gp(e,t){return t||(t=e.slice(0)),e.raw=t,e}Yp||(Yp=Gp([""])),Xp||(Xp=Gp([""])),Qp||(Qp=Gp([""])),eh||(eh=Gp([""]));var Yp,Xp,Qp,eh,th,nh,rh,oh,ih,sh,ah,lh,uh,ch,dh,ph,hh,fh,mh=i.ZP.button.attrs((function(e){var t=e.background;return{className:"w-full flex justify-between items-center py-1.5 \n  px-2 space-x-1.5 focus:outline-none focus:ring-2 focus:ring-primary-500 \n  box-border border-ui-100 active:border-ui-800 hover:border-ui-300 \n  disabled:border-ui-200 disabled:bg-ui-100 rounded-xl\n  "+(t&&"bg-"+t)+" "}}))(th||(th=Gp([""]))),gh=(nh||(nh=Gp([""])),rh||(rh=Gp(["\n  color: #52606d; //UI-600\n\n  ",":active & {\n    color: #323f4b; //UI-800\n  }\n\n  ",":hover & {\n    color: #003bf5; //PRIMARY-800\n  }\n\n  ",":disabled & {\n    color: #9aa5b1; //UI-300\n  }\n"])),oh||(oh=Gp(["\n  color: #7b8794; //UI-400\n\n  ",":disabled & {\n    color: #9aa5b1; //UI-300\n  }\n"])),ih||(ih=Gp(["\n  color: #9aa5b1; //UI-300\n\n  ",":hover & {\n    color: #52606d; //UI-600\n  }\n\n  ",":active & {\n    color: #323f4b; //UI-800\n  }\n\n  ",":disabled & {\n    color: #9aa5b1; //UI-300\n  }\n"])),["height","width"]),yh=function(e){var t=e.height,n=void 0===t?16:t,o=e.width,i=void 0===o?16:o,s=Jp(e,gh);return r.createElement("svg",Object.assign({width:i,height:n,fill:"none",viewBox:"0 0 16 16"},s),r.createElement("path",{d:"M14 7H9.25C9.1837 7 9.12011 6.97366 9.07322 6.92678C9.02634 6.87989 9 6.8163 9 6.75V2C9 1.73478 8.89464 1.48043 8.70711 1.29289C8.51957 1.10536 8.26522 1 8 1C7.73478 1 7.48043 1.10536 7.29289 1.29289C7.10536 1.48043 7 1.73478 7 2V6.75C7 6.8163 6.97366 6.87989 6.92678 6.92678C6.87989 6.97366 6.8163 7 6.75 7H2C1.73478 7 1.48043 7.10536 1.29289 7.29289C1.10536 7.48043 1 7.73478 1 8C1 8.26522 1.10536 8.51957 1.29289 8.70711C1.48043 8.89464 1.73478 9 2 9H6.75C6.8163 9 6.87989 9.02634 6.92678 9.07322C6.97366 9.12011 7 9.1837 7 9.25V14C7 14.2652 7.10536 14.5196 7.29289 14.7071C7.48043 14.8946 7.73478 15 8 15C8.26522 15 8.51957 14.8946 8.70711 14.7071C8.89464 14.5196 9 14.2652 9 14V9.25C9 9.1837 9.02634 9.12011 9.07322 9.07322C9.12011 9.02634 9.1837 9 9.25 9H14C14.2652 9 14.5196 8.89464 14.7071 8.70711C14.8946 8.51957 15 8.26522 15 8C15 7.73478 14.8946 7.48043 14.7071 7.29289C14.5196 7.10536 14.2652 7 14 7Z",fill:"currentColor"}))},vh=["height","width"],bh=function(e){var t=e.height,n=void 0===t?16:t,o=e.width,i=void 0===o?16:o,s=Jp(e,vh);return r.createElement("svg",Object.assign({width:i,height:n,fill:"none",viewBox:"0 0 16 16"},s),r.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.29243 5.30468C3.47973 5.11758 3.73374 5.01248 3.99858 5.01248C4.26342 5.01248 4.51743 5.11758 4.70473 5.30468L7.99376 8.59106L11.2828 5.30468C11.3749 5.20936 11.4851 5.13333 11.607 5.08102C11.7288 5.02872 11.8599 5.00119 11.9925 5.00004C12.1251 4.99889 12.2567 5.02414 12.3794 5.07432C12.5022 5.1245 12.6137 5.1986 12.7075 5.2923C12.8012 5.38601 12.8754 5.49744 12.9256 5.62009C12.9758 5.74274 13.0011 5.87415 13 6.00666C12.9988 6.13918 12.9713 6.27013 12.9189 6.39189C12.8666 6.51365 12.7905 6.62377 12.6951 6.71583L8.6999 10.7078C8.5126 10.8949 8.2586 11 7.99376 11C7.72891 11 7.47491 10.8949 7.28761 10.7078L3.29243 6.71583C3.10519 6.52868 3 6.27489 3 6.01026C3 5.74562 3.10519 5.49183 3.29243 5.30468Z",fill:"currentColor"}))},Dh=["height","width"],Ch=function(e){var t=e.height,n=void 0===t?16:t,o=e.width,i=void 0===o?16:o,s=Jp(e,Dh);return r.createElement("svg",Object.assign({width:i,height:n,fill:"none",viewBox:"0 0 16 16"},s),r.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.30468 3.29243C5.11758 3.47973 5.01248 3.73374 5.01248 3.99858C5.01248 4.26342 5.11758 4.51743 5.30468 4.70473L8.59106 7.99376L5.30468 11.2828C5.20936 11.3749 5.13333 11.4851 5.08102 11.607C5.02872 11.7288 5.00119 11.8599 5.00004 11.9925C4.99889 12.1251 5.02414 12.2567 5.07432 12.3794C5.1245 12.5022 5.1986 12.6137 5.2923 12.7075C5.38601 12.8012 5.49744 12.8754 5.62009 12.9256C5.74274 12.9758 5.87415 13.0011 6.00666 13C6.13918 12.9988 6.27013 12.9713 6.39189 12.9189C6.51365 12.8666 6.62377 12.7905 6.71583 12.6951L10.7078 8.6999C10.8949 8.5126 11 8.2586 11 7.99376C11 7.72891 10.8949 7.47491 10.7078 7.28761L6.71583 3.29243C6.52868 3.10519 6.27489 3 6.01026 3C5.74562 3 5.49183 3.10519 5.30468 3.29243Z",fill:"currentColor"}))},wh=["height","width"],Eh=function(e){var t=e.height,n=void 0===t?16:t,o=e.width,i=void 0===o?16:o,s=Jp(e,wh);return r.createElement("svg",Object.assign({width:i,height:n,fill:"none",viewBox:"0 0 16 16"},s),r.createElement("path",{d:"M15.9413 5.98803C15.8734 5.76427 15.7463 5.56516 15.5748 5.41371C15.4033 5.26225 15.1944 5.16463 14.9721 5.13211L10.884 4.48658L9.0748 0.646884C8.96555 0.450113 8.80882 0.286797 8.62029 0.173274C8.43175 0.0597504 8.21802 0 8.00048 0C7.78294 0 7.56921 0.0597504 7.38067 0.173274C7.19214 0.286797 7.03541 0.450113 6.92617 0.646884L5.07354 4.51885L1.02886 5.13211C0.807154 5.16533 0.59878 5.26285 0.427353 5.41361C0.255925 5.56436 0.128299 5.76233 0.0589391 5.98508C-0.0104209 6.20783 -0.0187413 6.44644 0.0349209 6.67388C0.0885831 6.90132 0.202082 7.10849 0.362554 7.27191L3.31464 10.3131L2.6289 14.5353C2.591 14.7658 2.61554 15.0028 2.69974 15.2194C2.78394 15.4361 2.92444 15.6237 3.10533 15.7612C3.28622 15.8987 3.50029 15.9804 3.72331 15.9972C3.94633 16.014 4.16938 15.9652 4.36724 15.8562L8.02563 13.8587L11.6452 15.8514C11.843 15.9604 12.0661 16.0092 12.2891 15.9924C12.5121 15.9756 12.7262 15.8939 12.9071 15.7564C13.088 15.619 13.2285 15.4313 13.3127 15.2146C13.3968 14.998 13.4214 14.761 13.3835 14.5305L12.7092 10.2569L15.6384 7.26832C15.7984 7.10596 15.9116 6.89988 15.9651 6.67354C16.0187 6.44721 16.0104 6.20969 15.9413 5.98803Z",fill:"currentColor"}))},xh=["height","width"],kh=function(e){var t=e.height,n=void 0===t?16:t,o=e.width,i=void 0===o?16:o,s=Jp(e,xh);return r.createElement("svg",Object.assign({width:i,height:n,fill:"none",viewBox:"0 0 16 17"},s),r.createElement("path",{d:"M8 0.5C6.41775 0.5 4.87103 0.969192 3.55544 1.84824C2.23985 2.72729 1.21447 3.97672 0.608967 5.43853C0.00346627 6.90034 -0.15496 8.50887 0.153721 10.0607C0.462403 11.6126 1.22433 13.038 2.34315 14.1569C3.46197 15.2757 4.88743 16.0376 6.43928 16.3463C7.99113 16.655 9.59966 16.4965 11.0615 15.891C12.5233 15.2855 13.7727 14.2602 14.6518 12.9446C15.5308 11.629 16 10.0822 16 8.5C15.9975 6.37905 15.1538 4.34569 13.6541 2.84595C12.1543 1.34621 10.121 0.502541 8 0.5V0.5ZM9 12.5C9 12.7652 8.89465 13.0196 8.70711 13.2071C8.51957 13.3946 8.26522 13.5 8 13.5C7.73479 13.5 7.48043 13.3946 7.2929 13.2071C7.10536 13.0196 7 12.7652 7 12.5V9.3C7 9.03478 7.10536 8.78043 7.2929 8.59289C7.48043 8.40536 7.73479 8.3 8 8.3C8.26522 8.3 8.51957 8.40536 8.70711 8.59289C8.89465 8.78043 9 9.03478 9 9.3V12.5ZM8 6.9C7.68355 6.9 7.37421 6.80616 7.11109 6.63035C6.84797 6.45454 6.6429 6.20466 6.5218 5.91229C6.4007 5.61993 6.36901 5.29822 6.43075 4.98786C6.49248 4.67749 6.64487 4.39239 6.86863 4.16863C7.0924 3.94486 7.37749 3.79248 7.68786 3.73074C7.99823 3.66901 8.31994 3.70069 8.6123 3.82179C8.90466 3.94289 9.15454 4.14797 9.33036 4.41109C9.50617 4.67421 9.6 4.98355 9.6 5.3C9.6 5.72435 9.43143 6.13131 9.13137 6.43137C8.83132 6.73143 8.42435 6.9 8 6.9Z",fill:"currentColor"}))},Ah=["height","width"],Sh=function(e){var t=e.height,n=void 0===t?16:t,o=e.width,i=void 0===o?16:o,s=Jp(e,Ah);return r.createElement("svg",Object.assign({width:i,height:n,fill:"none",viewBox:"0 0 16 16"},s),r.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2 16H14C14.5302 15.9994 15.0386 15.7885 15.4135 15.4135C15.7885 15.0386 15.9994 14.5302 16 14V9.42857C16 9.20124 15.9097 8.98323 15.7489 8.82248C15.5882 8.66173 15.3702 8.57143 15.1429 8.57143C14.9155 8.57143 14.6975 8.66173 14.5368 8.82248C14.376 8.98323 14.2857 9.20124 14.2857 9.42857V14C14.2857 14.0758 14.2556 14.1484 14.202 14.202C14.1484 14.2556 14.0758 14.2857 14 14.2857H2C1.92422 14.2857 1.85155 14.2556 1.79797 14.202C1.74439 14.1484 1.71429 14.0758 1.71429 14V2C1.71429 1.92422 1.74439 1.85155 1.79797 1.79797C1.85155 1.74439 1.92422 1.71429 2 1.71429H6.57143C6.79876 1.71429 7.01678 1.62398 7.17752 1.46323C7.33827 1.30249 7.42857 1.08447 7.42857 0.857143C7.42857 0.629814 7.33827 0.411797 7.17752 0.251051C7.01678 0.0903059 6.79876 0 6.57143 0H2C1.46975 0.00060496 0.961396 0.211513 0.586455 0.586455C0.211513 0.961396 0.00060496 1.46975 0 2V14C0.00060496 14.5302 0.211513 15.0386 0.586455 15.4135C0.961396 15.7885 1.46975 15.9994 2 16ZM11.1427 0H15.1427C15.37 0 15.588 0.0903059 15.7488 0.251051C15.9095 0.411797 15.9998 0.629814 15.9998 0.857143V4.85714C15.9998 5.08447 15.9095 5.30249 15.7488 5.46323C15.588 5.62398 15.37 5.71429 15.1427 5.71429C14.9154 5.71429 14.6973 5.62398 14.5366 5.46323C14.3758 5.30249 14.2855 5.08447 14.2855 4.85714V2.92686L8.60554 8.60571C8.44305 8.75712 8.22814 8.83955 8.00608 8.83563C7.78403 8.83171 7.57216 8.74175 7.41511 8.58471C7.25807 8.42767 7.16811 8.2158 7.1642 7.99374C7.16028 7.77168 7.2427 7.55677 7.39411 7.39429L13.073 1.71429H11.1427C10.9154 1.71429 10.6973 1.62398 10.5366 1.46323C10.3758 1.30249 10.2855 1.08447 10.2855 0.857143C10.2855 0.629814 10.3758 0.411797 10.5366 0.251051C10.6973 0.0903059 10.9154 0 11.1427 0Z",fill:"currentColor"}))},Mh=["height","width"],Fh=function(e){var t=e.height,n=void 0===t?16:t,o=e.width,i=void 0===o?16:o,s=Jp(e,Mh);return r.createElement("svg",Object.assign({width:i,height:n,fill:"none",viewBox:"0 0 16 17"},s),r.createElement("path",{d:"M8 0.5C6.41775 0.5 4.87103 0.969192 3.55544 1.84824C2.23985 2.72729 1.21447 3.97672 0.608967 5.43853C0.00346625 6.90034 -0.15496 8.50887 0.153721 10.0607C0.462403 11.6126 1.22433 13.038 2.34315 14.1569C3.46197 15.2757 4.88743 16.0376 6.43928 16.3463C7.99113 16.655 9.59966 16.4965 11.0615 15.891C12.5233 15.2855 13.7727 14.2602 14.6518 12.9446C15.5308 11.629 16 10.0822 16 8.5C15.9975 6.37905 15.1538 4.34569 13.6541 2.84595C12.1543 1.34621 10.121 0.502541 8 0.5ZM11.9072 7.2072L7.5072 11.6072C7.41434 11.7001 7.30409 11.7738 7.18275 11.824C7.06141 11.8743 6.93135 11.9002 6.8 11.9002C6.66866 11.9002 6.5386 11.8743 6.41726 11.824C6.29592 11.7738 6.18567 11.7001 6.0928 11.6072L4.0928 9.6072C3.90524 9.41964 3.79987 9.16525 3.79987 8.9C3.79987 8.63475 3.90524 8.38036 4.0928 8.1928C4.28036 8.00524 4.53475 7.89987 4.8 7.89987C5.06526 7.89987 5.31964 8.00524 5.5072 8.1928L6.8 9.4856L10.4928 5.7928C10.5857 5.69993 10.6959 5.62626 10.8173 5.576C10.9386 5.52574 11.0687 5.49987 11.2 5.49987C11.3313 5.49987 11.4614 5.52574 11.5827 5.576C11.7041 5.62626 11.8143 5.69993 11.9072 5.7928C12.0001 5.88567 12.0737 5.99592 12.124 6.11727C12.1743 6.23861 12.2001 6.36866 12.2001 6.5C12.2001 6.63134 12.1743 6.76139 12.124 6.88273C12.0737 7.00408 12.0001 7.11433 11.9072 7.2072Z",fill:"currentColor"}))},Oh=["height","width"],Th=function(e){var t=e.height,n=void 0===t?16:t,o=e.width,i=void 0===o?16:o,s=Jp(e,Oh);return r.createElement("svg",Object.assign({width:i,height:n,fill:"none",viewBox:"0 0 16 17"},s),r.createElement("path",{d:"M15.5968 11.7304L9.9968 1.68079C9.79978 1.32393 9.51069 1.02643 9.15964 0.819242C8.8086 0.612059 8.40842 0.502777 8.0008 0.502777C7.59317 0.502777 7.19299 0.612059 6.84195 0.819242C6.4909 1.02643 6.20181 1.32393 6.0048 1.68079L0.401596 11.7384C0.132444 12.2276 -0.00458609 12.7784 0.00401274 13.3367C0.0126116 13.8949 0.166543 14.4413 0.450632 14.9219C0.734721 15.4026 1.13916 15.8009 1.62408 16.0776C2.10901 16.3543 2.65767 16.4999 3.216 16.5H12.7808C13.34 16.5 13.8896 16.3542 14.3753 16.077C14.861 15.7997 15.266 15.4006 15.5503 14.919C15.8346 14.4375 15.9885 13.8901 15.9966 13.3309C16.0048 12.7717 15.867 12.22 15.5968 11.7304ZM7.2 5.29999C7.2 5.08781 7.28428 4.88433 7.43431 4.7343C7.58434 4.58427 7.78782 4.49999 8 4.49999C8.21217 4.49999 8.41565 4.58427 8.56568 4.7343C8.71571 4.88433 8.8 5.08781 8.8 5.29999V8.49999C8.8 8.71216 8.71571 8.91564 8.56568 9.06567C8.41565 9.2157 8.21217 9.29999 8 9.29999C7.78782 9.29999 7.58434 9.2157 7.43431 9.06567C7.28428 8.91564 7.2 8.71216 7.2 8.49999V5.29999ZM8 14.1C7.68355 14.1 7.3742 14.0061 7.11108 13.8303C6.84796 13.6545 6.64289 13.4046 6.52179 13.1123C6.40069 12.8199 6.369 12.4982 6.43074 12.1878C6.49248 11.8775 6.64486 11.5924 6.86863 11.3686C7.09239 11.1449 7.37748 10.9925 7.68785 10.9307C7.99822 10.869 8.31993 10.9007 8.61229 11.0218C8.90465 11.1429 9.15454 11.348 9.33035 11.6111C9.50616 11.8742 9.6 12.1835 9.6 12.5C9.6 12.9243 9.43142 13.3313 9.13137 13.6314C8.83131 13.9314 8.42434 14.1 8 14.1Z",fill:"currentColor"}))},Bh={neutral:{icon:r.createElement(kh,{className:"text-info-500"}),color:"text-info-800"},success:{icon:r.createElement(Fh,{className:"text-success-500"}),color:"text-success-800"},warning:{icon:r.createElement(Th,{className:"text-warning-500"}),color:"text-warning-800"},critical:{icon:r.createElement(Th,{className:"text-critical-500"}),color:"text-critical-800"}},Nh=(sh||(sh=Gp([""])),ah||(ah=Gp([""])),{info:"text-info-900 bg-info-100",success:"text-success-900 bg-success-100",warning:"text-warning-900 bg-warning-100",critical:"text-critical-900 bg-critical-100"}),Rh=(lh||(lh=Gp([""])),{info:{icon:r.createElement(kh,{className:"text-info-500",height:20,width:20}),color:"text-info-800",borderColor:"border-info-400"},success:{icon:r.createElement(Fh,{className:"text-success-500",height:20,width:20}),color:"text-success-800",borderColor:"border-success-400"},warning:{icon:r.createElement(Th,{className:"text-warning-500",height:20,width:20}),color:"text-warning-800",borderColor:"border-warning-400"},critical:{icon:r.createElement(Th,{className:"text-critical-500",size:20,height:20}),color:"text-critical-800",borderColor:"border-critical-400"}});uh||(uh=Gp([""])),ch||(ch=Gp([""])),dh||(dh=Gp([""])),ph||(ph=Gp([""]));var Ih,Ph,Lh,zh,$h,jh,_h,Hh,Kh,Vh,qh,Wh={small:{sizes:"w-3 h-3",scale:3},default:{sizes:"w-5 h-5",scale:5},large:{sizes:"w-6 h-6",scale:6}},Uh=(hh||(hh=Gp([""])),fh||(fh=Gp([""])),{small:"w-3 h-3 ft-text-xs",medium:"w-6 h-6 ft-text-base",big:"w-10 h-10 ft-text-lg",hero:"w-14 h-14 ft-text-xl"}),Zh=(Ih||(Ih=Gp([""])),Ph||(Ph=Gp([""])),Lh||(Lh=Gp([""])),{small:"w-2 h-2",medium:"w-3 h-3",large:"w-5 h-5"}),Jh=(zh||(zh=Gp([""])),{small:{style:"w-2 h-2",scale:2},medium:{style:"w-3 h-3",scale:3}}),Gh=($h||($h=Gp([""])),jh||(jh=Gp([""])),_h||(_h=Gp([""])),Hh||(Hh=Gp([""])),["iconRight","iconLeft","iconOnly","size","label"]),Yh=r.forwardRef((function(e,t){var n=e.iconRight,o=e.iconLeft,i=e.iconOnly,s=void 0!==i&&i,a=e.size,l=void 0===a?"medium":a,u=e.label,c=Jp(e,Gh);return r.createElement(nf,Object.assign({},c,{size:l,ref:t}),o&&r.createElement(of,{size:l},o),!s&&r.createElement(rf,{visible:!!u},u&&u),!o&&n&&r.createElement(of,{size:l},n))}));Yh.displayName="ButtonBase";var Xh,Qh={small:"h-4 space-x-1 rounded-lg",medium:"h-5 space-x-1.5 rounded-larger",large:"h-6 space-x-1.5 rounded-xl"},ef={small:"ft-text-sm",medium:"ft-text-base",large:"ft-text-base"},tf={small:"w-1.5 h-1.5",medium:"w-2 h-2",large:"w-2 h-2"},nf=i.ZP.button.attrs((function(e){var t=e.size,n=void 0===t?"medium":t;return{className:Qh[n]+" "+ef[n]+" \n  flex justify-center items-center focus:outline-none \n  focus:ring-2 focus:ring-primary-500"}}))(Kh||(Kh=Gp([""]))),rf=i.ZP.span.attrs((function(e){var t="font-bold";return e.visible||(t+=" hidden"),{className:t}}))(Vh||(Vh=Gp([""]))),of=i.ZP.span.attrs((function(e){var t=e.size;return{className:"flex items-center "+tf[void 0===t?"medium":t]}}))(qh||(qh=Gp([""]))),sf=["bgWhite","label","isActive","mode","size","className"],af=r.forwardRef((function(e,t){var n=e.bgWhite,o=void 0!==n&&n,i=e.label,s=e.isActive,a=void 0!==s&&s,l=e.mode,u=void 0===l?"primary":l,c=e.size,d=void 0===c?"medium":c,p=e.className,h=Jp(e,sf);return r.createElement(cf,Object.assign({ref:t},h,{bgWhite:o,label:i,isActive:a,mode:u,size:d,inputClassName:p}))}));af.displayName="ButtonText";var lf,uf={small:"py-0.5 px-2",medium:"py-1.5 px-2",large:"py-1.5 px-2"},cf=(0,i.ZP)(Yh).attrs((function(e){var t,n=e.bgWhite,r=e.isActive,o=e.mode,i=e.size,s=void 0===i?"medium":i,a=e.inputClassName;switch(o){case"secondary":t=(n?"bg-ui-50":"bg-ui-0")+" "+(r?"text-ui-800 bg-ui-200":"text-ui-600")+" "+uf[s]+" hover:text-ui-800 hover:bg-ui-100 active:text-ui-800 active:bg-ui-200 disabled:text-ui-300 disabled:bg-ui-100";break;case"ghost":t=(n?(r?"bg-primary-50":"bg-ui-0")+" active:bg-primary-50":(r?"bg-ui-0":"bg-ui-50")+"  active:bg-ui-0")+" "+(r?"text-primary-500":"text-ui-600")+" "+uf[s]+" hover:text-primary-500 active:text-primary-500 disabled:text-ui-300";break;default:t=(r?"bg-primary-700":"bg-primary-400")+" "+uf[s]+" text-ui-0 hover:bg-primary-500 active:bg-primary-700 disabled:text-primary-300 disabled:bg-primary-100"}return{className:t+" "+a}}))(Xh||(Xh=Gp([""]))),df=["bgWhite","icon","isActive","mode","size"],pf=r.forwardRef((function(e,t){var n=e.bgWhite,o=void 0!==n&&n,i=e.icon,s=e.isActive,a=void 0!==s&&s,l=e.mode,u=void 0===l?"primary":l,c=e.size,d=void 0===c?"medium":c,p=Jp(e,df);return r.createElement(Ym,Object.assign({ref:t},p,{iconLeft:i,bgWhite:o,isActive:a,mode:u,size:d,iconOnly:!0}))}));pf.displayName="ButtonIcon";var hf,ff,mf,gf,yf,vf,bf,Df,Cf,wf,Ef,xf,kf,Af,Sf,Mf,Ff,Of,Tf,Bf,Nf,Rf,If,Pf,Lf,zf,$f,jf,_f,Hf,Kf,Vf,qf,Wf,Uf,Zf,Jf,Gf,Yf,Xf,Qf,em,tm,nm,rm,om,im,sm,am,lm,um,cm,dm,pm,hm,fm,mm,gm,ym,vm,bm,Dm,Cm,wm,Em,xm,km,Am,Sm,Mm,Fm,Om,Tm,Bm,Nm,Rm,Im,Pm,Lm,zm,$m,jm,_m,Hm,Km,Vm,qm,Wm,Um,Zm,Jm,Gm={small:"w-4 p-1",medium:"w-5 p-1.5",large:"w-6 p-2"},Ym=(0,i.ZP)(Yh).attrs((function(e){var t,n=e.bgWhite,r=e.isActive,o=e.mode,i=e.size,s=void 0===i?"medium":i;switch(o){case"secondary":t=(n?"bg-ui-50 disabled:bg-ui-50":"bg-ui-0 disabled:bg-ui-100")+" "+(r?"text-ui-800 bg-ui-200":"text-ui-600")+" "+Gm[s]+" hover:text-ui-800 hover:bg-ui-100 active:text-ui-800 active:bg-ui-200 disabled:text-ui-300";break;case"ghost":t=(n?(r?"bg-primary-50":"bg-ui-0")+" active:bg-primary-50":(r?"bg-ui-0":"bg-ui-50")+" active:bg-ui-0")+" "+(r?"ext-primary-500":"text-ui-500")+" "+Gm[s]+" focus:text-primary-400 hover:text-primary-500 active:text-primary-500 disabled:text-ui-300 disabled:bg-transparent";break;default:t=(r?"bg-primary-700":"bg-primary-400")+" "+Gm[s]+" text-ui-0 hover:bg-primary-500 active:bg-primary-700 disabled:text-primary-300 disabled:bg-primary-100"}return{className:t}}))(lf||(lf=Gp([""]))),Xm=(hf||(hf=Gp(["\n  border-top-color: ",";\n  -webkit-animation: spinner 1s linear infinite;\n  animation: spinner 1s linear infinite;\n  @-webkit-keyframes spinner {\n    0% {\n      -webkit-transform: rotate(0deg);\n    }\n    100% {\n      -webkit-transform: rotate(360deg);\n    }\n  }\n  @keyframes spinner {\n    0% {\n      transform: rotate(0deg);\n    }\n    100% {\n      transform: rotate(360deg);\n    }\n  }\n"])),ff||(ff=Gp([""])),mf||(mf=Gp([""])),gf||(gf=Gp([""])),yf||(yf=Gp([""])),vf||(vf=Gp([""])),bf||(bf=Gp([""])),Df||(Df=Gp([""])),Cf||(Cf=Gp([""])),wf||(wf=Gp([""])),Ef||(Ef=Gp([""])),xf||(xf=Gp([""])),kf||(kf=Gp([""])),Af||(Af=Gp([""])),Sf||(Sf=Gp([""])),Mf||(Mf=Gp([""])),Ff||(Ff=Gp([""])),Of||(Of=Gp([""])),Tf||(Tf=Gp([""])),Bf||(Bf=Gp([""])),Nf||(Nf=Gp([""])),Rf||(Rf=Gp([""])),If||(If=Gp([""])),Pf||(Pf=Gp([""])),Lf||(Lf=Gp([""])),zf||(zf=Gp([""])),$f||($f=Gp([""])),jf||(jf=Gp([""])),_f||(_f=Gp([""])),Hf||(Hf=Gp([""])),Kf||(Kf=Gp([""])),Vf||(Vf=Gp([""])),qf||(qf=Gp([""])),Wf||(Wf=Gp([""])),Uf||(Uf=Gp(["\n  ::-webkit-progress-bar {\n    background-color: #e4e7eb;\n  }\n  ::-webkit-progress-value {\n    border-radius: 12px 0 0 12px;\n    background: linear-gradient(90deg, #0031ad 0%, #003bf5 100.32%);\n  }\n\n  &[value^='1']::-webkit-progress-value {\n    border-radius: 12px;\n  }\n\n  border-radius: 12px;\n  background-color: #e4e7eb;\n  height: 20px;\n  padding: 4px;\n\n  ::-moz-progress-bar {\n    border-radius: 12px 0 0 12px;\n    background: -moz-linear-gradient(90deg, #0031ad 0%, #003bf5 100.32%);\n  }\n\n  &[value^='1']::-moz-progress-bar {\n    border-radius: 12px;\n  }\n"])),Zf||(Zf=Gp([""])),Jf||(Jf=Gp([""])),Gf||(Gf=Gp([""])),Yf||(Yf=Gp([""])),Xf||(Xf=Gp([""])),{active:"text-primary-500",upcoming:"text-primary-500",done:"text-ui-800",succeeded:"text-success-800",failed:"text-critical-800"}),Qm=(Qf||(Qf=Gp([""])),em||(em=Gp([""])),tm||(tm=Gp([""])),nm||(nm=Gp([""])),["active","disabled","external","iconLeft","iconRight","label","href"]),eg=function(e){var t=e.active,n=void 0!==t&&t,o=e.disabled,i=void 0!==o&&o,s=e.external,a=void 0===s||s,l=e.iconLeft,u=e.iconRight,c=e.label,d=e.href,p=Jp(e,Qm);return r.createElement(tg,Object.assign({href:i?void 0:d,rel:"noopener noreferrer",active:n,disabled:i},a?{target:"_blank"}:{},p,{"data-testid":"link"}),l&&r.createElement("div",null,l),r.createElement(ng,null,c||d),!l&&u&&r.createElement("div",null,u))},tg=i.ZP.a.attrs((function(e){var t=e.active,n="flex items-center space-x-1.5 max-w-full hover:text-primary-700 rounded\n     focus:ring-2 focus:ring-primary-500 focus:outline-none cursor-pointer";return{className:n+=" "+(e.disabled?"text-ui-300 pointer-events-none":"text-primary-500")+" "+(t?"text-primary-800":"text-primary-500")+" "}}))(rm||(rm=Gp([""]))),ng=i.ZP.div.attrs({className:"font-bold truncate"})(om||(om=Gp([""]))),rg=(im||(im=Gp(["\n  &:hover {\n    box-shadow: 0px 4px 8px rgba(31, 41, 51, 0.04),\n      0px 0px 2px rgba(31, 41, 51, 0.06), 0px 0px 1px rgba(31, 41, 51, 0.04);\n  }\n"])),sm||(sm=Gp([""])),am||(am=Gp([""])),lm||(lm=Gp([""])),um||(um=Gp([""])),cm||(cm=Gp([""])),dm||(dm=Gp([""])),pm||(pm=Gp([""])),hm||(hm=Gp([""])),fm||(fm=Gp([""])),mm||(mm=Gp([""])),gm||(gm=Gp([""])),ym||(ym=Gp([""])),vm||(vm=Gp([""])),bm||(bm=Gp([""])),Dm||(Dm=Gp([""])),Cm||(Cm=Gp([""])),wm||(wm=Gp([""])),Em||(Em=Gp([""])),xm||(xm=Gp([""])),km||(km=Gp([""])),Am||(Am=Gp([""])),Sm||(Sm=Gp([""])),Mm||(Mm=Gp([""])),i.ZP.input.attrs((function(){return{className:"w-full bg-transparent focus:outline-none"}}))(Fm||(Fm=Gp([""])))),og=(Om||(Om=Gp([""])),Tm||(Tm=Gp([""])),Bm||(Bm=Gp([""])),Nm||(Nm=Gp(["\n  text-align: center;\n  ::-webkit-inner-spin-button,\n  ::-webkit-outer-spin-button {\n    -webkit-appearance: none;\n    margin: 0;\n  }\n  -moz-appearance: textfield;\n"])),Rm||(Rm=Gp([""])),Im||(Im=Gp(["\n  height: fit-content;\n"])),Pm||(Pm=Gp([""])),Lm||(Lm=Gp([""])),zm||(zm=Gp([""])),$m||($m=Gp(["\n  ::-webkit-calendar-picker-indicator {\n    display: none;\n  }\n  ::-webkit-datetime-edit-ampm-field {\n    display: none;\n  }\n"])),jm||(jm=Gp([""])),_m||(_m=Gp(["\n  ::-webkit-calendar-picker-indicator {\n    margin-top: 4px;\n    margin-bottom: 4px;\n  }\n"])),Hm||(Hm=Gp([""])),Km||(Km=Gp([""])),Vm||(Vm=Gp([""])),qm||(qm=Gp([""])),Wm||(Wm=Gp([""])),Um||(Um=Gp(["\n  box-shadow: 0px 4px 8px rgba(31, 41, 51, 0.04),\n    0px 0px 2px rgba(31, 41, 51, 0.06), 0px 0px 1px rgba(31, 41, 51, 0.04);\n"])),Zm||(Zm=Gp([""])),["mode","disabled"]);r.forwardRef((function(e,t){var n=e.mode,o=void 0===n?"default":n,i=e.disabled,s=void 0!==i&&i,a=Jp(e,og);return r.createElement(xy,Object.assign({"data-testid":"input-value"},{mode:o,disabled:s}),r.createElement(rg,Object.assign({disabled:s},a,{ref:t,onWheel:function(e){e.preventDefault(),e.target.blur()}})),r.createElement(af,{label:a.adornmentText,size:"small",mode:"secondary",bgWhite:!0,disabled:s,onClick:a.onAdornmentClick}))})).displayName="ValueInput";var ig,sg,ag,lg,ug,cg,dg,pg,hg,fg,mg,gg,yg,vg,bg,Dg,Cg,wg,Eg,xg,kg,Ag,Sg,Mg,Fg,Og,Tg,Bg,Ng,Rg,Ig,Pg,Lg,zg,$g,jg,_g,Hg,Kg,Vg,qg,Wg,Ug,Zg,Jg,Gg,Yg,Xg,Qg,ey,ty,ny,ry,oy,iy,sy,ay,ly,uy,cy,dy,py,hy,fy,my,gy,yy,vy,by,Dy,Cy,wy,Ey,xy=i.ZP.div.attrs((function(e){var t=e.mode,n=(e.disabled?"bg-ui-100 border-ui-200":"bg-ui-0")+" flex items-center space-x-1.5 p-0.75 pl-2 \n      text-ui-600 rounded-xl border-2 hover:border-ui-300 ";return"default"===t?n+="border-ui-100":"success"===t?n+="border-success-600":"warning"===t?n+="border-warning-600":"critical"===t&&(n+="border-critical-600"),{className:n}}))(Jm||(Jm=Gp(["\n  :focus-within {\n    border-color: #003bf5;\n  }\n"]))),ky=(ig||(ig=Gp([""])),sg||(sg=Gp([""])),ag||(ag=Gp([""])),lg||(lg=Gp([""])),ug||(ug=Gp([""])),cg||(cg=Gp([""])),dg||(dg=Gp([""])),pg||(pg=Gp([""])),hg||(hg=Gp([""])),fg||(fg=Gp([""])),mg||(mg=Gp([""])),gg||(gg=Gp([""])),yg||(yg=Gp([""])),vg||(vg=Gp([""])),bg||(bg=Gp([""])),Dg||(Dg=Gp([""])),Cg||(Cg=Gp([""])),wg||(wg=Gp([""])),Eg||(Eg=Gp([""])),xg||(xg=Gp([""])),kg||(kg=Gp([""])),Ag||(Ag=Gp([""])),Sg||(Sg=Gp([""])),Mg||(Mg=Gp([""])),Fg||(Fg=Gp([""])),Og||(Og=Gp([""])),Tg||(Tg=Gp([""])),Bg||(Bg=Gp([""])),Ng||(Ng=Gp(["\n  cursor: pointer;\n"])),Rg||(Rg=Gp([""])),Ig||(Ig=Gp([""])),Pg||(Pg=Gp([""])),Lg||(Lg=Gp([""])),zg||(zg=Gp(["\n  & > a {\n    color: #003bf5;\n  }\n"])),$g||($g=Gp(["\n  & > a {\n    color: #003bf5;\n    font-weight: 700;\n  }\n"])),jg||(jg=Gp([""])),_g||(_g=Gp(["\n  box-shadow: 0px 4px 8px rgba(31, 41, 51, 0.04),\n    0px 0px 2px rgba(31, 41, 51, 0.06), 0px 0px 1px rgba(31, 41, 51, 0.04);\n"])),Hg||(Hg=Gp([""])),Kg||(Kg=Gp([""])),Vg||(Vg=Gp([""])),qg||(qg=Gp([""])),{top:"margin-bottom: 8px",bottom:"margin-top: 8px",left:"margin-right: 8px",right:"margin-left: 8px"});Wg||(Wg=Gp(["\n  ","\n"])),Ug||(Ug=Gp([""])),Zg||(Zg=Gp([""])),Jg||(Jg=Gp([""])),Gg||(Gg=Gp([""])),Yg||(Yg=Gp([""])),Xg||(Xg=Gp([""])),Qg||(Qg=Gp([""])),ey||(ey=Gp([""])),ty||(ty=Gp([""])),ny||(ny=Gp([""])),ry||(ry=Gp([""])),oy||(oy=Gp([""])),iy||(iy=Gp([""])),sy||(sy=Gp([""])),ay||(ay=Gp([""])),ly||(ly=Gp([""])),uy||(uy=Gp([""])),cy||(cy=Gp(["\n  min-height: 144px;\n\n  ::-webkit-input-placeholder {\n    color: #9aa5b1;\n  }\n  ::-moz-placeholder {\n    color: #9aa5b1;\n  }\n  :-ms-input-placeholder {\n    color: #9aa5b1;\n  }\n  :-moz-placeholder {\n    color: #9aa5b1;\n  }\n"])),dy||(dy=Gp(["\n  :focus-within {\n    border-color: #003bf5;\n  }\n\n  :focus-within[disabled] {\n    border-color: #cbd2d9;\n  }\n\n  ::-webkit-input-placeholder {\n    color: #9aa5b1;\n  }\n  ::-moz-placeholder {\n    color: #9aa5b1;\n  }\n  :-ms-input-placeholder {\n    color: #9aa5b1;\n  }\n  :-moz-placeholder {\n    color: #9aa5b1;\n  }\n"])),py||(py=Gp([""])),hy||(hy=Gp([""])),fy||(fy=Gp(["\n  flex: 1;\n\n  .ProseMirror {\n    padding: 12px 16px;\n    height: 100%;\n    min-height: 112px;\n\n    :focus {\n      outline: none;\n    }\n\n    ul {\n      list-style-type: decimal;\n      padding: 0 1rem;\n    }\n\n    ol {\n      list-style-type: disc;\n      padding: 0 1rem;\n    }\n\n    a {\n      color: #003bf5;\n      cursor: pointer;\n      font-weight: 700;\n\n      :hover {\n        color: #0031ad;\n      }\n    }\n  }\n\n  .ProseMirror p.is-editor-empty:first-child::before {\n    color: #adb5bd;\n    content: attr(data-placeholder);\n    float: left;\n    height: 0;\n    pointer-events: none;\n  }\n"])),my||(my=Gp(["\n  border-spacing: 0;\n\n  th,\n  td {\n    width: 100%;\n  }\n\n  tr th,\n  tr td {\n    border-bottom: 1px solid #e4e7eb;\n  }\n\n  tr th:first-child {\n    border-left: 1px solid #e4e7eb;\n  }\n\n  tr th:last-child {\n    border-right: 1px solid #e4e7eb;\n  }\n\n  tr th {\n    border-top: 1px solid #e4e7eb;\n  }\n\n  tr:first-child th:first-child {\n    border-top-left-radius: 12px;\n  }\n\n  tr:first-child th:last-child {\n    border-top-right-radius: 12px;\n  }\n\n  tfoot td:first-child {\n    border-bottom-left-radius: 12px;\n  }\n\n  tfoot td:last-child {\n    border-bottom-right-radius: 12px;\n  }\n"])),gy||(gy=Gp([""])),yy||(yy=Gp([""])),vy||(vy=Gp([""])),by||(by=Gp([""])),Dy||(Dy=Gp([""])),Cy||(Cy=Gp([""])),wy||(wy=Gp([""])),Ey||(Ey=Gp([""]));var Ay,Sy,My,Fy,Oy,Ty,By,Ny,Ry,Iy,Py,Ly,zy,$y,jy,_y,Hy,Ky,Vy,qy,Wy,Uy,Zy,Jy,Gy,Yy,Xy;Ay||(Ay=Gp(["\n  box-shadow: 0px 4px 8px rgba(31, 41, 51, 0.04),\n    0px 0px 2px rgba(31, 41, 51, 0.06), 0px 0px 1px rgba(31, 41, 51, 0.04);\n"])),Sy||(Sy=Gp([""])),My||(My=Gp([""])),Fy||(Fy=Gp([""])),Oy||(Oy=Gp([""])),Ty||(Ty=Gp(["\n  overflow: hidden;\n  display: -webkit-box;\n  -webkit-box-orient: vertical;\n  -webkit-line-clamp: ",";\n"])),By||(By=Gp([""])),Ny||(Ny=Gp([""])),Ry||(Ry=Gp([""])),Iy||(Iy=Gp([""])),Py||(Py=Gp([""])),Ly||(Ly=Gp([""])),zy||(zy=Gp([""])),$y||($y=Gp([""])),jy||(jy=Gp(["\n  box-shadow: 0px 4px 8px rgba(31, 41, 51, 0.04),\n    0px 0px 2px rgba(31, 41, 51, 0.06), 0px 0px 1px rgba(31, 41, 51, 0.04);\n"])),_y||(_y=Gp([""])),Hy||(Hy=Gp([""])),Ky||(Ky=Gp([""])),Vy||(Vy=Gp([""])),qy||(qy=Gp([""])),Wy||(Wy=Gp([""])),Error,Uy||(Uy=Gp([""])),Zy||(Zy=Gp([""])),Jy||(Jy=Gp([""])),Gy||(Gy=Gp([""])),Yy||(Yy=Gp([""])),Xy||(Xy=Gp(["\n  & > a {\n    color: #003bf5;\n    font-weight: 700;\n"]))},2603:function(e,t,n){n.d(t,{n:function(){return a}});var r=n(7294);function o(e,t,n){(0,r.useEffect)((()=>(window.addEventListener(e,t,n),()=>window.removeEventListener(e,t,n))),[])}const i={passive:!0},s="undefined"!=typeof window;function a(){const[e,t]=(0,r.useState)({width:s?window.innerWidth:0,height:s?window.innerHeight:0}),n=(0,r.useCallback)((()=>{t({width:window.innerWidth||0,height:window.innerHeight||0})}),[]);return o("resize",n,i),o("orientationchange",n,i),e}},710:function(e,t,n){var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(7294),s=l(i),a=l(n(5697));function l(e){return e&&e.__esModule?e:{default:e}}var u=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.generateIdenticon=n.generateIdenticon.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),o(t,[{key:"componentDidMount",value:function(){this.generateIdenticon(r({},this.props))}},{key:"componentWillUpdate",value:function(e){this.isEquivalent(this.props,e)||this.generateIdenticon(r({},e))}},{key:"isEquivalent",value:function(e,t){var n=Object.getOwnPropertyNames(e),r=Object.getOwnPropertyNames(t);if(n.length!=r.length)return!1;for(var o=0;o<n.length;o++){var i=n[o];if(e[i]!==t[i])return!1}return!0}},{key:"generateIdenticon",value:function(e){var t=new Array(4);function n(){var e=t[0]^t[0]<<11;return t[0]=t[1],t[1]=t[2],t[2]=t[3],t[3]=t[3]^t[3]>>19^e^e>>8,(t[3]>>>0)/(1<<31>>>0)}function r(){return"hsl("+Math.floor(360*n())+","+(60*n()+40+"%")+","+(25*(n()+n()+n()+n())+"%")+")"}var o=e||{},i=o.size||8,s=o.scale||4;!function(e){for(var n=0;n<t.length;n++)t[n]=0;for(var r=0;r<e.length;r++)t[r%4]=(t[r%4]<<5)-t[r%4]+e.charCodeAt(r)}(o.seed||Math.floor(Math.random()*Math.pow(10,16)).toString(16));var a=o.color||r(),l=o.bgColor||r(),u=o.spotColor||r(),c=function(e){for(var t=e,r=e,o=Math.ceil(t/2),i=t-o,s=[],a=0;a<r;a++){for(var l=[],u=0;u<o;u++)l[u]=Math.floor(2.3*n());var c=l.slice(0,i);c.reverse(),l=l.concat(c);for(var d=0;d<l.length;d++)s.push(l[d])}return s}(i),d=function(e,t,n,r,o,i){var s=Math.sqrt(t.length),a=s*r;e.width=a,e.style.width=a+"px",e.height=a,e.style.height=a+"px";var l=e.getContext("2d");l.fillStyle=o,l.fillRect(0,0,e.width,e.height),l.fillStyle=n;for(var u=0;u<t.length;u++)if(l.fillStyle=1===t[u]?n:i,t[u]){var c=Math.floor(u/s),d=u%s;l.fillRect(d*r,c*r,r,r)}}(this.identicon,c,a,s,l,u);return d}},{key:"render",value:function(){var e=this;return s.default.createElement("canvas",{ref:function(t){e.identicon=t},className:this.props.className})}}]),t}(i.Component);t.Z=u,u.defaultProps={className:"identicon"},u.propTypes={seed:a.default.string.isRequired,size:a.default.number,scale:a.default.number,color:a.default.string,bgColor:a.default.string,spotColor:a.default.string}}}]);