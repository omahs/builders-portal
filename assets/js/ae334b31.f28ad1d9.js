"use strict";(self.webpackChunkdev_portal=self.webpackChunkdev_portal||[]).push([[2520],{3905:function(e,t,r){r.d(t,{Zo:function(){return p},kt:function(){return m}});var n=r(7294);function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){a(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function o(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var s=n.createContext({}),d=function(e){var t=n.useContext(s),r=t;return e&&(r="function"==typeof e?e(t):l(l({},t),e)),r},p=function(e){var t=d(e.components);return n.createElement(s.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},c=n.forwardRef((function(e,t){var r=e.components,a=e.mdxType,i=e.originalType,s=e.parentName,p=o(e,["components","mdxType","originalType","parentName"]),c=d(r),m=a,g=c["".concat(s,".").concat(m)]||c[m]||u[m]||i;return r?n.createElement(g,l(l({ref:t},p),{},{components:r})):n.createElement(g,l({ref:t},p))}));function m(e,t){var r=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var i=r.length,l=new Array(i);l[0]=c;var o={};for(var s in t)hasOwnProperty.call(t,s)&&(o[s]=t[s]);o.originalType=e,o.mdxType="string"==typeof e?e:a,l[1]=o;for(var d=2;d<i;d++)l[d]=r[d];return n.createElement.apply(null,l)}return n.createElement.apply(null,r)}c.displayName="MDXCreateElement"},8810:function(e,t,r){r.r(t),r.d(t,{assets:function(){return p},contentTitle:function(){return s},default:function(){return m},frontMatter:function(){return o},metadata:function(){return d},toc:function(){return u}});var n=r(3117),a=r(102),i=(r(7294),r(3905)),l=["components"],o={},s=void 0,d={unversionedId:"smart-contracts/registry/ens/ENSSubdomainRegistrar",id:"smart-contracts/registry/ens/ENSSubdomainRegistrar",title:"ENSSubdomainRegistrar",description:"Aragon Core",source:"@site/docs/smart-contracts/registry/ens/ENSSubdomainRegistrar.md",sourceDirName:"smart-contracts/registry/ens",slug:"/smart-contracts/registry/ens/ENSSubdomainRegistrar",permalink:"/docs/smart-contracts/registry/ens/ENSSubdomainRegistrar",draft:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/smart-contracts/registry/ens/ENSSubdomainRegistrar.md",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"InterfaceBasedRegistry",permalink:"/docs/smart-contracts/registry/InterfaceBasedRegistry"},next:{title:"GovernanceERC20",permalink:"/docs/smart-contracts/tokens/GovernanceERC20"}},p={},u=[{value:"Aragon Core",id:"aragon-core",level:2},{value:"contract <code>ENSSubdomainRegistrar</code>",id:"contract-enssubdomainregistrar",level:3},{value:"internal variable <code>REGISTRY_INTERFACE_ID</code>",id:"internal-variable-registry_interface_id",level:4},{value:"public variable <code>REGISTER_ENS_SUBDOMAIN_PERMISSION_ID</code>",id:"public-variable-register_ens_subdomain_permission_id",level:4},{value:"private variable <code>ens</code>",id:"private-variable-ens",level:4},{value:"public variable <code>node</code>",id:"public-variable-node",level:4},{value:"public variable <code>resolver</code>",id:"public-variable-resolver",level:4},{value:"error <code>UnauthorizedRegistrar</code>",id:"error-unauthorizedregistrar",level:4},{value:"error <code>AlreadyRegistered</code>",id:"error-alreadyregistered",level:4},{value:"external function <code>initialize</code>",id:"external-function-initialize",level:4},{value:"external function <code>registerSubnode</code>",id:"external-function-registersubnode",level:4},{value:"external function <code>setDefaultResolver</code>",id:"external-function-setdefaultresolver",level:4}],c={toc:u};function m(e){var t=e.components,r=(0,a.Z)(e,l);return(0,i.kt)("wrapper",(0,n.Z)({},c,r,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h2",{id:"aragon-core"},"Aragon Core"),(0,i.kt)("h3",{id:"contract-enssubdomainregistrar"},"contract ",(0,i.kt)("inlineCode",{parentName:"h3"},"ENSSubdomainRegistrar")),(0,i.kt)("p",null,"This contract registers ENS subdomains under a parent domain specified in the initialization process and maintains ownership of the subdomain since only the resolver address is set. This contract must either be the domain node owner or an approved operator of the node owner. The default resolver being used is the one specified in the parent domain."),(0,i.kt)("h4",{id:"internal-variable-registry_interface_id"},"internal variable ",(0,i.kt)("inlineCode",{parentName:"h4"},"REGISTRY_INTERFACE_ID")),(0,i.kt)("p",null,"The ",(0,i.kt)("a",{parentName:"p",href:"https://eips.ethereum.org/EIPS/eip-165"},"ERC-165")," interface ID of the contract."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-solidity"},"bytes4 REGISTRY_INTERFACE_ID \n")),(0,i.kt)("h4",{id:"public-variable-register_ens_subdomain_permission_id"},"public variable ",(0,i.kt)("inlineCode",{parentName:"h4"},"REGISTER_ENS_SUBDOMAIN_PERMISSION_ID")),(0,i.kt)("p",null,"The ID of the permission required to call the ",(0,i.kt)("inlineCode",{parentName:"p"},"registerSubnode")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"setDefaultResolver")," function."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-solidity"},"bytes32 REGISTER_ENS_SUBDOMAIN_PERMISSION_ID \n")),(0,i.kt)("h4",{id:"private-variable-ens"},"private variable ",(0,i.kt)("inlineCode",{parentName:"h4"},"ens")),(0,i.kt)("p",null,"The ENS registry contract"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-solidity"},"contract ENS ens \n")),(0,i.kt)("h4",{id:"public-variable-node"},"public variable ",(0,i.kt)("inlineCode",{parentName:"h4"},"node")),(0,i.kt)("p",null,"The namehash of the domain on which subdomains are registered."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-solidity"},"bytes32 node \n")),(0,i.kt)("h4",{id:"public-variable-resolver"},"public variable ",(0,i.kt)("inlineCode",{parentName:"h4"},"resolver")),(0,i.kt)("p",null,"The address of the ENS resolver resolving the names to an address."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-solidity"},"address resolver \n")),(0,i.kt)("h4",{id:"error-unauthorizedregistrar"},"error ",(0,i.kt)("inlineCode",{parentName:"h4"},"UnauthorizedRegistrar")),(0,i.kt)("p",null,"Thrown if the registrar is not authorized and is neither the domain node owner nor an approved operator of the domain node owner."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-solidity"},"error UnauthorizedRegistrar(address nodeOwner, address here) \n")),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:"left"},"Input"),(0,i.kt)("th",{parentName:"tr",align:null},"Type"),(0,i.kt)("th",{parentName:"tr",align:null},"Description"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"left"},"nodeOwner"),(0,i.kt)("td",{parentName:"tr",align:null},"address"),(0,i.kt)("td",{parentName:"tr",align:null},"The node owner.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"left"},"here"),(0,i.kt)("td",{parentName:"tr",align:null},"address"),(0,i.kt)("td",{parentName:"tr",align:null},"The address of this registry.")))),(0,i.kt)("h4",{id:"error-alreadyregistered"},"error ",(0,i.kt)("inlineCode",{parentName:"h4"},"AlreadyRegistered")),(0,i.kt)("p",null,"Thrown if the subnode is already registered."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-solidity"},"error AlreadyRegistered(bytes32 subnode, address nodeOwner) \n")),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:"left"},"Input"),(0,i.kt)("th",{parentName:"tr",align:null},"Type"),(0,i.kt)("th",{parentName:"tr",align:null},"Description"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"left"},"subnode"),(0,i.kt)("td",{parentName:"tr",align:null},"bytes32"),(0,i.kt)("td",{parentName:"tr",align:null},"The subnode namehash.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"left"},"nodeOwner"),(0,i.kt)("td",{parentName:"tr",align:null},"address"),(0,i.kt)("td",{parentName:"tr",align:null},"The node owner address.")))),(0,i.kt)("h4",{id:"external-function-initialize"},"external function ",(0,i.kt)("inlineCode",{parentName:"h4"},"initialize")),(0,i.kt)("p",null,"Initializes the component by"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"checking that the contract is the domain node owner or an approved operator"),(0,i.kt)("li",{parentName:"ul"},"initializing the underlying component"),(0,i.kt)("li",{parentName:"ul"},"registering the ",(0,i.kt)("a",{parentName:"li",href:"https://eips.ethereum.org/EIPS/eip-165"},"ERC-165")," interface ID"),(0,i.kt)("li",{parentName:"ul"},"setting the ENS contract, the domain node hash, and resolver.")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-solidity"},"function initialize(contract IDAO _managingDao, contract ENS _ens, bytes32 _node) external \n")),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:"left"},"Input"),(0,i.kt)("th",{parentName:"tr",align:null},"Type"),(0,i.kt)("th",{parentName:"tr",align:null},"Description"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"left"},"_managingDao"),(0,i.kt)("td",{parentName:"tr",align:null},"contract IDAO"),(0,i.kt)("td",{parentName:"tr",align:null},"The interface of the DAO managing the components permissions.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"left"},"_ens"),(0,i.kt)("td",{parentName:"tr",align:null},"contract ENS"),(0,i.kt)("td",{parentName:"tr",align:null},"The interface of the ENS registry to be used.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"left"},"_node"),(0,i.kt)("td",{parentName:"tr",align:null},"bytes32"),(0,i.kt)("td",{parentName:"tr",align:null},"The ENS parent domain node under which the subdomains are to be registered.")))),(0,i.kt)("h4",{id:"external-function-registersubnode"},"external function ",(0,i.kt)("inlineCode",{parentName:"h4"},"registerSubnode")),(0,i.kt)("p",null,"Registers a new subdomain with this registrar as the owner and set the target address in the resolver."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-solidity"},"function registerSubnode(bytes32 _label, address _targetAddress) external \n")),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:"left"},"Input"),(0,i.kt)("th",{parentName:"tr",align:null},"Type"),(0,i.kt)("th",{parentName:"tr",align:null},"Description"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"left"},"_label"),(0,i.kt)("td",{parentName:"tr",align:null},"bytes32"),(0,i.kt)("td",{parentName:"tr",align:null},"The labelhash of the subdomain name.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"left"},"_targetAddress"),(0,i.kt)("td",{parentName:"tr",align:null},"address"),(0,i.kt)("td",{parentName:"tr",align:null},"The address to which the subdomain resolves.")))),(0,i.kt)("h4",{id:"external-function-setdefaultresolver"},"external function ",(0,i.kt)("inlineCode",{parentName:"h4"},"setDefaultResolver")),(0,i.kt)("p",null,"Sets the default resolver contract address that the subdomains being registered will use."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-solidity"},"function setDefaultResolver(contract Resolver _resolver) external \n")),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:"left"},"Input"),(0,i.kt)("th",{parentName:"tr",align:null},"Type"),(0,i.kt)("th",{parentName:"tr",align:null},"Description"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"left"},"_resolver"),(0,i.kt)("td",{parentName:"tr",align:null},"contract Resolver"),(0,i.kt)("td",{parentName:"tr",align:null},"The resolver contract to be used.")))))}m.isMDXComponent=!0}}]);